webpackJsonp([1],{1146:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".schoolInfo{margin:15px 0;background:#fff;border-radius:5px;position:relative}.schoolMap{height:230px;border-radius:5px 5px 0 0;overflow:hidden;position:relative}.schoolIntroduce{margin:10px 0 10px 20%;color:#93a0b1;font-size:1.1em;line-height:1.8}.schoolData{width:100%;clear:both;display:table;color:#93a0b1;overflow:hidden;line-height:2;border-radius:0 0 5px 5px;margin-bottom:10px}.schoolDataItem{display:table-cell;text-align:center;width:33.33%}.default-map,.default-map img{width:100%;height:100%}.default-map img{opacity:.2}.default-map span{position:absolute;left:50%;top:50%;z-index:10;font-size:16px;font-weight:700;white-space:nowrap;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.map-item{width:100%;height:300px}",""])},1147:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".school-title{font-size:24px;line-height:24px;padding:15px}@media only screen and (min-width:767px){.school-title{color:#fff}}",""])},1148:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".nav-ctrl{position:absolute;width:20px;height:45px;right:-19px;background-color:#1cc09f;border:1px solid #dde6e9;border-left:0;text-align:center;cursor:pointer;border-radius:0 3px 3px 0;z-index:100}.nav-ctrl>em{line-height:49px;font-size:20px;color:#fff}@media only screen and (min-width:767px){.nav-ctrl{display:none}}",""])},1149:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".alert-tabs .ant-tabs-content{background:#fff}.alert-table-dangeralert .ant-table-content,.alert-table-warningalert .ant-table-content{min-height:593px}",""])},1150:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,"#components-tabs-demo-card-top .code-box-demo{background:#ececec;overflow:hidden;padding:24px}.card-container>.ant-tabs-card>.ant-tabs-content{margin-top:-16px}.card-container>.ant-tabs-card>.ant-tabs-content>.ant-tabs-tabpane{background:#fff;padding:16px}.card-container>.ant-tabs-card>.ant-tabs-bar .ant-tabs-tab{border-color:transparent}.card-container>.ant-tabs-card>.ant-tabs-bar .ant-tabs-tab-active{border-color:#fff}.operation>a:hover,.operation>em:hover{color:#1ab394!important;cursor:pointer}.ant-modal-close-x,.attendanceDetail .ant-modal-title{font-size:16px;color:#fff}.attendanceDetail .ant-modal-header{background:#1ab394}.attendanceDetail .ant-modal-close-x:hover{color:#f4364c;transform:scale(1.4);transition:all .4s}.custom-filter-dropdown{padding:8px;border-radius:6px;background:#fff;box-shadow:0 1px 6px rgba(0,0,0,.2)}.custom-filter-dropdown input{width:130px;margin-right:8px}.card-container .ant-table-content{min-height:593px}.attendanceDetail .anticon-close-circle{cursor:pointer;color:#ccc;transition:color .3s;font-size:12px}.attendanceDetail .anticon-close-circle:hover{color:#999}.attendanceDetail .anticon-close-circle:active{color:#666}.attendanceDetail .ant-input-affix-wrapper{width:132px}",""])},1151:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,'.Ptitle{font-family:MicrosoftYaHei;font-size:"14px";color:"#3e3e4e"}.Pcontent{font-family:AriaMT;font-size:"22px";color:"#3e3e4e"}',""])},1152:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".operation>a:hover{color:#1ab394!important}.ant-popover-title{font-size:15px!important}.selected-layer{background:rgba(81,173,254,.2)}",""])},1153:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".inOutSchool-tabs .ant-tabs-content{background:#fff}.ant-table-inschool .ant-table-content,.ant-table-outschool .ant-table-content{min-height:593px}.custom-filter-dropdown .anticon-close-circle{cursor:pointer;color:#ccc;transition:color .3s;font-size:12px}.custom-filter-dropdown .anticon-close-circle:hover{color:#999}.custom-filter-dropdown .anticon-close-circle:active{color:#666}.custom-filter-dropdown .ant-input-suffix{right:17px}",""])},1154:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".step-count>a:hover{color:#49a9ee!important}",""])},1155:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".ClassroomActivity,.participation,.ranking{text-align:center!important}",""])},1156:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".male.outSchool{background:url(/iot/web/education/resources/img/maleOutSchool.svg)!important}.male.onSchool,.male.outSchool{width:45px!important;height:45px!important;display:inline-block!important}.male.onSchool{background:url(/iot/web/education/resources/img/maleOnSchool.svg)!important}.famale.outSchool{background:url(/iot/web/education/resources/img/famaleOutSchool.svg)!important}.famale.onSchool,.famale.outSchool{width:45px!important;height:45px!important;display:inline-block!important}.famale.onSchool{background:url(/iot/web/education/resources/img/famaleOnSchool.svg)!important}.down,.up{float:right!important}.down{display:none!important}.handTop :hover{background:#eef3f2}.handTop{overflow:hidden;padding:0 20px;height:auto}.topItemContainer{height:65px;width:100%;padding:5px 10px 5px 5px}.topIconMale{background:url(/iot/web/education/resources/img/maleOnSchool.svg)!important}.topIconFelMale,.topIconMale{float:left;width:43px;height:43px}.topIconFelMale{background:url(/iot/web/education/resources/img/famaleOnSchool.svg)!important}.topName{line-height:50px;margin-left:5px;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.topInfo{min-width:40px;height:50px;float:right;text-align:center}.topRanking{font-style:italic;color:#4ec1b2;font-weight:bolder;font-size:22px;margin:5px 5px 5px 0;float:left}.L1{color:#eaf80f}.L2{color:#cfccc8}.L3{color:#f0b750}.topCount{display:block;margin:17px auto}.divTitle{margin-left:15px;display:block;text-align:left;white-space:nowrap;font-size:17px;font-weight:400;color:#343e4e;font-family:inherit}",""])},1157:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".Dailyhand,.ranking{text-align:center!important}",""])},1158:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".class-manage .ant-card-head{//:rgba(26,197,148,.05)}.class-manage a:hover,.operation>a:hover i{color:#1ab394!important}.operation>a:hover i{transform:scale(1.3);transition:all .4s}.ant-popover-title{font-size:12px!important;color:#343e4e!important}.operation>a:hover{color:#1ab394!important}.class-manage .ant-table-content{min-height:637px}.health-detail .ant-table-content{min-height:491px}.area-setting .ant-table-content{min-height:287px}",""])},1159:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".student-manage .ant-card-head{//:rgba(26,197,148,.05)}.operation>a:hover,.operation>em:hover{color:#1ab394!important;cursor:pointer}.custom-filter-dropdown{padding:8px;border-radius:6px;background:#fff;box-shadow:0 1px 6px rgba(0,0,0,.2)}.custom-filter-dropdown input{width:130px;margin-right:8px}.custom-filter-dropdown .ant-input-affix-wrapper{width:auto!important}.student-manage .ant-table-content{min-height:637px}.custom-filter-dropdown .anticon-close-circle{cursor:pointer;color:#ccc;transition:color .3s;font-size:12px}.custom-filter-dropdown .anticon-close-circle:hover{color:#999}.custom-filter-dropdown .anticon-close-circle:active{color:#666}.custom-filter-dropdown .ant-input-suffix{right:17px!important}",""])},1160:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".operation>a:hover{color:#1ab394!important}.ant-popover-title{font-size:15px!important}",""])},1161:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".custom-filter-dropdown{padding:8px;border-radius:6px;background:#fff;box-shadow:0 1px 6px rgba(0,0,0,.2)}.custom-filter-dropdown .ant-input-affix-wrapper,.custom-filter-dropdown input{width:130px;margin-right:8px}.highlight{color:#f50}",""])},1162:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,'.cursor,.react-draggable{cursor:move}.no-cursor{cursor:auto}.cursor-y{cursor:ns-resize}.cursor-x{cursor:ew-resize}.react-draggable strong{background:#ddd;border:1px solid #999;border-radius:3px;display:block;margin-bottom:10px;padding:3px 5px;text-align:center}.box{box-sizing:border-box;border:0 solid #999;border-radius:3px;width:15px;height:44px;margin:0;padding:0;float:left}.pin{width:27px;height:27px;border-radius:50% 50% 50% 0;background:#56cfb5;position:absolute;transform:rotate(-45deg);left:50%;top:50%;margin:-20px 0 0 -20px}.pin:after{content:"";width:15px;height:15px;margin:6px 0 0;background:#fff;display:inline-block;border-radius:50%}.pulse{background:#2a423d;border-radius:50%;height:20px;width:20px;position:absolute;left:50%;top:50%;margin:3px 0 0 -16px;transform:rotateX(55deg);z-index:-2}.pulse:after{content:"";border-radius:50%;height:40px;width:40px;display:inline-block;margin:-10px 0 0 -10px;animation:pulsate 1s ease-out;animation-iteration-count:infinite;opacity:0;box-shadow:0 0 1px 2px #56cfb5}@keyframes pulsate{0%{transform:scale(.1);opacity:0}50%{opacity:1}to{transform:scale(1.2);opacity:0}}',""])},1163:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".operation>a:hover{color:#1ab394!important}.ant-popover-title{font-size:15px!important}.selected-layer{background:rgba(81,173,254,.2)}",""])},1164:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".noneSelectLabel{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}",""])},1165:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".appList-collapse>.ant-collapse>.ant-collapse-item>.ant-collapse-header{height:60px;line-height:60px}.appList-collapse>.ant-collapse>.ant-collapse-item>.ant-collapse-header .arrow{line-height:60px}",""])},1166:function(e,t,a){t=e.exports=a(14)(),t.push([e.i,".small-chat{position:fixed;bottom:24%;right:2%;z-index:100}.open-small-chat{height:45px;width:45px;display:block;background:rgba(26,179,148,.8);padding:9px 8px;text-align:center;color:#fff;border-radius:50%}",""])},131:function(e,t,a){"use strict";function n(e){return{type:V,payload:e}}function o(e,t){return function(a){return a({type:H,payload:F.getClass(e,t)})}}function r(e,t,a){return function(n){return n({type:W,payload:F.addClassConfig(e,t,a)})}}function l(e,t,a){return function(n){return n({type:z,payload:F.modifyClassConfig(e,t,a)})}}function i(e,t,a){return function(n){return n({type:U,payload:F.delClassConfig(e,t,a)})}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:j,payload:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:K,payload:e}}function u(e,t,a){return function(n){return n({type:q,payload:F.delClassConfig(e,t,a)})}}function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:te,payload:{visible:e,classInfo:t}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"添加班级",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:J,payload:e,title:t,isModify:a}}function p(){return{type:$}}function h(){return{type:Q}}function m(){return{type:Z}}function g(){return{type:X}}function v(){return{type:ee}}function S(e,t){return function(a){return a({type:le,payload:F.getUnbindClassRoomList(e,t)})}}function y(){return{type:ae}}function I(){return{type:ne}}function C(){return{type:re}}function b(e){return{type:ie,payload:e}}function E(e,t,a){return function(n){return n({type:oe,payload:F.bindClassRoom(e,t,a)})}}function w(e,t,a){return function(n){return n({type:se,payload:F.unbindClassRoom(e,t,a)})}}function A(){return{type:de}}function M(e,t,a){return function(n){return n({type:ue,payload:F.addAndModifyGradeConfig(e,t,a)})}}function L(){return{type:ce}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:fe,payload:e}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:pe,payload:e}}function D(e,t){return function(a){return a({type:G,payload:F.getGradeConfig(e,t)})}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:B,payload:e}}function x(){return{type:Y}}Object.defineProperty(t,"__esModule",{value:!0});var k=a(4),O=function(e){return e&&e.__esModule?e:{default:e}}(k);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case Y:return(0,O.default)({},e,{classTableData:[],loading:!0});case V:return(0,O.default)({},e,{gradeTypeString:n});case H:return(0,O.default)({},e,{loading:!1,classTableData:n});case he(W):case he(z):return(0,O.default)({},e,{classCreateForm:(0,O.default)({},e.classCreateForm,{confirmLoading:!0})});case U:return(0,O.default)({},e);case he(H):return(0,O.default)({},e,{loading:!0});case me(H):return(0,O.default)({},e,{loading:!1,classTableData:n});case ge(H):return(0,O.default)({},e,{loading:!1});case B:return(0,O.default)({},e,{searchClassId:n});case j:return(0,O.default)({},e,{classList:n});case K:return(0,O.default)({},e,{selectedRowKeys:n});case q:return(0,O.default)({},e);case te:return(0,O.default)({},e,{studentInfo:n});case J:return(0,O.default)({},e,{classCreateForm:(0,O.default)({},e.classCreateForm,{visible:!0,klass:n,title:t.title,isModify:t.isModify})});case $:return(0,O.default)({},e,{classCreateForm:(0,O.default)({},e.classCreateForm,{visible:!1,confirmLoading:!1,isModify:!1})});case Z:return(0,O.default)({},e,{classCreateForm:(0,O.default)({},e.classCreateForm,{confirmLoading:!0})});case Q:return(0,O.default)({},e,{classCreateForm:(0,O.default)({},e.classCreateForm,{visible:!1})});case X:return(0,O.default)({},e,{deleteDisabled:!1});case ee:return(0,O.default)({},e,{deleteDisabled:!0});case me(le):return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{unbindClassRoom:n})});case ie:return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{classRoomConfig:n})});case ae:return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{visible:!0})});case ne:return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{visible:!1,confirmLoading:!1})});case he(oe):return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{confirmLoading:!0})});case re:return(0,O.default)({},e,{classroomModel:(0,O.default)({},e.classroomModel,{visible:!1})});case de:return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{visible:!0})});case he(ue):return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{confirmLoading:!0})});case ce:return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{visible:!1,confirmLoading:!1})});case fe:return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{newGradeType:n})});case pe:return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{count:n})});case me(G):return(0,O.default)({},e,{gradeType:(0,O.default)({},e.gradeType,{gradeConfig:n})});case ge(G):return(0,O.default)({},e,{gradeTypeString:"",gradeType:(0,O.default)({},e.gradeType,{gradeConfig:{gradeType:"",gradeConf:[],gradeMonth:""}})});default:return e}},t.setGradeTypeString=n,t.fetchClassTableData=o,t.addClassToServer=r,t.modifyClassToServer=l,t.deleteClassToServer=i,t.setBatchClassList=s,t.saveSelectRowKeys=d,t.batchDeleteClassToServer=u,t.showStudentInfoModel=c,t.showCreateModal=f,t.hideCreateModal=p,t.handleCancel=h,t.handleCreate=m,t.enableDelete=g,t.disableDelete=v,t.fetchUnbindClassRoom=S,t.showClassroomModal=y,t.hideClassroomModal=I,t.handleClassroomCancel=C,t.setClassRoomConfig=b,t.handleClassroomCreate=E,t.handleUnbindClassroom=w,t.showGradeTypeModel=A,t.handleGradeTypeOk=M,t.handleGradeTypeCancel=L,t.handleGradeTypeValue=_,t.setGradeTypeCount=T,t.fetchGradeConfig=D,t.setSearchClassId=N,t.destoryTableData=x;var R=a(31),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(R),P={classTableData:[],classList:[],selectedRowKeys:[],gradeTypeString:"",loading:!0,searchClassId:"",deleteDisabled:!0,classCreateForm:{visible:!1,klass:{},title:"",isModify:!1,confirmLoading:!1},gradeType:{visible:!1,count:0,confirmLoading:!1,gradeConfig:{gradeType:"",gradeConf:[],gradeMonth:""},newGradeType:""},studentInfo:{visible:!1,classInfo:{}},classroomModel:{unbindClassRoom:[],visible:!1,classRoomName:"",classRoomConfig:{},confirmLoading:!1}},G="schoolManage/ClassTable/FETCH_GRADETYPE_CONFIG",H="schoolManage/ClassTable/FETCH_CLASSTABLE_DATA",V="schoolManage/ClassTable/SET_GRADE_TYPE_STRING",B="schoolManage/ClassTable/SET_SEARCH_CLASSID",W="schoolManage/ClassTable/ADD_CLASS",z="schoolManage/ClassTable/MODIFY_CLASS",U="schoolManage/ClassTable/DELETE_CLASS",j="schoolManage/ClassTable/BATCH_CLASS_LIST",K="schoolManage/ClassTable/SAVE_SELECT_ROWKEYS",q="schoolManage/ClassTable/BATCH_DELETD_CLASS",Y="schoolManage/ClassTable/DESTORY_TABLE_DATA",J="schoolManage/ClassTable/SHOW_CREATEMODAL",$="schoolManage/ClassTable/HIDE_CREATEMODAL",Z="schoolManage/ClassTable/HANDLE_CRAETE",Q="schoolManage/ClassTable/HANDLE_CANCEL",X="schoolManage/ClassTable/ENABLE_DELETE",ee="schoolManage/ClassTable/DISABLE_DELETE",te="schoolManage/ClassTable/SHOW_STUDENTINFO_MODEL",ae="schoolManage/ClassTable/SHOW_CLASSROOMMODAL",ne="schoolManage/ClassTable/HIDE_CLASSROOMMODAL",oe="schoolManage/ClassTable/HANDLE_CLASSROOMCRAETE",re="schoolManage/ClassTable/HANDLE_CLASSROOMCANCEL",le="schoolManage/ClassTable/FECTH_UNBIND_CLASSROOM",ie="schoolManage/ClassTable/SET_CLASSROOM_CONFIG",se="schoolManage/ClassTable/UNBIND_CLASSROOM",de="schoolManage/ClassTable/SHOW_GRADETYPEMODEL",ue="schoolManage/ClassTable/HANDLE_GRADETYPEOK",ce="schoolManage/ClassTable/HANDLE_GRADETYPECANCEL",fe="schoolManage/ClassTable/HANDLE_GRADETYPEVALUE",pe="schoolManage/ClassTable/SET_GRADETYPE_COUNT",he=function(e){return e+"_PENDING"},me=function(e){return e+"_FULFILLED"},ge=function(e){return e+"_REJECTED"}},132:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return t&&(e.data[t.mapID]=(0,z.default)({},e.data[t.mapID],t)),e}function r(e,t){var a={data:{},sort:[]};if(t&&t.length>0)for(var n=0;n<t.length;n++){var o=t[n].mapID;a.data[o]?a.data[o]=(0,z.default)({},a.data[o],t[n]):(a.data[o]=(0,z.default)({},t[n],{bindModuleList:[]}),a.sort.push(o))}else if(0===e.sort.length)return e;return a}function l(e,t){if(t&&t.length>0&&e.sort.length>0){for(var a in e.data)e.data[a].bindModuleList=[];for(var n=(0,z.default)({},e),o=0;o<t.length;o++)t[o].isBindMap&&n.data[t[o].mapID].bindModuleList.push(t[o].location);return n}return e}function i(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.IG_SN+e.IM_SN==t.payload.IGIM_SN})){if("unbind"==e[a].action)return e[a].action="update",e[a].isBindMap=!0,e[a].mapID=t.payload.mapID,e;var n=(0,z.default)({},e[a],{isSaved:!1},t.payload);n.action="bind",n.isBindMap=!0;var o=[].concat((0,B.default)(e));return o.splice(a,1,n),o}return e}function s(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.IG_SN+e.IM_SN==t.payload.IGIM_SN})){var n=[].concat((0,B.default)(e));if("bind"==e[a].action){var o=(0,z.default)({},e[a],{action:"",isBindMap:!1});return n.splice(a,1,o),n}var r=(0,z.default)({},e[a],{action:"unbind",isBindMap:!1});return n.splice(a,1,r),n}return e}function d(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.IG_SN+e.IM_SN==t.payload.IGIM_SN})){var n=(0,z.default)({},e[a],{isSaved:!1},t.payload);"bind"!=n.action&&(n.action="update");var o=[].concat((0,B.default)(e));return o.splice(a,1,n),o}return e}function u(e,t){if(t.payload&&e.every(function(e){return e.IC_SN+e.IG_SN+e.IM_SN!==t.payload.IC_SN+t.payload.IG_SN+t.payload.IM_SN})){var a={location:t.payload.location,IC_SN:t.payload.IC_SN,IG_SN:t.payload.IG_SN,IM_SN:t.payload.IM_SN};return e.concat(a)}return e}function c(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.IC_SN+e.IG_SN+e.IM_SN===t.payload.IC_SN+t.payload.IG_SN+t.payload.IM_SN})){var n=[].concat((0,B.default)(e));return n.splice(a,1),n}return e}function f(e,t){if(t.payload&&e.sort.length>0){var a=q.default.cloneDeep(e);return a.data[t.payload.mapID].mapURL=t.payload.mapURL,a.data[t.payload.mapID].mapWidth=t.payload.mapWidth,a.data[t.payload.mapID].mapHeight=t.payload.mapHeight,a}return e}function p(e){if(e.length>0){for(var t=[].concat((0,B.default)(e)),a=0;a<t.length;a++)t[a].action="";return t}return e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments[1];switch(t.type){case J:return(0,z.default)({},e,{moduleList:i(e.moduleList,t)});case $:return(0,z.default)({},e,{moduleList:s(e.moduleList,t)});case Z:return(0,z.default)({},e,{moduleList:d(e.moduleList,t)});case Q:return(0,z.default)({},e,{moduleList:u(e.moduleList,t)});case X:return(0,z.default)({},e,{moduleList:c(e.moduleList,t)});case ee:return(0,z.default)({},e,{mapList:f(e.mapList,t)});case ae:return(0,z.default)({},e,{moduleList:[]});case ne:return(0,z.default)({},e,{mapList:l(e.mapList,e.moduleList)});case oe:return(0,z.default)({},e,{moduleList:p(e.moduleList)});case Ie(re):return(0,z.default)({},e,{mapList:{data:{},sort:[]},mapLoading:!0});case Ce(re):return(0,z.default)({},e,{mapList:r(e.mapList,t.payload),mapLoading:!1});case be(re):return(0,z.default)({},e,{mapLoading:!1});case Ie(le):return(0,z.default)({},e,{loading:!0});case Ce(le):return(0,z.default)({},e,{moduleList:t.payload,loading:!1});case be(le):return(0,z.default)({},e,{loading:!1});case Ie(ie):return(0,z.default)({},e);case Ce(ie):return(0,z.default)({},e,{studentPositionList:t.payload});case se:return(0,z.default)({},e,{studentPositionList:[]});case te:return t.payload;case Ce(de):case Ce(ue):case Ce(ce):return(0,z.default)({},e);case Ce(fe):return(0,z.default)({},e,{mapList:o(e.mapList,t.payload)});case Ce(pe):case Ce(he):case Ce(me):case Ce(ge):case Ce(ve):case Ce(ye):return(0,z.default)({},e);default:return e}}function m(e){return{type:J,payload:e}}function g(e){return{type:$,payload:e}}function v(e){return{type:Z,payload:e}}function S(e){return{type:Q,payload:e}}function y(e){return{type:X,payload:e}}function I(e){return{type:ee,payload:e}}function C(e){return{type:te,payload:e}}function b(){return function(e){return e({type:ae})}}function E(){return{type:ne}}function w(){return{type:oe}}function A(e,t){return function(a){return a({type:re,payload:j.getMapList(e,t)})}}function M(e,t){return function(a){return a({type:le,payload:j.getModuleList(e,t)})}}function L(e){return function(t){return t({type:Se,payload:j.getModuleListByMapId(e)})}}function _(e,t,a){return function(n){return n({type:ie,payload:j.getStudentPosition(e,t,a)})}}function T(){return{type:se}}function D(e){return function(t){return t({type:de,payload:j.addMap(e)})}}function N(e){return function(t){return t({type:ue,payload:j.deleteMap(e)})}}function x(e,t,a){return function(n){return n({type:fe,payload:j.addMapUrl(e,t,a)})}}function k(e){return function(t){return t({type:ce,payload:j.modifyMap(e)})}}function O(e){return function(t){return t({type:pe,payload:j.addModule(e)})}}function R(e,t,a){return function(n){return n({type:he,payload:j.deleteModule(e,t,a)})}}function F(e){return function(t){return t({type:me,payload:j.modifyModule(e)})}}function P(e){return function(t){return t({type:ge,payload:j.bindModule(e)})}}function G(e){return function(t){return t({type:ve,payload:j.unBindModule(e)})}}function H(e){return function(t){return t({type:ye,payload:j.deleteMapImg(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var V=a(92),B=n(V),W=a(4),z=n(W);t.default=h,t.bindModuleToMap=m,t.unbindModule=g,t.updateModulePosition=v,t.addModule=S,t.removeModule=y,t.setImg=I,t.revertModulestate=C,t.local_clearModuleList=b,t.updateBindModuleList=E,t.resetModuleListAction=w,t.fetchMapListData=A,t.fetchModuleListData=M,t.fetchModuleListDataByMapId=L,t.fetchSudentPositionData=_,t.dleSudentPositionData=T,t.addMapToServer=D,t.deleteMapFromServer=N,t.addMapUrlToServer=x,t.modifyMapFromServer=k,t.addModuleToServer=O,t.deleteModuleFromServer=R,t.modifyModuleFromServer=F,t.submitBindModule=P,t.submitUnBindModule=G,t.deleteMapImgFromServer=H;var U=a(31),j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(U),K=a(247),q=n(K),Y={moduleList:[],mapList:{data:{},sort:[]},studentPositionList:[],loading:!1,mapLoading:!1},J="COMMON/MODULE/BIND",$="COMMON/MODULE/UNBIND",Z="COMMON/MODULE/UPDATE",Q="COMMON/MODULE/ADDMODULE",X="COMMON/MODULE/REMOVEMODULE",ee="COMMON/MODULE/SETIMGURL",te="COMMON/MODULE/REVERT",ae="COMMON/MODULE/LOCAL_CLEARMODULELIST",ne="COMMON/MODULE/UPDATEBINDMODULELIST",oe="COMMON/MODULE/RESETMODULELIST",re="COMMON/MODULE/FETCH_MAPLIST_DATA",le="COMMON/MODULE/FETCH_MODULELIST_DATA",ie="COMMON/MODULE/FETCH_STUDENTPOSITION_DATA",se="COMMON/MODULE/DEL_STUDENTPOSITION_DATA",de="COMMON/MODULE/FETCH_ADD_MAP",ue="COMMON/MODULE/FETCH_DELETE_MAP",ce="COMMON/MODULE/FETCH_MODIFY_MAP",fe="COMMON/MODULE/FETCH_ADD_MAPURL",pe="COMMON/MODULE/FETCH_ADD_MODULE",he="COMMON/MODULE/FETCH_DELETE_MODULE",me="COMMON/MODULE/FETCH_MODIFY_MODULE",ge="COMMON/MODULE/FETCH_BIND_MODULE",ve="COMMON/MODULE/FETCH_UNBIND_MODULE",Se="COMMON/MODULE/FETCH_MODULELISTBYMAPID",ye="COMMON/MODULE/FETCH_DELETE_MAPIMG",Ie=function(e){return e+"_PENDING"},Ce=function(e){return e+"_FULFILLED"},be=function(e){return e+"_REJECTED"}},150:function(e,t,a){"use strict";function n(e,t){if(!e.data[t.schoolId]){var a=(0,x.default)({},e);return a.data[t.schoolId]=(0,x.default)({},t,{bindIGList:{data:{},sort:[]}}),a.sort.push(t.schoolId),a}return e}function o(e,t){if(e.data[t]){var a=(0,x.default)({},e);return delete a.data[t],a.sort.splice(a.sort.indexOf(t),1),a}return e}function r(e,t,a){if(t.data[a]){for(var n=(0,x.default)({},e),o=t.data[a].bindIGList.sort,r=t.data[a].bindIGList.data,l=0;l<o.length;l++){var i=r[o[l]],s=n.data[i.IC_SN];s&&s.IGList.data[i.IG_SN]&&(s.IGList.data[i.IG_SN].bindSchool="")}return n}return e}function l(e,t){var a={data:{},sort:[]};if(t&&t.length>0)for(var n=0;n<t.length;n++){var o=t[n].schoolId;a.data[o]?a.data[o]=(0,x.default)({},a.data[o],t[n]):(a.data[o]=(0,x.default)({},t[n],{bindIGList:{data:{},sort:[]}}),a.sort.push(o))}else if(0===e.sort.length)return e;return a}function i(e,t){if(t){var a=t.schoolId,n=(0,x.default)({},e);return a&&n.data[a]?(n.data[a]=(0,x.default)({},n.data[a],t),n):e}return e}function s(e,t){var a={data:{},sort:[]};if(t&&t.length>0){for(var n=0;n<t.length;n++){var o=t[n].IC_SN;a.data[o]||(a.data[o]=(0,x.default)({},t[n],{IGList:{data:{},sort:[]}}),a.sort.push(o))}return a}return 0===e.sort.length?e:a}function d(e,t){for(var a in e.data)if(e.data.hasOwnProperty(a)&&e.data[a].bindIGList.sort.indexOf(t)>=0)return e.data[a].schoolId;return""}function u(e,t,a){if(a&&a.length>0){for(var n=(0,x.default)({},e),o=0;o<a.length;o++){var r=a[o];if(n.data[r.IC_SN]){var l=n.data[r.IC_SN];r.IG_SN&&!l.IGList.data[r.IG_SN]&&(l.IGList.data[r.IG_SN]=(0,x.default)({},r,{bindSchool:d(t,r.IG_SN)}),l.IGList.sort.push(r.IG_SN))}}return n}return e}function c(e,t,a){if(t&&t.length>0){for(var n=(0,x.default)({},e),o=0;o<t.length;o++){var r=t[o];if(n.data[r.schoolId]){var l=n.data[r.schoolId];a?l.bindIGList.data[r.IG_SN]?l.bindIGList.data[r.IG_SN]=(0,x.default)({},r):(l.bindIGList.data[r.IG_SN]=(0,x.default)({},r),l.bindIGList.sort.push(r.IG_SN)):l.bindIGList.data[r.IG_SN]&&(delete l.bindIGList.data[r.IG_SN],l.bindIGList.sort.splice(l.bindIGList.sort.indexOf(r.IG_SN),1))}}return n}return e}function f(e,t,a){if(t&&t.length>0){for(var n=(0,x.default)({},e),o=0;o<t.length;o++){var r=t[o],l=n.data[r.IC_SN];l&&l.IGList.data[r.IG_SN]&&(l.IGList.data[r.IG_SN].bindSchool=a?r.schoolId:"")}return n}return e}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments[1];switch(t.type){case P:return(0,x.default)({},e,{schoolList:n(e.schoolList,t.payload)});case F:return(0,x.default)({},e,{schoolList:o(e.schoolList,t.payload)});case G:return(0,x.default)({},e,{currentSchoolId:t.payload});case H:return(0,x.default)({},e,{scenarioId:t.payload});case V:return(0,x.default)({},e,{ICList:r(e.ICList,e.schoolList,t.payload)});case X(B):return(0,x.default)({},e,{getSchoolLoading:!0});case ee(B):return(0,x.default)({},e,{schoolList:l(e.schoolList,t.payload),getSchoolLoading:!1});case te(B):return(0,x.default)({},e,{getSchoolLoading:!1});case X(U):return(0,x.default)({},e,{addSchoolLoading:!0});case ee(U):case te(U):return(0,x.default)({},e,{addSchoolLoading:!1});case X(K):return(0,x.default)({},e,{modifySchoolLoading:!0});case ee(K):return(0,x.default)({},e,{schoolList:i(e.schoolList,t.payload),modifySchoolLoading:!1});case te(K):return(0,x.default)({},e,{modifySchoolLoading:!1});case X(j):return(0,x.default)({},e,{delSchoolLoading:!0});case ee(j):case te(j):return(0,x.default)({},e,{delSchoolLoading:!1});case ee(W):return(0,x.default)({},e,{ICList:s(e.ICList,t.payload)});case ee(z):return(0,x.default)({},e,{ICList:u(e.ICList,e.schoolList,t.payload),loading:!1});case ee(q):return(0,x.default)({},e,{schoolList:c(e.schoolList,t.payload,!0),ICList:f(e.ICList,t.payload,!0),loading:!1});default:return e}}function h(e){return{type:P,payload:e}}function m(e){return{type:F,payload:e}}function g(e){return{type:G,payload:e}}function v(e){return{type:H,payload:e}}function S(e){return{type:V,payload:e}}function y(e){return function(t){return t({type:B,payload:O.getSchoolList(e)})}}function I(e){return function(t){return t({type:W,payload:O.getICList(e)})}}function C(e){return function(t){return t({type:z,payload:O.getIGList(e)})}}function b(e){return function(t){return t({type:U,payload:O.addSchoolConfig(e)})}}function E(e){return function(t){return t({type:j,payload:O.delSchoolConfig(e)})}}function w(e){return function(t){return t({type:K,payload:O.modifySchoolConfig(e)})}}function A(e){return function(t){return t({type:q,payload:O.getIotNetworkDeviceList(e)})}}function M(e){return function(t){return t({type:Y,payload:O.getIotNetworkDeviceList(e)})}}function L(e,t,a){return function(n){return n({type:J,payload:O.addIotNetworkDeviceList(e,t,a)})}}function _(e,t,a){return function(n){return n({type:$,payload:O.deleteIotNetworkDeviceList(e,t,a)})}}function T(e){return function(t){return t({type:Z,payload:O.deleteBindCGMList(e)})}}function D(e){return function(t){return t({type:Q,payload:O.deleteDeviceBySchoolId(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var N=a(4),x=function(e){return e&&e.__esModule?e:{default:e}}(N);t.default=p,t.local_addSchool=h,t.local_delSchool=m,t.local_setCurrentSchoolId=g,t.local_setScenarioId=v,t.local_unBindIGsFromSchool=S,t.getSchoolList=y,t.getICList=I,t.getIGList=C,t.addSchoolConfig=b,t.delSchoolConfig=E,t.modifySchoolConfig=w,t.getIotNetworkDeviceListByScenario=A,t.getIotNetworkDeviceListBySchool=M,t.addIotNetworkDeviceList=L,t.deleteIotNetworkDeviceList=_,t.deleteBindCGMList=T,t.deleteDeviceBySchoolId=D;var k=a(31),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(k),R={scenarioId:"",currentSchoolId:"",schoolList:{data:{},sort:[]},ICList:{data:{},sort:[]},addSchoolLoading:!1,delSchoolLoading:!1,modifySchoolLoading:!1,getSchoolLoading:!1},F="allSchools/LOCAL_DELSCHOOL",P="allSchools/LOCAL_ADDSCHOOL",G="allSchools/LOCAL_SETCURRENTSCHOOLID",H="allSchools/LOCAL_SETSCENARIOID",V="allSchools/LOCAL_UNBINDIGSFROMSCHOOL",B="allSchools/FETCH_SCHOOLLIST",W="allSchools/FETCH_ICLIST",z="allSchools/FETCH_IGLIST",U="allSchools/FETCH_ADDSCHOOL",j="allSchools/FETCH_DELSCHOOL",K="allSchools/FETCH_MODIFYSCHOOL",q="allSchools/FETCH_BINDIGLIST",Y="allSchools/FETCH_BINDIGLISTBYSCHOOL",J="allSchools/FETCH_ADDBINDIGLIST",$="allSchools/FETCH_DELBINDIGLIST",Z='allSchools/FETCH_DELBINDCGM"',Q="allSchools/FETCH_DELBINDDEVICE",X=function(e){return e+"_PENDING"},ee=function(e){return e+"_FULFILLED"},te=function(e){return e+"_REJECTED"}},1603:function(e,t,a){var n=a(1147);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1604:function(e,t,a){var n=a(1148);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1605:function(e,t,a){var n=a(1149);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1606:function(e,t,a){var n=a(1150);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1607:function(e,t,a){var n=a(1151);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1608:function(e,t,a){var n=a(1152);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1609:function(e,t,a){var n=a(1153);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1610:function(e,t,a){var n=a(1154);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1611:function(e,t,a){var n=a(1155);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1612:function(e,t,a){var n=a(1156);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1613:function(e,t,a){var n=a(1157);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1614:function(e,t,a){var n=a(1158);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1615:function(e,t,a){var n=a(1160);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1616:function(e,t,a){var n=a(1162);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1617:function(e,t,a){var n=a(1163);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1618:function(e,t,a){var n=a(1164);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1619:function(e,t,a){var n=a(1165);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1620:function(e,t,a){var n=a(1166);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},1630:function(e,t,a){a(248),e.exports=a(684)},176:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(t.payload&&e.every(function(e){return e.cameraIp+e.cameraPort!==t.payload.cameraIp+t.payload.cameraPort})){var a={cameraName:t.payload.cameraName,cameraIp:t.payload.cameraIp,cameraPort:t.payload.cameraPort,userName:t.payload.userName,password:t.payload.password};return e.concat(a)}return e}function r(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.cameraIp+e.cameraPort===t.payload.cameraIp+t.payload.cameraPort})){var n=[].concat((0,S.default)(e));return n.splice(a,1),n}return e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments[1];switch(t.type){case b:return(0,g.default)({},e,{cameraList:o(e.cameraList,t)});case E:return(0,g.default)({},e,{cameraList:r(e.cameraList,t)});case w:return(0,g.default)({},e,{cameraList:[]});case D(A):return(0,g.default)({},e,{loading:!0});case N(A):return(0,g.default)({},e,{cameraList:t.payload,loading:!1});case x(A):return(0,g.default)({},e,{loading:!1});case D(M):return(0,g.default)({},e);case N(M):return(0,g.default)({},e,{unbindCameraList:t.payload});case N(L):case N(_):case N(T):return(0,g.default)({},e);default:return e}}function i(e){return{type:b,payload:e}}function s(e){return{type:E,payload:e}}function d(){return function(e){return e({type:w})}}function u(e){return function(t){return t({type:L,payload:I.addCamera(e)})}}function c(e,t,a){return function(n){return n({type:_,payload:I.deleteCamera(e,t,a)})}}function f(e){return function(t){return t({type:T,payload:I.modifyCamera(e)})}}function p(e,t){return function(a){return a({type:A,payload:I.getCameraList(e,t)})}}function h(e,t){return function(a){return a({type:M,payload:I.getUnBindCameraList(e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var m=a(4),g=n(m),v=a(92),S=n(v);t.default=l,t.addCamera=i,t.removeCamera=s,t.local_clearCameraList=d,t.addCameraToServer=u,t.deleteCameraFromServer=c,t.modifyCameraFromServer=f,t.fetchCameraListData=p,t.fetchUnbindCameraList=h;var y=a(31),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),C={cameraList:[],unbindCameraList:[],loading:!1},b="COMMON/CAMERA/ADDCAMERA",E="COMMON/CAMERA/REMOVECAMERA",w="COMMON/MODULE/LOCAL_CLEARCAMERALIST",A="COMMON/MODULE/FETCH_CAMERALIST_DATA",M="COMMON/MODULE/FETCH_UNBIND_CAMERALIST",L="COMMON/MODULE/FETCH_ADD_CAMERA",_="COMMON/MODULE/FETCH_DELETE_CAMERA",T="COMMON/MODULE/FETCH_MODIFY_CAMERA",D=function(e){return e+"_PENDING"},N=function(e){return e+"_FULFILLED"},x=function(e){return e+"_REJECTED"}},197:function(e,t){e.exports=echarts},259:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return(0,d.default)({},e,{danAlertPagination:t.payload});case g:return(0,d.default)({},e,{warnAlertPagination:t.payload});case v(p):return(0,d.default)({},e);case S(p):return 0===t.payload.errCode?(0,d.default)({},e,{importCount:t.payload.importCount,seriousCount:t.payload.seriousCount}):(0,d.default)({},e,{importCount:0,seriousCount:0});case y(p):return(0,d.default)({},e,{importCount:0,seriousCount:0});case v(h):return(0,d.default)({},e);case S(h):var a=[],n=[];return 0!==t.payload.errCode?(0,d.default)({},e,{dangerAlertTable:[],dangerAlertCount:0,warningAlertTable:[],warningAlertCount:0}):(t.payload.alertTable.map(function(e,t){var o=new Date(e.alarmTime),r=o.toLocaleString();1===e.alarmLevel&&n.push({schoolId:e.schoolId,areaName:e.areaName,alarmReTime:e.alarmTime,alarmTime:r,alarmNum:e.alarmNum}),2===e.alarmLevel&&a.push({schoolId:e.schoolId,areaName:e.areaName,alarmReTime:e.alarmTime,alarmTime:r,alarmNum:e.alarmNum})}),1===t.payload.alarmLevel?(0,d.default)({},e,{warningAlertTable:n,warningAlertCount:t.payload.count}):2===t.payload.alarmLevel?(0,d.default)({},e,{dangerAlertTable:a,dangerAlertCount:t.payload.count}):(0,d.default)({},e));case y(h):return(0,d.default)({},e,{dangerAlertTable:[],dangerAlertCount:0,warningAlertTable:[],warningAlertCount:0});default:return e}}function o(e,t){return function(a){return a({type:p,payload:c.getCrowdAlarmNum(e,t)})}}function r(e,t,a,n,o){return function(r){return r({type:h,payload:c.getCrowdDetailsByLevel(e,t,a,n,o)})}}function l(e){return{type:m,payload:e}}function i(e){return{type:g,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n,t.fetchAlertCountData=o,t.fetchAlertTableData=r,t.saveDanAlertPagination=l,t.saveWarnAlertPagination=i;var u=a(31),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),f={importCount:0,seriousCount:0,dangerAlertTable:[],dangerAlertCount:0,danAlertPagination:{current:1,pageSize:10},warningAlertTable:[],warningAlertCount:0,warnAlertPagination:{current:1,pageSize:10}},p="dashboard/AlertCount/FETCH",h="dashboard/AlertTable/FETCH",m="dashboard/AlertTable/SAVE_DANGER_PAGINATION",g="dashboard/AlertTable/SAVE_WARN_PAGINATION",v=function(e){return e+"_PENDING"},S=function(e){return e+"_FULFILLED"},y=function(e){return e+"_REJECTED"}},260:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(204),a(203)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=(a(85),a(74)),C=n(I),b=a(0),E=n(b),w=C.default.Group,A=function(e){function t(){var e,a,n,o;(0,p.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),n.state={mode:"门内",visible:!1,moduleData:[],targetKeys:[],bindLoading:!1},n.getAreaModuleData=function(){for(var e=[],t=[],a=n.props.areaModuleList,o=n.props.unbindModuleList,r=o.concat(a),l=0;l<r.length;l++){var i=r[l],s={key:i.IC_SN+"-"+i.IG_SN+"-"+i.IM_SN,title:i.IG_SN+" - "+i.IM_SN};t.push(s)}for(var d=0;d<a.length;d++){var u=a[d];e.push(u.IC_SN+"-"+u.IG_SN+"-"+u.IM_SN)}n.setState({moduleData:t,targetKeys:e})},n.getInDoorModuleData=function(){for(var e=[],t=[],a=[],o=n.props.unbindDoorModuleList,r=0;r<n.props.doorModuleList.length;r++){var l=n.props.doorModuleList[r];"门内"===l.placeType&&(a.push(l),e.push(l.IC_SN+"-"+l.IG_SN+"-"+l.IM_SN))}for(var i=o.concat(a),s=0;s<i.length;s++){var d=i[s],u={key:d.IC_SN+"-"+d.IG_SN+"-"+d.IM_SN,title:d.IG_SN+" - "+d.IM_SN};t.push(u)}n.setState({moduleData:t,targetKeys:e})},n.getOutDoorModuleData=function(){for(var e=[],t=[],a=[],o=n.props.unbindDoorModuleList,r=0;r<n.props.doorModuleList.length;r++){var l=n.props.doorModuleList[r];"门外"===l.placeType&&(a.push(l),e.push(l.IC_SN+"-"+l.IG_SN+"-"+l.IM_SN))}for(var i=o.concat(a),s=0;s<i.length;s++){var d=i[s],u={key:d.IC_SN+"-"+d.IG_SN+"-"+d.IM_SN,title:d.IG_SN+" - "+d.IM_SN};t.push(u)}n.setState({moduleData:t,targetKeys:e})},n.getClassRoomCGMData=function(){for(var e=[],t=[],a=n.props.classRoomCGMList,o=n.props.unbindClassRoomCGMList,r=o.concat(a),l=0;l<r.length;l++){var i=r[l],s={key:i.IC_SN+"-"+i.IG_SN+"-"+i.IM_SN,title:i.IG_SN+" - "+i.IM_SN};t.push(s)}for(var d=0;d<a.length;d++){var u=a[d];e.push(u.IC_SN+"-"+u.IG_SN+"-"+u.IM_SN)}n.setState({moduleData:t,targetKeys:e})},n.handleChange=function(e,t,a){if("right"===t){for(var o=[],r=0;r<a.length;r++){var l=a[r].split("-");o.push({placeType:n.state.mode,ICSn:l[0],IGSn:l[1],IMSn:l[2]})}n.setState({bindLoading:!0}),"crowde"===n.props.areaType?n.props.addCGMToArea(n.props.scenarioId,n.props.schoolId,n.props.areaName,o).then(function(e){n.setState({bindLoading:!1}),d.default.success("绑定定位模块成功!"),n.props.getAllAreaModuleList(n.props.scenarioId,n.props.schoolId)}).catch(function(e){n.getAreaModuleData(),n.setState({bindLoading:!1}),d.default.error("绑定定位模块失败: "+e.message)}):"door"===n.props.areaType?n.props.addReadersToDoor(n.props.scenarioId,n.props.schoolId,n.props.doorName,n.props.doorType,n.props.timeInterval,o).then(function(e){n.setState({bindLoading:!1}),d.default.success("绑定定位模块成功!"),n.props.getDoorModuleList(n.props.scenarioId,n.props.schoolId,n.props.doorName),n.props.getAllDoorModuleList(n.props.scenarioId,n.props.schoolId)}).catch(function(e){"门内"===n.state.mode?n.getInDoorModuleData():n.getOutDoorModuleData(),n.setState({bindLoading:!1}),d.default.error("绑定定位模块失败: "+e.message)}):"classRoom"===n.props.areaType&&n.props.bindCGMToClassRoom(n.props.scenarioId,n.props.schoolId,n.props.classRoomName,o).then(function(e){n.setState({bindLoading:!1}),d.default.success("绑定定位模块成功!"),n.props.getAllClassRoomCGM(n.props.scenarioId,n.props.schoolId)}).catch(function(e){n.getClassRoomCGMData(),n.setState({bindLoading:!1}),d.default.error("绑定定位模块失败: "+e.message)})}else if("left"===t){for(var i=[],s=0;s<a.length;s++){var u=a[s].split("-");i.push({ICSn:u[0],IGSn:u[1],IMSn:u[2]})}n.setState({bindLoading:!0}),"crowde"===n.props.areaType?n.props.delCGMFromArea(n.props.scenarioId,n.props.schoolId,n.props.areaName,i).then(function(e){n.setState({bindLoading:!1}),d.default.success("解绑定位模块成功!"),n.props.getAllAreaModuleList(n.props.scenarioId,n.props.schoolId)}).catch(function(t){e=e.concat(a),n.setState({targetKeys:e,bindLoading:!1}),d.default.error("解绑定位模块失败: "+t.message)}):"door"===n.props.areaType?n.props.delReadersFromDoor(n.props.scenarioId,n.props.schoolId,n.props.doorName,i).then(function(e){n.setState({bindLoading:!1}),d.default.success("解绑定位模块成功!"),n.props.getDoorModuleList(n.props.scenarioId,n.props.schoolId,n.props.doorName),n.props.getAllDoorModuleList(n.props.scenarioId,n.props.schoolId)}).catch(function(t){e=e.concat(a),n.setState({targetKeys:e,bindLoading:!1}),d.default.error("解绑定位模块失败: "+t.message)}):"classRoom"===n.props.areaType&&n.props.unbindCGMFromClassRoom(n.props.scenarioId,n.props.schoolId,n.props.classRoomName,i).then(function(e){n.setState({bindLoading:!1}),d.default.success("解绑定位模块成功!"),n.props.getAllClassRoomCGM(n.props.scenarioId,n.props.schoolId)}).catch(function(t){e=e.concat(a),n.setState({targetKeys:e,bindLoading:!1}),d.default.error("解绑定位模块失败: "+t.message)})}n.setState({targetKeys:e})},n.onModeChange=function(e){n.setState({mode:e.target.value}),"门内"===e.target.value?n.getInDoorModuleData():n.getOutDoorModuleData()},o=a,(0,v.default)(n,o)}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;"crowde"===this.props.areaType?this.props.getAreaModuleList(this.props.scenarioId,this.props.schoolId,this.props.areaName).then(function(t){e.getAreaModuleData()}).catch(function(e){}):"door"===this.props.areaType?this.props.getDoorModuleList(this.props.scenarioId,this.props.schoolId,this.props.doorName).then(function(t){"门内"===e.state.mode?e.getInDoorModuleData():e.getOutDoorModuleData()}).catch(function(e){}):"classRoom"===this.props.areaType&&this.props.getCGMListByClassRoomName(this.props.scenarioId,this.props.schoolId,this.props.classRoomName).then(function(t){e.getClassRoomCGMData()}).catch(function(e){})}},{key:"render",value:function(){var e=E.default.createElement(w,{onChange:this.onModeChange,value:this.state.mode},E.default.createElement(C.default,{value:"门内"},"门内"),E.default.createElement(C.default,{value:"门外"},"门外"));return E.default.createElement("div",null,E.default.createElement(r.default,{spinning:this.state.bindLoading},"door"===this.props.areaType?e:null,E.default.createElement(i.default,{dataSource:this.state.moduleData,showSearch:!0,searchPlaceholder:"搜索",listStyle:{width:260,height:350},titles:["网关SN-模块SN(未绑定)","网关SN-模块SN(已绑定)"],operations:["绑定","解绑"],targetKeys:this.state.targetKeys,onChange:this.handleChange,render:function(e){return e.title}})))}}]),t}(b.Component);t.default=A},261:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case p:return(0,d.default)({},e,{gatewayList:[]});case v(h):return(0,d.default)({},e,{loading:!0});case S(h):return(0,d.default)({},e,{gatewayList:t.payload,loading:!1});case y(h):return(0,d.default)({},e,{loading:!1});default:return e}}function o(){return function(e){return e({type:p})}}function r(e){return function(t){return t({type:h,payload:c.getIotGatewayList(e)})}}function l(e){return function(t){return t({type:m,payload:c.addIotGatewayList(e)})}}function i(e){return function(t){return t({type:g,payload:c.deleteIotGatewayList(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n,t.local_clearGatewayList=o,t.getIotGatewayList=r,t.addIotGatewayList=l,t.deleteIotGatewayList=i;var u=a(31),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),f={loading:!1,gatewayList:[]},p="SETTINGS/SMARTGATEWAY/LOCAL_CLEARGATEWAYLIST",h="SETTINGS/SMARTGATEWAY/FETCH_GETGATEWAYLIST",m="SETTINGS/SMARTGATEWAY/FETCH_ADDGATEWAYLIST",g="SETTINGS/SMARTGATEWAY/FETCH_DELGATEWAYLIST",v=function(e){return e+"_PENDING"},S=function(e){return e+"_FULFILLED"},y=function(e){return e+"_REJECTED"}},262:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(t.payload&&e.every(function(e){return e.sensorMAC!==t.payload.sensorMAC})){var a={sensorDescription:t.payload.sensorDescription,sensorMAC:t.payload.sensorMAC,temperature:t.payload.temperature,humidity:t.payload.humidity,oxygen:t.payload.oxygen};return e.concat(a)}return e}function r(e,t){var a=-1;if(t.payload&&e.some(function(e,n){return a=n,e.sensorMAC===t.payload})){var n=[].concat((0,f.default)(e));return n.splice(a,1),n}return e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case h:return(0,u.default)({},e,{sensorList:o(e.sensorList,t)});case m:return(0,u.default)({},e,{sensorList:r(e.sensorList,t)});default:return e}}function i(e){return{type:h,payload:e}}function s(e){return{type:m,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(4),u=n(d),c=a(92),f=n(c);t.default=l,t.addSensor=i,t.removeSensor=s;var p={sensorList:[]},h="COMMON/SENSOR/ADDSENSOR",m="COMMON/SENSOR/REMOVESENSOR"},31:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=[];for(var a in e)"grade"===a?e[a].map(function(e){t.push(encodeURIComponent(a)+"[]="+encodeURIComponent(e))}):t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.push(("v="+Math.random()).replace(".","")),t.join("&")}function r(e){if(e.redirected){var t=new Error("redirected");throw t.response=e,t.url=e.url,t}return e.status>=200&&e.status<300?Lt.default.resolve(e):Lt.default.reject(new Error(e.statusText))}function l(e){return e.json()}function i(){var e=new Headers;return e.append("accept","application/json"),e.append("content-type","application/json"),e}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};localStorage.getItem("scenarioId")||(window.location.href="/oasis/stable/web/frame/index.html");var n=i(),o=(0,At.default)({},{method:"POST",redirect:"follow",credentials:"same-origin",headers:n,body:(0,Et.default)(t)},a);return xt(e,o).then(r).then(l)}function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};localStorage.getItem("scenarioId")||(window.location.href="/oasis/stable/web/frame/index.html");var n=null;t&&(n=o(t));var s=n?e+"?"+n:e,d=i(),u=(0,At.default)({},{method:"GET",credentials:"same-origin",headers:d},a);return xt(s,u).then(r).then(l)}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};localStorage.getItem("scenarioId")||(window.location.href="/oasis/stable/web/frame/index.html");var n=null;t&&(n=o(t));var s=n?e+"?"+n:e,d=i(),u=(0,At.default)({},{method:"DELETE",credentials:"same-origin",headers:d},a);return xt(s,u).then(r).then(l)}function c(e){return s("/v3/scenarioserver",{Method:"getdevListByScenarioId",param:{scenarioId:e}}).then(function(e){if(0==e.retCode){for(var t=[],a=e.message,n=0;n<a.length;n++){var o=a[n];t.push({IC_SN:o.devSN,ICName:o.devName})}return t}throw new Error(e.message.msg)})}function f(e){return d("/apmonitor/getbriefaplist",{devSN:e}).then(function(t){for(var a=[],n=t.apList,o=0;o<n.length;o++){var r=n[o];a.push({IC_SN:e,IGName:r.apName,IG_SN:r.apSN})}return a})}function p(e){return d(Dt+"/getSchoolConfig",{scenarioId:e}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({scenarioId:n.scenarioId,schoolId:n.schoolId,schoolName:n.schoolName,schoolMap:[(0,Ct.default)(n.location_y)||0,(0,Ct.default)(n.location_x)||0]})}return t}throw new Error(e.result)})}function h(e){return s(Nt+"/addSchoolConfig",e).then(function(e){if(0==e.errCode)return{schoolId:e.result.schoolId,schoolName:e.result.schoolName,schoolMap:[(0,Ct.default)(e.result.location_y)||0,(0,Ct.default)(e.result.location_x)||0]};throw new Error(e.result)})}function m(e){return s(Nt+"/delSchoolConfig",e).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function g(e){return s(Nt+"/modifySchoolConfig",e).then(function(e){if(0==e.errCode)return{schoolId:e.result.schoolId,schoolName:e.result.schoolName,schoolMap:[(0,Ct.default)(e.result.location_y)||0,(0,Ct.default)(e.result.location_x)||0]};throw new Error(e.result)})}function v(e){return d(Dt+"/getNetworkDeviceList",e).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({scenarioId:n.scenarioId,schoolId:n.schoolId,IC_SN:n.ICSn,IG_SN:n.IGSn,IGName:n.IGName})}return t}throw new Error(e.result)})}function S(e,t,a){return s(Nt+"/addNetworkDeviceList",{scenarioId:e,schoolId:t,IGList:a}).then(function(n){if(0==n.errCode)return a.map(function(a,n){return(0,yt.default)({},a,{IC_SN:a.ICSn,IG_SN:a.IGSn,IGName:a.IGName,scenarioId:e,schoolId:t})});throw new Error(n.result)})}function y(e,t,a){return s(Nt+"/deleteNetworkDeviceList",{scenarioId:e,schoolId:t,IGList:a}).then(function(n){if(0==n.errCode)return a.map(function(a,n){return(0,yt.default)({},a,{IC_SN:a.ICSn,IG_SN:a.IGSn,IGName:a.IGName,scenarioId:e,schoolId:t})});throw new Error(n.result)})}function I(e){return s("/v3/wristbandread",{Method:"getIotGatewayList",Param:e}).then(function(e){if(0==e.retCode)return e.result.data;throw new Error(e.result)})}function C(e){return s("/v3/wristbandread",{Method:"addIotGatewayList",Param:e}).then(function(e){if(0==e.retCode)return e.result;throw new Error(e.result)})}function b(e){return s("/v3/wristbandread",{Method:"deleteIotGatewayList",Param:e}).then(function(e){if(0==e.retCode)return e.result;throw new Error(e.result)})}function E(e){return s("/v3/wristbandread",{Method:"deleteDeviceBySchoolId",Param:e}).then(function(e){if(0==e.retCode)return e.result;throw new Error(e.result)})}function w(e){return s(Nt+"/delBindCGMList",e).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function A(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId};return d(Dt+"/getAreaConfig",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function M(e,t){return d(Dt+"/getLayerMapList",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({mapID:n.mapId,mapName:n.mapName,mapDescribe:n.mapDescribe||"",mapWidth:n.map_x,mapHeight:n.map_y,mapURL:n.mapUrl,scale:n.scale||0})}return t}throw new Error(e.result)})}function L(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,mapName:e.mapName,mapDescribe:e.mapDescribe,map_x:e.mapWidth,map_y:e.mapHeight,mapUrl:e.mapURL,scale:e.scale};return s(Nt+"/addLayerMap",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function _(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,mapId:e.mapID};return s(Nt+"/deleteLayerMap",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function T(e){return u("/v3/ace/oasis/oasis-rest-map/restapp/uploadfile/imagedelete/?path="+e).then(function(e){if(0==e.code)return e.message;throw new Error(e.message)})}function D(e,t,a){var n={scenarioId:e,schoolId:t,mapId:a.mapID,map_x:a.mapWidth,map_y:a.mapHeight,mapUrl:a.mapURL,scale:a.scale};return s(Nt+"/modifyLayerMap",n).then(function(e){if(0==e.errCode)return(0,yt.default)({},a,{mapDescribe:e.result.mapDescribe,mapName:e.result.mapName});throw new Error(e.result)})}function N(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,mapId:e.mapID,mapName:e.mapName,mapDescribe:e.mapDescribe,map_x:e.mapWidth,map_y:e.mapHeight,mapUrl:e.mapURL,scale:e.scale};return s(Nt+"/modifyLayerMap",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function x(e,t){return d(Dt+"/getLocalizerList",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({location:n.locationName,IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn,mapID:n.bindMapId,bind_x:n.bind_x,bind_y:n.bind_y,radius:n.radius,isBindMap:n.isBindMap,isSaved:"true",action:""})}return t}throw new Error(e.result)})}function k(e){return d(Dt+"/getLocalizerList",e).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function O(e,t,a){return d(Dt+"/getPositionByMapId",{scenarioId:e,schoolId:t,mapId:a}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function R(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,locationName:e.location,ICSn:e.IC_SN,IGSn:e.IG_SN,IMSn:e.IM_SN,radius:e.radius};return s(Nt+"/addLocalizer",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function F(e,t,a){return s(Nt+"/deleteLocalizerList",{scenarioId:e,schoolId:t,localizerList:a}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function P(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,locationName:e.location,ICSn:e.IC_SN,IGSn:e.IG_SN,IMSn:e.IM_SN,radius:e.radius};return s(Nt+"/modifyLocalizer",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function G(e){var t=[];e.bindModule.map(function(a,n){t.push({locationName:e.bindModule[n].location,bind_x:e.bindModule[n].bind_x,bind_y:e.bindModule[n].bind_y})});var a={scenarioId:e.scenarioId,schoolId:e.schoolId,bindMapId:e.mapID,bindList:t};return s(Nt+"/bindLocalizer",a).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function H(e){var t=[];e.unBindModule.map(function(a,n){t.push({locationName:e.unBindModule[n].location})});var a={scenarioId:e.scenarioId,schoolId:e.schoolId,bindMapId:e.mapID,bindList:t};return s(Nt+"/unbindLocalizer",a).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function V(e,t,a,n){var o=(0,yt.default)({scenarioId:e,schoolId:t},a,{method:n});return d(Dt+"/getHistAverStep",o).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function B(e,t){return d(Dt+"/getCameraConfig",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({cameraName:n.cameraName,buildingName:n.buildingName,placeType:n.placeType,cameraIp:n.cameraIp,cameraPort:n.cameraPort,userName:n.userName,password:n.password})}return t}throw new Error(e.result)})}function W(e,t,a){return d(Dt+"/getCameraConfig",{scenarioId:e,schoolId:t,buildingName:a,placeType:"拥挤区域"}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({cameraName:n.cameraName,buildingName:n.buildingName,placeType:n.placeType,cameraIp:n.cameraIp,cameraPort:n.cameraPort,userName:n.userName,password:n.password})}return t}throw new Error(e.result)})}function z(e,t,a){return d(Dt+"/getCameraConfig",{scenarioId:e,schoolId:t,buildingName:a}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({cameraName:n.cameraName,buildingName:n.buildingName,placeType:n.placeType,cameraIp:n.cameraIp,cameraPort:n.cameraPort,userName:n.userName,password:n.password})}return t}throw new Error(e.result)})}function U(e,t){return d(Dt+"/getUnbindCameraConfig",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({cameraName:n.cameraName,buildingName:n.buildingName,placeType:n.placeType,cameraIp:n.cameraIp,cameraPort:n.cameraPort,userName:n.userName,password:n.password})}return t}throw new Error(e.result)})}function j(e,t,a,n){return s(Nt+"/bindAreaCameras",{scenarioId:e,schoolId:t,areaName:a,cameraList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function K(e,t,a,n){return s(Nt+"/unbindAreaCameras",{scenarioId:e,schoolId:t,areaName:a,cameraList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function q(e,t,a,n,o){return s(Nt+"/bindDoorCameras",{scenarioId:e,schoolId:t,doorName:a,placeType:n,cameraList:o}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function Y(e,t,a,n,o){return s(Nt+"/unbindDoorCameras",{scenarioId:e,schoolId:t,doorName:a,placeType:n,cameraList:o}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function J(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,cameraName:e.cameraName,cameraIp:e.cameraIp,cameraPort:parseInt(e.cameraPort),userName:e.userName,password:e.password};return s(Nt+"/addCameraConfig",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function $(e,t,a){return s(Nt+"/delCameraConfig",{scenarioId:e,schoolId:t,cameraList:a}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function Z(e){var t={scenarioId:e.scenarioId,schoolId:e.schoolId,cameraName:e.cameraName,cameraIp:e.cameraIp,cameraPort:parseInt(e.cameraPort),userName:e.userName,password:e.password};return s(Nt+"/modifyCameraConfig",t).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function Q(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return d(Dt+"/getTodayOrYesterdayAveStep",n).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function X(e,t,a,n,o){var r=(0,yt.default)({scenarioId:e,schoolId:t,startRowIndex:a,maxItem:n},o);return d(Dt+"/getStudentHealthReport",r).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function ee(e,t){return d(Dt+"/getDoorConfig",{scenarioId:e,schoolId:t}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function te(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addDoorBaseConfig",n)}function ae(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/modifyDoorBaseConfig",n)}function ne(e,t,a){return s(Nt+"/delDoorBaseConfig",{scenarioId:e,schoolId:t,doorName:a})}function oe(e,t){return d(Dt+"/getClassRoomList",{scenarioId:e,schoolId:t}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function re(e,t,a){return d(Dt+"/getClassRoomCGMList",{scenarioId:e,schoolId:t,classRoomName:a}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function le(e,t){return d(Dt+"/getClassRoomCGMList",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function ie(e,t,a,n){return s(Nt+"/addClassRoomCGM",{scenarioId:e,schoolId:t,classRoomName:a,CGMList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function se(e,t,a,n){return s(Nt+"/delClassRoomCGM",{scenarioId:e,schoolId:t,classRoomName:a,CGMList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function de(e,t,a){return d(Dt+"/getDoorReaderConfig",{scenarioId:e,schoolId:t,doorName:a}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({doorName:n.doorName,placeType:n.placeType,IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function ue(e,t){return d(Dt+"/getDoorReaderListBySchoolId",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function ce(e,t,a,n,o,r){return s(Nt+"/addDoorReaders",{scenarioId:e,schoolId:t,doorName:a,doorType:n,timeInterval:o,readerList:r}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function fe(e,t,a,n){return s(Nt+"/delDoorReadersByReaderList",{scenarioId:e,schoolId:t,doorName:a,readerList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function pe(e,t){return d(Dt+"/getUnbindClassRoomList",{scenarioId:e,schoolId:t}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function he(e,t,a){return s(Nt+"/addClassRoom",{scenarioId:e,schoolId:t,classRoomName:a})}function me(e,t,a){return s(Nt+"/delClassRoom",{scenarioId:e,schoolId:t,classRoomList:a})}function ge(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/bindClassRoom",n)}function ve(e,t,a){return s(Nt+"/unbindClassRoom",{scenarioId:e,schoolId:t,classRoomName:a})}function Se(e,t,a){return d(Dt+"/getOneStudentHealthReport",{scenarioId:e,schoolId:t,studentId:a}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function ye(e,t,a,n){return d(Dt+"/getHistStepByStudent",{scenarioId:e,schoolId:t,studentId:a,method:n}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function Ie(e,t,a,n){return d(Dt+"/getHistHeartRateByStudent",{scenarioId:e,schoolId:t,studentId:a,method:n}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function Ce(e,t){return d(Dt+"/getGradeConfig",{scenarioId:e,schoolId:t}).then(function(e){if(0===e.errCode)return{gradeMonth:null===e.result?"":e.result.gradeMonth,gradeType:null===e.result?"":e.result.gradeType,gradeConf:null===e.result?[]:e.result.gradeConf};throw new Error(e.result)})}function be(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addAndModifyGradeConfig",n)}function Ee(e,t){return d(Dt+"/getClass",{scenarioId:e,schoolId:t}).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function we(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addClassConfig",n)}function Ae(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/modifyClassConfig",n)}function Me(e,t,a){return s(Nt+"/delClassConfig",{scenarioId:e,schoolId:t,classList:a})}function Le(e,t,a,n,o,r){var l=r?(0,yt.default)({scenarioId:e,schoolId:t},o):(0,yt.default)({scenarioId:e,schoolId:t},o,{startRowIndex:a,maxItem:n});return d(Dt+"/getStudentInfo",l).then(function(e){if(0===e.errCode)return e.result;throw new Error(e.result)})}function _e(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addStudentInfo",n)}function Te(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/modifyStudentInfo",n)}function De(e,t,a){return s(Nt+"/delStudentList",{scenarioId:e,schoolId:t,studentList:a})}function Ne(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addStudentLeaveStatus",n)}function xe(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/modifyStudentLeaveStatus",n)}function ke(e,t,a){return s("/v3/fs/exportStudentList",(0,yt.default)({scenarioId:e,schoolId:t},a))}function Oe(e,t,a,n,o){var r={};return r=void 0===a&&void 0===n?{scenarioId:e,schoolId:t}:void 0===o?{scenarioId:e,schoolId:t,years:a,baseGrade:n}:{scenarioId:e,schoolId:t,years:a,baseGrade:n,classId:o},d(Dt+"/getHealthSta",r).then(function(e){if(0==e.errCode)return{errCode:e.errCode,healthSta:e.result}})}function Re(e,t){return d(Dt+"/getCrowdAlarmNum",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode)return{errCode:e.errCode,importCount:e.result.importCount,seriousCount:e.result.seriousCount};throw new Error(e.result)})}function Fe(e,t,a,n,o){return d(Dt+"/getCrowdDetailsByLevel",{scenarioId:e,schoolId:t,alarmLevel:a,startRowIndex:n,maxItem:o}).then(function(e){if(0==e.errCode)return{errCode:e.errCode,alertTable:e.result.crowInfo,alarmLevel:a,count:e.result.count};throw new Error(e.result)})}function Pe(e,t,a,n){return d(Dt+"/getStudentDetailsByCrowdArea",{scenarioId:e,schoolId:t,areaName:a,alarmTime:n}).then(function(e){if(0==e.errCode)return{errCode:e.errCode,alertDetailTable:e.result};throw new Error(e.result)})}function Ge(e,t){return d(Dt+"/getAreaConfig",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({areaName:n.areaName,IM_Num:n.readerNum,crowdThreshold:n.crowdThreshold,crowdThresholdMax:n.crowdThresholdMax,cameraNum:n.cameraNum})}return t}throw new Error(e.result)})}function He(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/addAreaConfig",n).then(function(e){if(0==e.errCode)return{areaName:a.areaName,IM_Num:0,crowdThreshold:a.crowdThreshold,crowdThresholdMax:a.crowdThresholdMax,cameraNum:0};throw new Error(e.result)})}function Ve(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return s(Nt+"/modifyAreaConfig",n).then(function(e){if(0==e.errCode)return{areaName:a.areaName,crowdThreshold:a.crowdThreshold,crowdThresholdMax:a.crowdThresholdMax};throw new Error(e.result)})}function Be(e,t,a){return s(Nt+"/delAreaList",{scenarioId:e,schoolId:t,areaList:a}).then(function(e){if(0==e.errCode)return a;throw new Error(e.result)})}function We(e,t,a){return d(Dt+"/getAreaReaderConfig",{scenarioId:e,schoolId:t,areaName:a}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({areaName:n.areaName,IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function ze(e,t){return d(Dt+"/getAreaReaderListBySchoolId",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){for(var t=[],a=0;a<e.result.length;a++){var n=e.result[a];t.push({IC_SN:n.ICSn,IG_SN:n.IGSn,IM_SN:n.IMSn})}return t}throw new Error(e.result)})}function Ue(e,t,a,n){return s(Nt+"/addCGMArea",{scenarioId:e,schoolId:t,areaName:a,CGMList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function je(e,t,a,n){return s(Nt+"/delCGMList",{scenarioId:e,schoolId:t,areaName:a,CGMList:n}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function Ke(e,t,a){var n={scenarioId:t,schoolId:a,appName:e.appName};return s(Nt+"/addSubscribeAppName",n).then(function(t){if(0==t.errCode)return{errCode:0,appName:e.appName};throw new Error(t.result)})}function qe(e,t){return d(Dt+"/getSubscribeAppList",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode){var t=[];return e.result.map(function(e){t.push({appName:e.appName})}),{errCode:e.errCode,appNameList:t}}throw new Error(e.result)})}function Ye(e,t,a){return s(Nt+"/delSubscribeAppName",{scenarioId:t,schoolId:a,appName:e}).then(function(t){if(0===t.errCode)return{errCode:0,appName:e};throw new Error(t.result)})}function Je(e,t,a,n){var o={scenarioId:e,schoolId:t,appName:a,subScribeType:n.subScribeType,messageApi:n.messageApi,method:n.method,Authentication:n.Authentication};return"健康"===n.subScribeType&&(o.publishTime=n.publishTime),void 0!==n.userName&&(o.userName=n.userName),void 0!==n.password&&(o.password=n.password),s(Nt+"/addSubscribeDetail",o).then(function(e){if(0===e.errCode)return{errCode:0,appName:a,serverRowValue:n};throw new Error(e.result)})}function $e(e,t,a){return d(Dt+"/getSubscribeListByAppName",{scenarioId:e,schoolId:t,appName:a}).then(function(e){if(0==e.errCode){var t=[];return e.result.map(function(e,a){void 0!==e.subScribeType&&t.push(e)}),{errCode:e.errCode,appName:a,subscribeList:t}}throw new Error(e.result)})}function Ze(e,t,a,n){return s(Nt+"/delSubscribeDetail",{scenarioId:e,schoolId:t,appName:a,subScribeType:n}).then(function(e){if(0===e.errCode)return{errCode:0,appName:a,subScribeType:n};throw new Error(e)})}function Qe(e,t,a,n){var o={scenarioId:e,schoolId:t,appName:a,subScribeType:n.subScribeType,messageApi:n.messageApi,method:n.method,Authentication:n.Authentication};return void 0!==n.userName&&(o.userName=n.userName),void 0!==n.password&&(o.password=n.password),"健康"===n.subScribeType&&(o.publishTime=n.publishTime),s(Nt+"/modifySubscribeDetail",o).then(function(e){if(0===e.errCode)return{errCode:0,appName:a,values:n};throw new Error(e)})}function Xe(e,t){return d(Dt+"/getStudentPresentSta",{scenarioId:e,schoolId:t}).then(function(e){return e})}function et(e,t){return d(Dt+"/getHeartRateFastOrSlow",{scenarioId:e,schoolId:t}).then(function(e){return e})}function tt(e,t,a){return d(Dt+"/getStudentsByHeartAlarm",{scenarioId:e,schoolId:t,method:a}).then(function(e){if(0==e.errCode)return e.result;throw new Error(e.result)})}function at(e,t,a){return d(Dt+"/getStudentPresentRatio",{scenarioId:e,schoolId:t,method:a}).then(function(e){return e})}function nt(e){return d(Dt+"/getStudentInfoInSchool",e).then(function(e){if(0==e.errCode){for(var t={data:[],total:e.result.totalCount||0},a=0;a<e.result.studentArr.length;a++){var n=e.result.studentArr[a];t.data.push({key:n.studentId,studentName:n.studentName,studentId:n.studentId,grade:n.grade,classId:n.classId,inSchoolTime:n.inSchoolTime})}return t}throw new Error(e.result)})}function ot(e){return d(Dt+"/getStudentInfoOutSchool",e).then(function(e){if(0==e.errCode){for(var t={data:[],total:e.result.totalCount||0},a=0;a<e.result.studentArr.length;a++){var n=e.result.studentArr[a];t.data.push({key:n.studentId,studentName:n.studentName,studentId:n.studentId,grade:n.grade,classId:n.classId,outSchoolTime:n.outSchoolTime})}return t}throw new Error(e.result)})}function rt(e){return d(Dt+"/getStudentInfoLeave",e).then(function(e){if(0==e.errCode){var t={data:[],total:e.result.totalCount||0};if(e.result.studentArr&&e.result.studentArr.length>0)for(var a=0;a<e.result.studentArr.length;a++){var n=e.result.studentArr[a];t.data.push({key:n.studentId,studentName:n.studentName,studentId:n.studentId,grade:n.grade,classId:n.classId,leaveStartTime:new Date(n.leaveStartTime).toLocaleString(),leaveEndTime:new Date(n.leaveEndTime).toLocaleString(),leaveReason:"0"==n.leaveReason?"事假":"病假"})}return t}throw new Error(e.result)})}function lt(e){return d(Dt+"/getStudentInfoNever",e).then(function(e){if(0==e.errCode){var t={data:[],total:e.result.totalCount||0};if(e.result.studentArr&&e.result.studentArr.length>0)for(var a=0;a<e.result.studentArr.length;a++){var n=e.result.studentArr[a];t.data.push({key:n.studentId,studentName:n.studentName,studentId:n.studentId,grade:n.grade,classId:n.classId,outSchoolTime:n.outSchoolTime})}return t}throw new Error(e.result)})}function it(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return d(Dt+"/getClassAvgStepRank",n).then(function(e){return e})}function st(e,t,a){var n=(0,yt.default)({scenarioId:e,schoolId:t},a);return d(Dt+"/getStudentStepRankByClass",n).then(function(e){return e})}function dt(e,t,a,n,o,r){var l={scenarioId:e,schoolId:t,years:a,baseGrade:n,method:r};return""!==n&&void 0!==n||(l={scenarioId:e,schoolId:t,method:r}),d(Dt+"/getCollectSta",l).then(function(e){return e})}function ut(e,t,a,n,o,r){var l={scenarioId:e,schoolId:t,method:r,baseGrade:a,years:o};return""!==a&&void 0!==a||(l={scenarioId:e,schoolId:t,method:r}),d(Dt+"/getClassSta",l).then(function(e){return e})}function ct(e,t,a,n,o,r){var l={scenarioId:e,schoolId:t,method:r,baseGrade:a,years:o};return""!==a&&void 0!==a||(l={scenarioId:e,schoolId:t,method:r}),d(Dt+"/getStudentSta",l).then(function(e){return e})}function ft(e,t,a,n,o,r){return d(Dt+"/getRealTimeClassRoomSta",{scenarioId:e,schoolId:t,method:r,baseGrade:a,classId:n,years:o}).then(function(e){return e})}function pt(e,t,a,n,o){return d(Dt+"/getStudentInfo",{scenarioId:e,schoolId:t,grade:[o],classId:n}).then(function(e){return e})}function ht(e,t,a,n,o){return d(Dt+"/getRaiseInfo",{scenarioId:e,schoolId:t,years:o,baseGrade:a,classId:n}).then(function(e){return e})}function mt(e,t){return d(Dt+"/getInOutSchoolSta",{scenarioId:e,schoolId:t}).then(function(e){if(0==e.errCode)return{errCode:e.errCode,values:e.result};throw new Error(e.result)})}function gt(e,t,a,n,o){var r=(0,yt.default)({scenarioId:e,schoolId:t},o,{startRowIndex:a,maxItem:n});return d(Dt+"/getStudentOutSchoolSta",r).then(function(e){if(0==e.errCode)return{errCode:e.errCode,outSchoolTable:e.result.studentArr,outTotalCount:e.result.totalCount};throw new Error(e.result)})}function vt(e,t,a,n,o){var r=(0,yt.default)({scenarioId:e,schoolId:t},o,{startRowIndex:a,maxItem:n});return d(Dt+"/getStudentInSchoolSta",r).then(function(e){if(0==e.errCode)return{errCode:e.errCode,inSchoolTable:e.result.studentArr,inTotalCount:e.result.totalCount};throw new Error(e.result)})}Object.defineProperty(t,"__esModule",{value:!0});var St=a(4),yt=n(St),It=a(866),Ct=n(It),bt=a(865),Et=n(bt),wt=a(177),At=n(wt),Mt=a(205),Lt=n(Mt);t.getICList=c,t.getIGList=f,t.getSchoolList=p,t.addSchoolConfig=h,t.delSchoolConfig=m,t.modifySchoolConfig=g,t.getIotNetworkDeviceList=v,t.addIotNetworkDeviceList=S,t.deleteIotNetworkDeviceList=y,t.getIotGatewayList=I,t.addIotGatewayList=C,t.deleteIotGatewayList=b,t.deleteDeviceBySchoolId=E,t.deleteBindCGMList=w,t.getAreaList=A,t.getMapList=M,t.addMap=L,t.deleteMap=_,t.deleteMapImg=T,t.addMapUrl=D,t.modifyMap=N,t.getModuleList=x,t.getModuleListByMapId=k,t.getStudentPosition=O,t.addModule=R,t.deleteModule=F,t.modifyModule=P,t.bindModule=G,t.unBindModule=H,t.getHistAverStep=V,t.getCameraList=B,t.getCameraListByAreaName=W,t.getCameraListByDoorName=z,t.getUnBindCameraList=U,t.bindAreaCameras=j,t.unbindAreaCameras=K,t.bindDoorCameras=q,t.unbindDoorCameras=Y,t.addCamera=J,t.deleteCamera=$,t.modifyCamera=Z,t.getTodayOrYesterdayAveStep=Q,t.getStudentHealthReport=X,t.getDoorConfig=ee,t.addDoorBaseConfig=te,t.modifyDoorBaseConfig=ae,t.delDoorBaseConfig=ne,t.getClassRoomList=oe,t.getClassRoomCGMConfig=re,t.getALLClassRoomCGMConfig=le,t.addClassRoomCGM=ie,t.delClassRoomCGM=se,t.getDoorModuleConfig=de,t.getAllDoorModule=ue,t.addDoorReaders=ce,t.delDoorReaders=fe,t.getUnbindClassRoomList=pe,t.addClassRoom=he,t.delClassRoom=me,t.bindClassRoom=ge,t.unbindClassRoom=ve,t.getOneStudentHealthReport=Se,t.getHistStepByStudent=ye,t.getHistHeartRateByStudent=Ie,t.getGradeConfig=Ce,t.addAndModifyGradeConfig=be,t.getClass=Ee,t.addClassConfig=we,t.modifyClassConfig=Ae,t.delClassConfig=Me,t.getStudentInfo=Le,t.addStudentInfo=_e,t.modifyStudentInfo=Te,t.delStudentList=De,t.addStudentLeaveStatus=Ne,t.modifyStudentLeaveStatus=xe,t.exportStudentList=ke,t.getHealthSta=Oe,t.getCrowdAlarmNum=Re,t.getCrowdDetailsByLevel=Fe,t.getStudentDetailsByCrowdArea=Pe,t.getAreaConfig=Ge,t.addAreaConfig=He,t.modifyAreaConfig=Ve,t.deleteAreaConfig=Be,t.getAreaModuleConfig=We,t.getAllAreaModule=ze,t.addCGMArea=Ue,t.delCGMArea=je,t.addSubscribeAppName=Ke,t.getSubscribeAppList=qe,t.delSubscribeAppName=Ye,t.addSubscribeDetail=Je,t.getSubscribeListByAppName=$e,t.delSubscribeDetail=Ze,t.modifySubscribeDetail=Qe,t.getStudentPresentSta=Xe,t.getHeartRateFastOrSlow=et,t.getStudentsByHeartAlarm=tt,t.getStudentPresentRatio=at,t.getStudentInfoInSchool=nt,t.getStudentInfoOutSchool=ot,t.getStudentInfoLeave=rt,t.getStudentInfoNever=lt,t.getClassAvgStepRank=it,t.getStudentStepRankByClass=st,t.getCollectSta=dt,t.getClassSta=ut,t.getStudentSta=ct,t.getRealTimeClassRoomSta=ft,t.getOnsiteInfo=pt,t.getRaiseInfo=ht,t.getInOutSchoolSta=mt,t.getStudentOutSchoolSta=gt,t.getStudentInSchoolSta=vt;var _t=a(1213),Tt=n(_t),Dt="/v3/iotedu_primary_read",Nt="/v3/iotedu_primary_write",xt=function(e,t){var a=(0,Tt.default)(e,t),n=new Lt.default(function(e,a){setTimeout(function(){a(new Error("请求超时"))},t.timeout||15e3)});return Lt.default.race([a,n])},kt={};t.default=kt},369:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m.default.createElement("header",{className:"topnavbar-wrapper"},m.default.createElement("nav",{role:"navigation",className:"navbar topnavbar"},m.default.createElement("div",{className:"navbar-header"},m.default.createElement("a",{href:"#/",className:"navbar-brand"},m.default.createElement("div",{className:"brand-logo"},m.default.createElement("div",{className:"oasis-logo"})),m.default.createElement("div",{className:"brand-logo-collapsed"},m.default.createElement("div",{className:"logo-element"})))),m.default.createElement("div",{className:"nav-wrapper"},this.props.children)))}}]),t}(m.default.Component);g.propTypes={children:m.default.PropTypes.any},t.default=g},370:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m.default.createElement("aside",{className:"aside",style:this.props.style},m.default.createElement("div",{className:"aside-inner"},m.default.createElement("nav",{"data-sidebar-close":"",className:"sidebar"},this.props.children)))}}]),t}(m.default.Component);g.propTypes={children:m.default.PropTypes.any},t.default=g},371:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c(u):return(0,l.default)({},e);case f(u):var a=[];return 0===t.payload.errCode?(t.payload.alertDetailTable.map(function(e,t){if(void 0!==e.studentId&&void 0!==e.years){var n=new Date(e.years);a.push((0,l.default)({},e,{years:n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()}))}else a.push((0,l.default)({},e,{studentId:"--",studentName:"--",years:"--",grade:"--",baseGrade:"--",classId:"--",birthday:"--",sex:"--",householder:[]}))}),(0,l.default)({},e,{alertDetailTable:a})):(0,l.default)({},e,{alertDetailTable:[]});case p(u):return(0,l.default)({},e,{alertDetailTable:[]});default:return e}}function o(e,t,a,n){return function(o){return o({type:u,payload:s.getStudentDetailsByCrowdArea(e,t,a,n)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n,t.fetchAlertStuData=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={alertDetailTable:[]},u="dashboard/AlertDetail/FETCH",c=function(e){return e+"_PENDING"},f=function(e){return e+"_FULFILLED"},p=function(e){return e+"_REJECTED"}},372:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case M:return(0,h.default)({},e,{gradeOption:t.gradeOption,classOption:t.classOption});case b:return(0,h.default)({},e,{inSchoolFilter:{filter:t.payload.filter}});case E:return(0,h.default)({},e,{outSchoolFilter:{filter:t.payload.filter}});case w:return(0,h.default)({},e,{leaveSchoolFilter:{filter:t.payload.filter}});case A:return(0,h.default)({},e,{neverComeSchoolFilter:{filter:t.payload.filter}});case L(S):return e;case _(S):return(0,h.default)({},e,{inSchool:t.payload});case T(S):case L(y):return e;case _(y):return(0,h.default)({},e,{outSchool:t.payload});case T(y):case L(I):return e;case _(I):return(0,h.default)({},e,{leaveSchool:t.payload});case T(I):case L(C):return e;case _(C):return(0,h.default)({},e,{neverComeSchool:t.payload});case T(C):default:return e}}function o(e){return function(t){return t({type:S,payload:g.getStudentInfoInSchool(e)})}}function r(e){return function(t){return t({type:y,payload:g.getStudentInfoOutSchool(e)})}}function l(e){return function(t){return t({type:I,payload:g.getStudentInfoLeave(e)})}}function i(e){return function(t){return t({type:C,payload:g.getStudentInfoNever(e)})}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:b,payload:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:E,payload:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:w,payload:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:A,payload:e}}function f(e,t){return{type:M,gradeOption:e,classOption:t}}Object.defineProperty(t,"__esModule",{value:!0});var p=a(4),h=function(e){return e&&e.__esModule?e:{default:e}}(p);t.default=n,t.getStudentInfoInSchool=o,t.getStudentInfoOutSchool=r,t.getStudentInfoLeave=l,t.getStudentInfoNever=i,t.inSchoolSaveFilter=s,t.outSchoolSaveFilter=d,t.leaveSchoolSaveFilter=u,t.neverComeSchoolSaveFilter=c,t.setGradeOptionAndClassOption=f;var m=a(31),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(m),v={inSchool:{data:[],total:0},inSchoolFilter:{filter:{}},outSchool:{data:[],total:0},outSchoolFilter:{filter:{}},leaveSchool:{data:[],total:0},leaveSchoolFilter:{filter:{}},neverComeSchool:{data:[],total:0},neverComeSchoolFilter:{filter:{}}},S="Dashboard/AttendanceStatistics/AttendanceDetail/FETCH_INSCHOOL",y="Dashboard/AttendanceStatistics/AttendanceDetail/FETCH_OUTSCHOOL",I="Dashboard/AttendanceStatistics/AttendanceDetail/FETCH_LEAVE",C="Dashboard/AttendanceStatistics/AttendanceDetail/FETCH_NEVER",b="Dashboard/AttendanceStatistics/AttendanceDetail/INSCHOOL_SAVE_FILTER",E="Dashboard/AttendanceStatistics/AttendanceDetail/OUTSCHOOL_SAVE_FILTER",w="Dashboard/AttendanceStatistics/AttendanceDetail/LEAVESCHOOL_SAVE_FILTER",A="Dashboard/AttendanceStatistics/AttendanceDetail/NEVERCOMESCHOOL_SAVE_FILTER",M="Dashboard/AttendanceStatistics/AttendanceDetail/SET_GRADEOPTION_AND_CLASSOPTION",L=function(e){return e+"_PENDING"},_=function(e){return e+"_FULFILLED"},T=function(e){return e+"_REJECTED"}},373:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p(c):return(0,i.default)({},e);case h(c):return(0,i.default)({},e,{InTheSchool:t.payload.result.inSchoolCnt,Schoolleavers:t.payload.result.outSchoolCnt,Studentleave:t.payload.result.leaveCnt,NeverComeToSchool:t.payload.result.neverPresentCnt});case m(c):return(0,i.default)({},e);case p(f):return(0,i.default)({},e,{isPending:!0});case h(f):return(0,i.default)({},e,{InTheSchool:t.payload.result.inSchoolCnt,Schoolleavers:t.payload.result.outSchoolCnt,Studentleave:t.payload.result.leaveCnt,NeverComeToSchool:t.payload.result.neverPresentCnt,isPending:!1});case m(f):return(0,i.default)({},e,{isPending:!1});default:return e}}function o(e,t){return function(a){return a({type:c,payload:d.getStudentPresentSta(e,t)})}}function r(e,t){return function(a){return a({type:f,payload:d.getStudentPresentSta(e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.fetchAttendanceStatisticsData=o,t.mamualFetchAttendanceStatisticsData=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u={InTheSchool:"0",Schoolleavers:"0",Studentleave:"0",NeverComeToSchool:"0",isPending:!0},c="Dashboard/AttendanceStatistics/FETCH",f="Dashboard/AttendanceStatistics/MAMUAL_FETCH",p=function(e){return e+"_PENDING"},h=function(e){return e+"_FULFILLED"},m=function(e){return e+"_REJECTED"}},374:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case u:return(0,s.default)({},e,{currentImgUrl:t.payload});case c:return(0,s.default)({},e,{currentMapID:t.payload});case f:return(0,s.default)({},e,{matched:t.payload});default:return e}}function o(e){return{type:u,payload:e}}function r(e){return{type:c,payload:e}}function l(e){return{type:f,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n,t.setCurrentImgUrl=o,t.setCurrentMapID=r,t.setMatchedType=l;var d={currentImgUrl:"",currentMapID:"",matched:"all"},u="Dashboard/FloorInfo/SETCURRENTIMGURL",c="Dashboard/FloorInfo/SETCURRENTMAPID",f="Dashboard/FloorInfo/SETMATCHEDTYPE"},375:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return(0,s.default)({},e,{slowFilter:t.payload});case m:return(0,s.default)({},e,{fastFilter:t.payload});case g(f):return(0,s.default)({},e,{fastIspending:!0});case v(f):var a=t.payload;return a.map(function(e,t){e.key=e.studentId}),(0,s.default)({},e,{fastData:a,fastIspending:!1});case S(f):return(0,s.default)({},e,{fastIspending:!1});case g(p):return(0,s.default)({},e,{slowIspending:!0});case v(p):var n=t.payload;return n.map(function(e,t){e.key=e.studentId}),(0,s.default)({},e,{slowData:n,slowIspending:!1});case S(p):return(0,s.default)({},e,{slowIspending:!1});default:return e}}function o(e,t,a){var n=null;return n="fast"==a?f:p,function(o){return o({type:n,payload:u.getStudentsByHeartAlarm(e,t,a)})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:h,payload:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n,t.getStudentsByHeartAlarm=o,t.setSearchSlowFilter=r,t.setSearchFastFilter=l;var d=a(31),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),c={fastData:[],slowData:[],fastIspending:!1,slowIspending:!1,fastFilter:{studentName:"",studentId:"",classId:""},slowFilter:{studentName:"",studentId:"",classId:""}},f="Dashboard/HeartAlert/HeartAlertDetail/FETCH_FAST",p="Dashboard/HeartAlert/HeartAlertDetail/FETCH_SLOW",h="Dashboard/HeartAlert/HeartAlertDetail/SET_SEARCH_SLOW",m="Dashboard/HeartAlert/HeartAlertDetail/SET_SEARCH_FAST",g=function(e){return e+"_PENDING"},v=function(e){return e+"_FULFILLED"},S=function(e){return e+"_REJECTED"}},376:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c(u):return(0,l.default)({},e,{IsPending:!0});case f(u):return(0,l.default)({},e,{slowCount:t.payload.result.slowCount,fastCount:t.payload.result.fastCount,IsPending:!1});case p(u):return(0,l.default)({},e,{IsPending:!1});default:return e}}function o(e,t){return function(a){return a({type:u,payload:s.getHeartRateFastOrSlow(e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n,t.fetchHeartAlert=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={slowCount:"0",fastCount:"0",IsPending:!1},u="Dashboard/HeartAlert/FETCH",c=function(e){return e+"_PENDING"},f=function(e){return e+"_FULFILLED"},p=function(e){return e+"_REJECTED"}},377:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return(0,s.default)({},e,{isPending:!0});case p:return(0,s.default)({},e,{activeKey:t.payload});case m(f):return(0,s.default)({},e,{isPending:!0});case g(f):var a={data:[],rate:[]};if("0"==t.payload.errCode)for(var n in t.payload.result)if(t.payload.result.hasOwnProperty(n)){var o=t.payload.result[n];a.data.push(n),a.rate.push(o)}return(0,s.default)({},e,{data:a.data,rate:a.rate,isPending:!1});case v(f):return(0,s.default)({},e,{isPending:!1});default:return e}}function o(e,t,a){return function(n){return n({type:f,payload:u.getStudentPresentRatio(e,t,a)})}}function r(e){return{type:p,payload:e.activeKey}}function l(){return{type:h}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n,t.fetchHistorySchoolRateData=o,t.setActiveKey=r,t.setIsPending=l;var d=a(31),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),c={data:[],rate:[],isPending:!0,activeKey:"aWeek"},f="Dashboard/HistorySchoolRate/FETCH",p="Dashboard/HistorySchoolRate/setActiveKey",h="Dashboard/HistorySchoolRate/setIsPending",m=function(e){return e+"_PENDING"},g=function(e){return e+"_FULFILLED"},v=function(e){return e+"_REJECTED"}},378:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload,o=[],r=[],l=0,i=0;switch(a){case p:return(0,d.default)({},e,{studentFilter:n});case h:return(0,d.default)({},e,{studentPagination:n});case v(m):return(0,d.default)({},e);case S(m):return 0!==n.errCode?(0,d.default)({},e,{inSchoolTable:[],inTotalCount:0}):(o=n.inSchoolTable,l=n.inTotalCount,(0,d.default)({},e,{inSchoolTable:o,inTotalCount:l}));case y(m):return(0,d.default)({},e,{inSchoolTable:[],inTotalCount:0});case v(g):return(0,d.default)({},e);case S(g):return 0!==n.errCode?(0,d.default)({},e,{outSchoolTable:[],outTotalCount:0}):(r=n.outSchoolTable,i=n.outTotalCount,(0,d.default)({},e,{outSchoolTable:r,outTotalCount:i}));case y(g):return(0,d.default)({},e,{outSchoolTable:[],outTotalCount:0});default:return e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:p,payload:e}}function r(e){return{type:h,payload:e}}function l(e,t,a,n,o){return function(r){return r({type:g,payload:c.getStudentOutSchoolSta(e,t,a,n,o)})}}function i(e,t,a,n,o){return function(r){return r({type:m,payload:c.getStudentInSchoolSta(e,t,a,n,o)})}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n,t.saveStudentFilter=o,t.saveStudentPagination=r,t.getStudentOutSchoolData=l,t.getStudentInSchoolData=i;var u=a(31),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),f={studentFilter:{},studentPagination:{pagination:{current:1,pageSize:10}},inSchoolTable:[],inTotalCount:0,outSchoolTable:[],outTotalCount:0},p="Dashboard/InoutSchool/SAVE_STUDENT_FILTER",h="Dashboard/InoutSchool/SAVE_STUDENT_PAGINATION",m="Dashboard/InoutSchool/IN_SCHOOL_FETCH",g="Dashboard/InoutSchool/OUT_SCHOOL_FETCH",v=function(e){return e+"_PENDING"},S=function(e){return e+"_FULFILLED"},y=function(e){return e+"_REJECTED"}},379:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c(u):return(0,l.default)({},e);case f(u):var a=[];return 0!==t.payload.errCode?(0,l.default)({},e,{inoutSchoolTable:[]}):(t.payload.values.map(function(e){a.push(e)}),(0,l.default)({},e,{inoutSchoolTable:a}));case p(u):return(0,l.default)({},e,{inoutSchoolTable:[]});default:return e}}function o(e,t){return function(a){return a({type:u,payload:s.getInOutSchoolSta(e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=n,t.getInOutSchoolData=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={inoutSchoolTable:[]},u="Dashboard/InoutSchool/INOUT_SCHOOL_FETCH",c=function(e){return e+"_PENDING"},f=function(e){return e+"_FULFILLED"},p=function(e){return e+"_REJECTED"}},380:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m(f):return(0,s.default)({},e,{isPending:!0});case g(f):var a=[];if("0"==t.payload.errCode&&t.payload.result.length>0){var n=t.payload.result;for(var o in n){var r={};for(var l in n[o]){if(n[o].hasOwnProperty(l)){var i=n[o][l];switch(r.key=o,l){case"todayAveStep":r.todayAveStep=i;break;case"grade":r.grade=i;break;case"classId":r.classId=i;break;case"yesterdayAveStep":r.yesterdayAveStep=i}}r.rank=parseInt(o)+1}a.push(r)}}return(0,s.default)({},e,{data:a,isPending:!1});case v(f):return(0,s.default)({},e,{isPending:!1});case m(p):return(0,s.default)({},e,{isPending:!0});case g(p):var d=[];if("0"==t.payload.errCode&&t.payload.result.length>0){d=[];var u=t.payload.result;for(var o in u){var S={};for(var l in u[o]){if(u[o].hasOwnProperty(l)){var i=u[o][l];switch(S.key=o,l){case"todayStep":S.todayStep=i;break;case"studentName":S.studentName=i;break;case"studentId":S.studentId=i;break;case"yesterdayStep":S.yesterdayStep=i}}S.rank=parseInt(o)+1}d.push(S)}}return(0,s.default)({},e,{data:d,isPending:!1});case v(p):return(0,s.default)({},e,{isPending:!1});case h:return(0,s.default)({},e,{data:[]});default:return e}}function o(e,t,a){return function(n){return n({type:f,payload:u.getClassAvgStepRank(e,t,a)})}}function r(e,t,a){return function(n){return n({type:p,payload:u.getStudentStepRankByClass(e,t,a)})}}function l(){return{type:h}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n,t.getClassAvgStepRank=o,t.getStudentStepRankByClass=r,t.emptyData=l;var d=a(31),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(d),c={data:[],isPending:!0},f="Dashboard/SetRanking/FETCH",p="Dashboard/SetRanking/FETCH_CLASS",h="Dashboard/SetRanking/emptyData",m=function(e){return e+"_PENDING"},g=function(e){return e+"_FULFILLED"},v=function(e){return e+"_REJECTED"}},381:function(e,t,a){"use strict";function n(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(r){return r({type:p,payload:c.getStudentHealthReport(e,t,a,n,o)})}}function o(e,t){return{type:g,gradeOption:e,classOption:t}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pagination:{current:1,pageSize:10},filters:{}};return{type:h,payload:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:m,payload:e}}function i(){return{type:v}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case v:return(0,d.default)({},e,{healthDetailData:[]});case h:return(0,d.default)({},e,{studentPagination:n});case m:return(0,d.default)({},e,{studentFilter:n});case g:return(0,d.default)({},e,{gradeOption:t.gradeOption,classOption:t.classOption});case S(p):return(0,d.default)({},e,{loading:!0});case y(p):return(0,d.default)({},e,{loading:!1,healthDetailData:n.studentArr,totalCount:n.totalCount});case I(p):return(0,d.default)({},e,{loading:!1});default:return e}},t.fetchHealthDetailData=n,t.setGradeOptionAndClassOption=o,t.saveStudentPagination=r,t.saveStudentFilter=l,t.destoryTableData=i;var u=a(31),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),f={healthDetailData:[],totalCount:0,loading:!0,gradeOption:[],classOption:{},studentPagination:{pagination:{current:1,pageSize:10},filters:{}},studentFilter:{}},p="healthMonitor/healthDetail/FETCH_HEALTH_DETAIL_DATA",h="healthMonitor/healthDetail/SAVE_STUDENT_PAGINATION",m="healthMonitor/healthDetail/SAVE_STUDENT_FILTER",g="healthMonitor/healthDetail/SET_GRADEOPTION_AND_CLASSOPTION",v="healthMonitor/healthDetail/DESTORY_TABLE_DATA",S=function(e){return e+"_PENDING"},y=function(e){return e+"_FULFILLED"},I=function(e){return e+"_REJECTED"}},382:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f:return(0,i.default)({},e,{loading:t.payload});case p(c):return(0,i.default)({},e);case h(c):return 0===t.payload.errCode?(0,i.default)({},e,{sexNum:t.payload.healthSta.sexNum,femaleAgeNum:t.payload.healthSta.femaleAgeNum,maleAgeNum:t.payload.healthSta.maleAgeNum,statureNum:t.payload.healthSta.statureNum,weightNum:t.payload.healthSta.weightNum}):(0,i.default)({},e);case m(c):return(0,i.default)({},e);default:return e}}function o(e,t,a,n,o){return function(r){return r({type:c,payload:d.getHealthSta(e,t,a,n,o)})}}function r(e){return{type:f,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.fetchOverViewData=o,t.loadingData=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u={sexNum:{femaleNum:0,maleNum:0},femaleAgeNum:[{ageNum:0,ageSegmentString:"0~6岁"},{ageNum:0,ageSegmentString:"7~9岁"},{ageNum:0,ageSegmentString:"10~12岁"},{ageNum:0,ageSegmentString:"12岁以上"}],maleAgeNum:[{ageNum:0,ageSegmentString:"0~6岁"},{ageNum:0,ageSegmentString:"7~9岁"},{ageNum:0,ageSegmentString:"10~12岁"},{ageNum:0,ageSegmentString:"12岁以上"}],statureNum:{normalNum:0,shortNum:0,tallNum:0},weightNum:{fatNum:0,normalNum:0,thinNum:0},loading:!0},c="healthMonitor/OverView/OVER_VIEW_DATA_FETCH",f="healthMonitor/OverView/CHANGE_LOADING",p=function(e){return e+"_PENDING"},h=function(e){return e+"_FULFILLED"},m=function(e){return e+"_REJECTED"}},383:function(e,t,a){"use strict";function n(e){return{type:f,payload:e}}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];return function(o){return o({type:c,payload:d.getHistAverStep(e,t,a,n)})}}function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){return n({type:p,payload:d.getTodayOrYesterdayAveStep(e,t,a)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case f:return(0,i.default)({},e,{activeKey:n,stepLoading:!0});case h(c):return(0,i.default)({},e,{isPending:!0,stepLoading:!0});case m(c):return(0,i.default)({},e,{stepCount:n,isPending:!1,stepLoading:!1});case g(c):return(0,i.default)({},e,{isPending:!1,stepLoading:!1});case h(p):return(0,i.default)({},e,{aveStepCount:{todayAveStep:"获取中",yesterdayAveStep:"获取中"},aveLoading:!0});case m(p):return(0,i.default)({},e,{aveStepCount:n,aveLoading:!1});case g(p):return(0,i.default)({},e,{aveStepCount:{todayAveStep:"获取失败",yesterdayAveStep:"获取失败"},aveLoading:!1});default:return e}},t.setActiveKey=n,t.fetchStepCountChartData=o,t.fetchAveStepCount=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u={stepCount:{},activeKey:"aWeek",aveStepCount:{todayAveStep:"",yesterdayAveStep:""},isPending:!1,stepLoading:!0,aveLoading:!0},c="healthMonitor/StepCountChart/FECTH_STEPCOUNT_CHART_DATA",f="healthMonitor/StepCountChart/SET_ACTIVE_KEY",p="healthMonitor/StepCountChart/FETCH_AVE_STEP_COUNT",h=function(e){return e+"_PENDING"},m=function(e){return e+"_FULFILLED"},g=function(e){return e+"_REJECTED"}},384:function(e,t,a){"use strict";function n(e){return{type:c,payload:e}}function o(e,t,a,n){return function(o){return o({type:u,payload:s.getHistHeartRateByStudent(e,t,a,n)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case c:return(0,l.default)({},e,{activeKey:n,loading:!0});case f(u):return(0,l.default)({},e,{isPending:!0,heartRate:{},loading:!0});case p(u):return(0,l.default)({},e,{isPending:!1,heartRate:n,loading:!1});case h(u):return(0,l.default)({},e,{isPending:!1,loading:!1});default:return e}},t.setActiveKey=n,t.fetchPersonalHeartRateChartData=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={heartRate:{},activeKey:"hour",isPending:!1,loading:!0},u="personalHealth/PersonalHeartRateChart/FECTH_PERSONAL_HEARTRATE_CHART_DATA",c="personalHealth/PersonalHeartRateChart/SET_ACTIVE_KEY",f=function(e){return e+"_PENDING"},p=function(e){return e+"_FULFILLED"},h=function(e){return e+"_REJECTED"}},385:function(e,t,a){"use strict";function n(e){return{type:c,payload:e}}function o(e,t,a,n){return function(o){return o({type:u,payload:s.getHistStepByStudent(e,t,a,n)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case c:return(0,l.default)({},e,{activeKey:n,loading:!0});case f(u):return(0,l.default)({},e,{isPending:!0,loading:!0});case p(u):return(0,l.default)({},e,{isPending:!1,stepCount:n,loading:!1});case h(u):return(0,l.default)({},e,{isPending:!1,loading:!1});default:return e}},t.setActiveKey=n,t.fetchPersonalStepCountChartData=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={stepCount:{},activeKey:"aWeek",isPending:!1,loading:!0},u="personalHealth/PersonalStepCountChart/FECTH_PERSONAL_STEPCOUNT_CHART_DATA",c="personalHealth/PersonalStepCountChart/SET_ACTIVE_KEY",f=function(e){return e+"_PENDING"},p=function(e){return e+"_FULFILLED"},h=function(e){return e+"_REJECTED"}},386:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.ClassroomStatisticsActions=t.StudentActivityRankingActions=t.ClassActivityRankingActions=t.AverageStatisticsActions=void 0;var o=a(17),r=a(800),l=n(r),i=a(802),s=n(i),d=a(807),u=n(d),c=a(804),f=n(c);t.default=(0,o.combineReducers)({AverageStatistics:l.default,ClassActivityRanking:s.default,StudentActivityRanking:u.default,ClassroomStatistics:f.default}),t.AverageStatisticsActions=l,t.ClassActivityRankingActions=s,t.StudentActivityRankingActions=u,t.ClassroomStatisticsActions=f},387:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case d:return(0,i.default)({},e,{gradeSelect:n.select,message:n.message});case u:return(0,i.default)({},e,{timeRadio:n});default:return e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:d,payload:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:u,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.gradeSelect=o,t.radioSelect=r;var s={gradeSelect:"",timeRadio:"",message:{baseGrade:"",years:"",classId:""}},d="SchoolManagement/ScreenModal/grade_selelct",u="SchoolManagement/ScreenModal/radio_select"},388:function(e,t,a){"use strict";function n(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments[5];return function(l){return l({type:z,payload:B.getStudentInfo(e,t,a,n,o,r)})}}function o(e,t,a){return function(n){return n({type:K,payload:B.addStudentInfo(e,t,a)})}}function r(e,t,a){return function(n){return n({type:q,payload:B.modifyStudentInfo(e,t,a)})}}function l(e,t,a){return function(n){return n({type:Y,payload:B.delStudentList(e,t,a)})}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:J,payload:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:$,payload:e}}function d(e,t){return{type:X,gradeOption:e,classOption:t}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"添加学生",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:re,payload:e,title:t,isModify:a}}function c(){return{type:le}}function f(){return{type:se}}function p(){return{type:ie}}function h(){return{type:de}}function m(){return{type:ue}}function g(e){return{type:ge,payload:e}}function v(){return{type:ve}}function S(){return{type:Ie}}function y(e,t,a){return function(n){return n({type:Se,payload:B.addStudentLeaveStatus(e,t,a)})}}function I(e,t,a){return function(n){return n({type:ye,payload:B.modifyStudentLeaveStatus(e,t,a)})}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:ce,payload:e}}function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:fe,payload:e}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:pe,payload:e}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:he,payload:e}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:me,payload:e}}function M(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Ce,payload:e}}function L(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:be,payload:e}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:Ee,disableStartTime:e,disableEndTime:t}}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pagination:{current:1,pageSize:10},filters:{}};return{type:U,payload:e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:j,payload:e}}function N(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Z,payload:e}}function x(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:te,payload:e}}function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){return n({type:ae,payload:B.exportStudentList(e,t,a)})}}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return{type:ne,payload:e}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:oe,payload:e}}function F(){return{type:Q}}function P(){return{type:ee}}Object.defineProperty(t,"__esModule",{value:!0});var G=a(4),H=function(e){return e&&e.__esModule?e:{default:e}}(G);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case ee:return(0,H.default)({},e,{studentTableData:[],loading:!0});case U:return(0,H.default)({},e,{studentPagination:n});case j:return(0,H.default)({},e,{studentFilter:n});case Q:return(0,H.default)({},e,{loading:!1});case X:return(0,H.default)({},e,{gradeOption:t.gradeOption,classOption:t.classOption});case we(K):case we(q):return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{confirmLoading:!0})});case we(z):return(0,H.default)({},e,{loading:!0});case Ae(z):return(0,H.default)({},e,{loading:!1,studentTableData:n.studentArr,totalCount:n.totalCount});case Me(z):return(0,H.default)({},e,{loading:!1});case J:return(0,H.default)({},e,{batchStudentList:n});case $:return(0,H.default)({},e,{selectedRowKeys:n});case re:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{visible:!0,student:n,title:t.title,isModify:t.isModify})});case le:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{visible:!1,confirmLoading:!1})});case ie:return(0,H.default)({},e,{confirmLoading:!0});case se:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{visible:!1,confirmLoading:!1})});case de:return(0,H.default)({},e,{deleteDisabled:!1});case ue:return(0,H.default)({},e,{deleteDisabled:!0});case ce:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{editingIndex:n})});case fe:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{isAdd:n})});case pe:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{selectGrade:n})});case he:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{selectYear:n})});case me:return(0,H.default)({},e,{studentCreateForm:(0,H.default)({},e.studentCreateForm,{selectMonth:n})});case ge:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{visible:!0,leaveInfo:n})});case ve:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{visible:!1})});case Se:case ye:return(0,H.default)({},e,{confirmLoading:!0});case Ie:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{visible:!1,confirmLoading:!1,toBeLeave:!1,unLeave:!1})});case Ce:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{toBeLeave:n})});case be:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{unLeave:n})});case Ee:return(0,H.default)({},e,{studentLeaveForm:(0,H.default)({},e.studentLeaveForm,{disableStartTime:t.disableStartTime,disableEndTime:t.disableEndTime})});case Z:return(0,H.default)({},e,{importStudentModal:{visible:n}});case te:return(0,H.default)({},e,{exportStudentModal:(0,H.default)({},e.exportStudentModal,{visible:n})});case we(ae):return(0,H.default)({},e,{exportStudentModal:(0,H.default)({},e.exportStudentModal,{confirmLoading:!0})});case Ae(ae):case Me(ae):return(0,H.default)({},e,{exportStudentModal:(0,H.default)({},e.exportStudentModal,{confirmLoading:!1})});case ne:return(0,H.default)({},e,{exportStudentModal:(0,H.default)({},e.exportStudentModal,{selectGrade:n})});case oe:return(0,H.default)({},e,{exportStudentModal:(0,H.default)({},e.exportStudentModal,{selectClassId:n})});default:return e}},t.fetchStudentTableData=n,t.addStudentToServer=o,t.modifyStudentToServer=r,t.deleteStudentToServer=l,t.setBatchStudentList=i,t.saveSelectRowKeys=s,t.setGradeOptionAndClassOption=d,t.showCreateModal=u,t.hideCreateModal=c,t.handleCancel=f,t.handleCreate=p,t.enableDelete=h,t.disableDelete=m,t.showStudentLeaveForm=g,t.hideStudentLeaveForm=v,t.handleStudentLeaveCancel=S,t.handleStudentLeaveCreate=y,t.handleStudentLeaveModify=I,t.setEditingIndex=C,t.addNewHouseholder=b,t.setSelectGrade=E,t.setSelectYear=w,t.setSelectMonth=A,t.handleStudentToBeLeave=M,t.handleStudentToUnLeave=L,t.setDisableStartTimeAndEndTime=_,t.saveStudentPagination=T,t.saveStudentFilter=D,t.showImportStudentModal=N,t.showExportStudentModal=x,t.exportStudentList=k,t.setExportSelectGrade=O,t.setSelectClassId=R,t.hideLoading=F,t.destoryTableData=P;var V=a(31),B=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(V),W={studentTableData:[],totalCount:0,batchStudentList:[],selectedRowKeys:[],loading:!0,deleteDisabled:!0,gradeOption:[],classOption:{},studentPagination:{pagination:{current:1,pageSize:10},filters:{}},studentFilter:{},studentCreateForm:{selectYear:"",selectMonth:"",selectGrade:"",visible:!1,student:{},editingIndex:"",isAdd:!1,title:"",isModify:!1,confirmLoading:!1},studentLeaveForm:{leaveInfo:{},visible:!1,confirmLoading:!1,toBeLeave:!1,unLeave:!1,disableStartTime:"",disableEndTime:""},importStudentModal:{visible:!1},exportStudentModal:{visible:!1,confirmLoading:!1,selectGrade:"all",selectClassId:""}},z="schoolManage/StudentTable/FETCH_STUDENTTABLE_DATA",U="schoolManage/StudentTable/SAVE_STUDENT_PAGINATION",j="schoolManage/StudentTable/SAVE_STUDENT_FILTER",K="schoolManage/StudentTable/ADD_STUDENT",q="schoolManage/StudentTable/MODFIY_STUDENT",Y="schoolManage/StudentTable/DELETE_STUDENT",J="schoolManage/StudentTable/BATCH_STUDENT_LIST",$="schoolManage/StudentTable/SAVE_SELECT_ROWKEYS",Z="schoolManage/StudentTable/SHOW_IMPORT_STUDENT_MODAL",Q="schoolManage/StudentTable/HIDE_LOADING",X="schoolManage/StudentTable/SET_GRADEOPTION_AND_CLASSOPTION",ee="schoolManage/StudentTable/DESTORY_TABLE_DATA",te="schoolManage/StudentTable/SHOW_EXPORT_STUDENT_MODAL",ae="schoolManage/StudentTable/EXPORT_STUDENT_LIST",ne="schoolManage/StudentTable/SET_EXPORT_SELECT_GRADE",oe="schoolManage/StudentTable/SET_SELECT_CLASSID",re="schoolManage/StudentTable/SHOW_CREATEMODAL",le="schoolManage/StudentTable/HIDE_CREATEMODAL",ie="schoolManage/StudentTable/HANDLE_CRAETE",se="schoolManage/StudentTable/HANDLE_CANCEL",de="schoolManage/StudentTable/ENABLE_DELETE",ue="schoolManage/StudentTable/DISABLE_DELETE",ce="schoolManage/StudentTable/SET_EDITING_INDEX",fe="schoolManage/StudentTable/ADD_NEW_HOUSEHOLDER",pe="schoolManage/StudentTable/SET_SELECT_GRADE",he="schoolManage/StudentTable/SET_SELECT_YEAR",me="schoolManage/StudentTable/SET_SELECT_MONTH",ge="schoolManage/StudentTable/SHOW_STUDENTLEAVEFORM",ve="schoolManage/StudentTable/HIDE_STUDENTLEAVEFORM",Se="schoolManage/StudentTable/HANDLE_STUDENTLEAVE_CRAETE",ye="schoolManage/StudentTable/HANDLE_STUDENTLEAVE_MODIFY",Ie="schoolManage/StudentTable/HANDLE_STUDENTLEAVECANCEL",Ce="schoolManage/StudentTable/HANDLE_TOBELEAVE",be="schoolManage/StudentTable/HANDLE_TOUNLEAVE",Ee="schoolManage/StudentTable/SET_DISABLE_STARTTIME_AND_ENDTIME",we=function(e){return e+"_PENDING"},Ae=function(e){return e+"_FULFILLED"},Me=function(e){return e+"_REJECTED"}},389:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(254),a(253)),d=n(s),u=(a(175),a(174)),c=n(u),f=(a(257),a(256)),p=n(f),h=(a(50),a(49)),m=n(h),g=(a(47),a(46)),v=n(g),S=(a(73),a(72)),y=n(S),I=(a(37),a(35)),C=n(I),b=(a(41),a(48)),E=n(b),w=(a(33),a(18)),A=n(w),M=(a(117),a(130)),L=n(M),_=(a(45),a(44)),T=n(_),D=(a(54),a(53)),N=n(D),x=a(4),k=n(x),O=(a(23),a(22)),R=n(O),F=a(13),P=n(F),G=a(1),H=n(G),V=a(9),B=n(V),W=a(3),z=n(W),U=a(2),j=n(U),K=(a(91),a(86)),q=n(K),Y=(a(85),a(74)),J=n(Y),$=(a(149),a(106)),Z=n($),Q=a(0),X=n(Q),ee=a(17),te=a(21),ae=a(812),ne=n(ae),oe=a(813),re=n(oe),le=a(388),ie=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(le),se=a(131);a(682);var de=Z.default.Group,ue=function(e){switch(e){case 1:return"六年制小学";case 2:return"三年制初中";case 3:return"三年制高中";case 4:return"综合中学";case 5:return"幼儿园";case 6:return"自定义";default:return""}},ce=J.default.Group,fe=q.default.Option,pe={display:"block",height:"24px",lineHeight:"24px",marginLeft:8},he=function(e){for(var t in e)return!1;return!0},me=function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t[a]!==e[a])return!1;return!0},ge=function(e,t){var a=!0;if(e.householder.length!==(t.householder&&t.householder.length))return!1;if(e.householder.map(function(e){t.householder.some(function(t){return me(e,t)})||(a=!1)}),!a)return!1;for(var n in e)if(e.hasOwnProperty(n)&&t[n]!==e[n]&&"householder"!==n)return!1;return!0},ve=function(e){function t(e){(0,H.default)(this,t);var a=(0,z.default)(this,(t.__proto__||(0,P.default)(t)).call(this,e));return a.state={studentNameWeak:"",studentIdWeak:"",INSnWeak:"",grade:[],filterDropdownVisible:!1,sex:"",sexFilterDropdownVisible:!1},a.handleCreateStudent=function(){var e=a.studentForm,t={},n=[],o=e.getFieldValue("householders");e.validateFields(function(r,l){if(!r){for(var i=0;i<=o.length;i++){var s=e.getFieldsValue(["name"+i,"relationship"+i,"tel"+i]);s["name"+i]&&(t={name:s["name"+i],relationship:s["relationship"+i],tel:s["tel"+i]},n.push(t))}a.props.studentTable.studentCreateForm.isAdd&&a.props.studentTableActions.addNewHouseholder();var d={studentId:l.studentId,studentName:l.studentName,years:l.years,baseGrade:l.baseGrade,classId:l.classId,birthday:l.selectYear+"-"+l.selectMonth+"-"+l.selectDay,sex:l.sex,INSn:l.INSn,householder:n};if(ge(d,a.props.studentTable.studentCreateForm.student))return void R.default.info("当前学生信息无改动");a.props.studentTable.studentCreateForm.editingIndex&&ie.setEditingIndex(),a.props.studentTable.studentCreateForm.selectGrade&&ie.setSelectGrade(),a.props.studentTable.studentCreateForm.selectYear&&ie.setSelectYear(),a.props.studentTable.studentCreateForm.selectMonth&&ie.setSelectMonth(),a.handleAddAndModifyStudent(d)}})},a.handleStudentLeave=function(){a.studentLeaveForm.validateFields(function(e,t){if(!e){var n=!1,o={};if(2!==a.props.studentTable.studentLeaveForm.leaveInfo.leaveStatus&&"1"===t.leaveStatus?o={studentId:a.props.studentTable.studentLeaveForm.leaveInfo.studentId,leaveStatus:2,leaveStartTime:new Date(t.leaveStartTime).getTime(),leaveEndTime:new Date(t.leaveEndTime).getTime(),leaveDays:parseFloat(t.leaveDays),leaveReason:parseInt(t.leaveReason,10)}:2!==a.props.studentTable.studentLeaveForm.leaveInfo.leaveStatus&&"0"===t.leaveStatus?o=a.props.studentTable.studentLeaveForm.leaveInfo:(o={studentId:a.props.studentTable.studentLeaveForm.leaveInfo.studentId,INSn:a.props.studentTable.studentLeaveForm.leaveInfo.INSn,leaveStatus:"0"===t.leaveStatus?0:2,leaveStartTime:t.leaveStartTime&&new Date(t.leaveStartTime).getTime(),leaveEndTime:t.leaveEndTime&&new Date(t.leaveEndTime).getTime(),leaveDays:t.leaveDays&&parseFloat(t.leaveDays),leaveReason:t.leaveReason&&parseInt(t.leaveReason,10)},n=!0),me(o,a.props.studentTable.studentLeaveForm.leaveInfo))return void R.default.info("当前请假信息无改动");a.handleAddAndModifyStudentLeave(o,n)}})},a.handleSearch=a.handleSearch.bind(a),a.handleTableChange=a.handleTableChange.bind(a),a}return(0,j.default)(t,e),(0,B.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchDataAfterGetSchoolId(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchDataAfterGetSchoolId(e.scenarioId,e.currentSchoolId)}},{key:"componentWillUnmount",value:function(){this.props.isModel||(this.props.studentTableActions.setSelectGrade(),this.props.studentTableActions.setSelectYear(),this.props.studentTableActions.setSelectMonth(),this.props.studentTableActions.setSelectClassId(),this.props.studentTableActions.saveStudentFilter(),this.props.studentTableActions.saveStudentPagination(),this.props.studentTableActions.saveSelectRowKeys(),this.props.studentTableActions.setBatchStudentList(),this.props.studentTable.studentCreateForm.visible&&this.props.studentTableActions.hideCreateModal(),this.props.studentTable.studentLeaveForm.visible&&this.props.studentTableActions.handleStudentLeaveCancel(),this.props.studentTable.importStudentModal.visible&&this.props.studentTableActions.showImportStudentModal(),this.props.studentTable.exportStudentModal.visible&&this.props.studentTableActions.showExportStudentModal()),this.props.studentTableActions.destoryTableData()}},{key:"fetchDataAfterGetSchoolId",value:function(e,t){var a=this,n=this.props.studentTable.studentPagination.pagination,o=n.current,r=n.pageSize;this.props.isModel?this.fetchData(e,t,(o-1)*r,r,this.props.classInfo,this.props.isModel):this.props.classTableActions.fetchGradeConfig(e,t).then(function(n){var l=ue(n.value.gradeType);a.props.classTableActions.setGradeTypeString(l),a.props.classTableActions.fetchClassTableData(e,t).then(function(){var n=[],l={};a.props.classTableData.map(function(e){var t=!0,a=e.grade;n.some(function(e){return e===a&&(t=!1),e===a}),t&&n.push(a),n.length&&(l[""+a]=void 0===l[""+a]?[]:l[""+a],l[""+a].push({baseGrade:e.baseGrade,years:e.years,classId:e.classId}))}),a.props.studentTableActions.setGradeOptionAndClassOption(n,l),a.fetchData(e,t,(o-1)*r,r)})}).catch(function(e){a.props.studentTableActions.hideLoading(),R.default.error("获班年级类型失败: "+e.message)})}},{key:"handleAddAndModifyStudent",value:function(e){var t=this;this.props.studentTable.studentCreateForm.isModify?this.props.studentTableActions.modifyStudentToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?R.default.success("修改学生信息成功"):R.default.error("修改学生失败："+e.value.result),t.props.studentTableActions.hideCreateModal();var a=t.props.studentTable.studentPagination.pagination,n=a.current,o=a.pageSize;t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n-1)*o,o)}).catch(function(e){var a=t.props.studentTable.studentPagination.pagination,n=a.current,o=a.pageSize;t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n-1)*o,o),R.default.error("修改学生信息失败："+e.message),t.props.studentTableActions.hideCreateModal()}):this.props.studentTableActions.addStudentToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(R.default.success("添加学生成功"),t.props.studentTable.studentCreateForm.isAdd&&t.props.studentTableActions.addNewHouseholder()):(R.default.error("添加学生失败："+e.value.result),t.props.studentTable.studentCreateForm.isAdd&&t.props.studentTableActions.addNewHouseholder()),t.props.studentTableActions.hideCreateModal();var a=t.props.studentTable.studentPagination.pagination,n=a.current,o=a.pageSize;t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n-1)*o,o)}).catch(function(e){var a=t.props.studentTable.studentPagination.pagination,n=a.current,o=a.pageSize;t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n-1)*o,o),R.default.error("添加学生失败："+e.message),t.props.studentTableActions.hideCreateModal()})}},{key:"handleAddAndModifyStudentLeave",value:function(e,t){var a=this;t?this.props.studentTableActions.handleStudentLeaveModify(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(R.default.success("修改学生请假信息成功"),a.props.studentTableActions.handleStudentLeaveCancel()):(R.default.error("修改学生请假信息失败："+e.value.result),a.props.studentTableActions.handleStudentLeaveCancel());var t=a.props.studentTable.studentPagination.pagination,n=t.current,o=t.pageSize;a.state.grade.length&&a.setState({grade:[]}),a.state.sex&&a.setState({sex:""}),!he(a.props.studentTable.studentFilter)&&a.props.studentTableActions.saveStudentFilter(),a.fetchData(a.props.scenarioId,a.props.currentSchoolId,(n-1)*o,o)}).catch(function(e){var t=a.props.studentTable.studentPagination.pagination,n=t.current,o=t.pageSize;a.state.grade.length&&a.setState({grade:[]}),a.state.sex&&a.setState({sex:""}),!he(a.props.studentTable.studentFilter)&&a.props.studentTableActions.saveStudentFilter(),a.fetchData(a.props.scenarioId,a.props.currentSchoolId,(n-1)*o,o),R.default.error("修改学生请假信息失败："+e.message),a.props.studentTableActions.handleStudentLeaveCancel()}):this.props.studentTableActions.handleStudentLeaveCreate(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(R.default.success("添加学生请假成功"),a.props.studentTableActions.handleStudentLeaveCancel()):(R.default.error("添加学生请假失败："+e.value.result),a.props.studentTableActions.handleStudentLeaveCancel());var t=a.props.studentTable.studentPagination.pagination,n=t.current,o=t.pageSize;a.state.grade.length&&a.setState({grade:[]}),a.state.sex&&a.setState({sex:""}),!he(a.props.studentTable.studentFilter)&&a.props.studentTableActions.saveStudentFilter(),a.fetchData(a.props.scenarioId,a.props.currentSchoolId,(n-1)*o,o)}).catch(function(e){var t=a.props.studentTable.studentPagination.pagination,n=t.current,o=t.pageSize;a.state.grade.length&&a.setState({grade:[]}),a.state.sex&&a.setState({sex:""}),!he(a.props.studentTable.studentFilter)&&a.props.studentTableActions.saveStudentFilter(),a.fetchData(a.props.scenarioId,a.props.currentSchoolId,(n-1)*o,o),R.default.error("添加学生请假失败："+e.message),a.props.studentTableActions.handleStudentLeaveCancel()})}},{key:"handleDelete",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.studentTableActions.deleteStudentToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(R.default.success("删除学生成功"),a&&(t.props.studentTableActions.disableDelete(),t.props.studentTableActions.setBatchStudentList(),t.props.studentTableActions.saveSelectRowKeys())):(R.default.error("删除学生失败："+e.value.result),a&&(t.props.studentTableActions.disableDelete(),t.props.studentTableActions.setBatchStudentList(),t.props.studentTableActions.saveSelectRowKeys()));var n=(0,k.default)({},t.props.studentTable.studentPagination,{pagination:(0,k.default)({},t.props.studentTable.studentPagination.pagination,{current:1})});t.props.studentTableActions.saveStudentPagination(n),t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n.pagination.current-1)*n.pagination.pageSize,n.pagination.pageSize)}).catch(function(e){a?(R.default.error("批量删除学生失败："+data.value.result),t.props.studentTableActions.disableDelete(),t.props.studentTableActions.setBatchStudentList(),t.props.studentTableActions.saveSelectRowKeys()):R.default.error("删除学生失败："+data.value.result);var n=(0,k.default)({},t.props.studentTable.studentPagination,{pagination:(0,k.default)({},t.props.studentTable.studentPagination.pagination,{current:1})});t.props.studentTableActions.saveStudentPagination(n),t.state.grade.length&&t.setState({grade:[]}),t.state.sex&&t.setState({sex:""}),!he(t.props.studentTable.studentFilter)&&t.props.studentTableActions.saveStudentFilter(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId,(n.pagination.current-1)*n.pagination.pageSize,n.pagination.pageSize)})}},{key:"fetchData",value:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.props.studentTableActions.fetchStudentTableData(e,t,a,n,o,r).catch(function(e){R.default.error("获取学生列表失败: "+e.message)})}},{key:"handleSearch",value:function(e,t){var a=this.props.studentTable.studentPagination,n=a.pagination,o=a.filters;this.handleTableChange(n,o,e,t,!0)}},{key:"handleTableChange",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=(e.current,e.pageSize),l=o?{pagination:(0,k.default)({},e,{current:1}),filters:t}:{pagination:e,filters:t},i=he(n)?this.props.studentTable.studentFilter:n;!0===a&&(i.sex&&delete i.sex,i.grade&&delete i.grade),this.props.studentTableActions.saveStudentFilter(i),this.props.studentTableActions.saveStudentPagination(l),this.fetchData(this.props.scenarioId,this.props.currentSchoolId,(l.pagination.current-1)*r,r,i)}},{key:"empty",value:function(e){this[e].focus(),this[e].refs.input.value=""}},{key:"render",value:function(){var e=this,t=this.props,a=t.studentTable,n=t.studentTableActions,o=a.studentTableData,l=a.studentLeaveForm,s=a.studentCreateForm,u=a.importStudentModal,f=a.exportStudentModal,h=a.totalCount,g=a.gradeOption,S=a.classOption,I=a.selectedRowKeys,b=f.selectGrade,w=f.selectClassId,M={selectedRowKeys:I,onChange:function(e,t){if(n.saveSelectRowKeys(e),0===e.length)n.disableDelete(),n.setBatchStudentList();else{var o=[];e.map(function(e){o.push({studentId:e})}),n.setBatchStudentList(o),a.deleteDisabled&&n.enableDelete()}}},_=this.props.isModel?[{title:"姓名",dataIndex:"studentName"},{title:"学号",dataIndex:"studentId"},{title:"出生日期",dataIndex:"birthday"},{title:"性别",dataIndex:"sex"},{title:"手环ID",dataIndex:"INSn"},{title:"是否请假",dataIndex:"leaveStatus",render:function(e){return 2===e?"是":"否"}},{title:"家长",dataIndex:"householder",render:function(e){if(e.length){var t=X.default.createElement("div",{style:{width:250,color:"#80878c"}},X.default.createElement(T.default,null,X.default.createElement(N.default,{span:8},"家长姓名"),X.default.createElement(N.default,{span:8},"亲缘关系"),X.default.createElement(N.default,{span:8},"联系方式")),e.map(function(e){return X.default.createElement(T.default,null,X.default.createElement(N.default,{span:8},e.name),X.default.createElement(N.default,{span:8},e.relationship),X.default.createElement(N.default,{span:8},e.tel))}));return X.default.createElement(L.default,{content:t,title:"家长信息",trigger:"hover"},X.default.createElement("div",{className:"operation"},X.default.createElement("a",{style:{color:"#1cc09f",fontWeight:600}},e[0].name)))}return""}}]:[{title:"姓名",dataIndex:"studentName",filterDropdown:X.default.createElement("div",{className:"custom-filter-dropdown"},X.default.createElement(E.default,{placeholder:"请输入搜索姓名",ref:function(t){e.searchStudentName=t},suffix:this.state.studentNameWeak?X.default.createElement(A.default,{type:"close-circle",onClick:function(){return e.empty("searchStudentName")}}):null,onChange:function(t){return e.setState({studentNameWeak:t.target.value})},onPressEnter:function(){var t=(0,k.default)({},a.studentFilter,{studentNameWeak:e.searchStudentName.refs.input.value});n.saveStudentFilter(t),e.handleSearch(!1,t)}}),X.default.createElement(C.default,{type:"primary",onClick:function(){var t=(0,k.default)({},a.studentFilter,{studentNameWeak:e.searchStudentName.refs.input.value});n.saveStudentFilter(t),e.handleSearch(!1,t)}},"搜索")),filterIcon:X.default.createElement(A.default,{type:"search",style:{color:a.studentFilter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",filterDropdown:X.default.createElement("div",{className:"custom-filter-dropdown"},X.default.createElement(E.default,{placeholder:"请输入搜索学号",ref:function(t){e.searchStudentId=t},suffix:this.state.studentIdWeak?X.default.createElement(A.default,{type:"close-circle",onClick:function(){return e.empty("searchStudentId")}}):null,onChange:function(t){return e.setState({studentIdWeak:t.target.value})},onPressEnter:function(){var t=(0,k.default)({},a.studentFilter,{studentIdWeak:e.searchStudentId.refs.input.value});n.saveStudentFilter(t),e.handleSearch(!1,t)}}),X.default.createElement(C.default,{type:"primary",onClick:function(){var t=(0,k.default)({},a.studentFilter,{studentIdWeak:e.searchStudentId.refs.input.value});n.saveStudentFilter((0,k.default)({},a.studentFilter,{studentIdWeak:e.searchStudentId.refs.input.value})),e.handleSearch(!1,t)}},"搜索")),filterIcon:X.default.createElement(A.default,{type:"search",style:{color:a.studentFilter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",filterDropdown:X.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},X.default.createElement(de,{style:{padding:8},value:this.state.grade,onChange:function(t){e.setState({grade:t})}},g.map(function(e){return X.default.createElement(Z.default,{style:pe,key:e,value:S[e][0].years},e)})),X.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},X.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){e.setState({filterDropdownVisible:!1});var t=(0,k.default)({},a.studentFilter,{grade:e.state.grade});e.handleSearch(!1,t)}},"确定"),X.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){e.setState({filterDropdownVisible:!1,grade:[]});var t=a.studentFilter;e.handleSearch(!0,t)}},"重置"))),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownVisible:t})},filterIcon:X.default.createElement(A.default,{type:"filter",style:{color:a.studentFilter.grade?"#1cc09f":"#aaa"}})},{title:"班级",dataIndex:"classId"},{title:"生日",dataIndex:"birthday"},{title:"性别",dataIndex:"sex",filterDropdown:X.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},X.default.createElement(ce,{style:{padding:8},value:this.state.sex,onChange:function(t){if(void 0!==t.target.value){var a=t.target.value;e.setState({sex:a})}}},X.default.createElement(J.default,{style:pe,value:"男"},"男"),X.default.createElement(J.default,{style:pe,value:"女"},"女")),X.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},X.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){e.setState({sexFilterDropdownVisible:!1});var t=(0,k.default)({},a.studentFilter,{sex:e.state.sex});e.handleSearch(!1,t)}},"确定"),X.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){e.setState({sexFilterDropdownVisible:!1,sex:""}),e.handleSearch(!0,a.studentFilter)}},"重置"))),filterDropdownVisible:this.state.sexFilterDropdownVisible,onFilterDropdownVisibleChange:function(t){e.setState({sexFilterDropdownVisible:t})},filterIcon:X.default.createElement(A.default,{type:"filter",style:{color:a.studentFilter.sex?"#1cc09f":"#aaa"}})},{title:"手环ID",dataIndex:"INSn",filterDropdown:X.default.createElement("div",{className:"custom-filter-dropdown"},X.default.createElement(E.default,{placeholder:"请输入搜索手环ID",ref:function(t){e.searchStudentINSn=t},suffix:this.state.INSnWeak?X.default.createElement(A.default,{type:"close-circle",onClick:function(){return e.empty("searchStudentINSn")}}):null,onChange:function(t){return e.setState({INSnWeak:t.target.value})},onPressEnter:function(){var t=(0,k.default)({},a.studentFilter,{INSnWeak:e.searchStudentINSn.refs.input.value});n.saveStudentFilter(t),e.handleSearch(!1,t)}}),X.default.createElement(C.default,{type:"primary",onClick:function(){var t=(0,k.default)({},a.studentFilter,{INSnWeak:e.searchStudentINSn.refs.input.value});n.saveStudentFilter(t),e.handleSearch(!1,t)}},"搜索")),filterIcon:X.default.createElement(A.default,{type:"search",style:{color:a.studentFilter.INSnWeak?"#1cc09f":"#aaa"}})},{title:"是否请假",key:"leaveStatus",render:function(e){var t=2===e.leaveStatus?{studentId:e.studentId,INSn:e.INSn,studentName:e.studentName,leaveStatus:e.leaveStatus,leaveStartTime:e.leaveStartTime,leaveEndTime:e.leaveEndTime,leaveDays:e.leaveDays,leaveReason:e.leaveReason}:{studentId:e.studentId,INSn:e.INSn,studentName:e.studentName,leaveStatus:e.leaveStatus};return 2!==e.leaveStatus?X.default.createElement("a",{onClick:function(){n.showStudentLeaveForm(t),n.setDisableStartTimeAndEndTime()},style:{color:"#1cc09f",fontWeight:600}},"否"):X.default.createElement("a",{onClick:function(){n.showStudentLeaveForm(t),n.setDisableStartTimeAndEndTime(e.leaveStartTime,e.leaveEndTime)},style:{color:"#1cc09f",fontWeight:600}},"是")}},{title:"家长",dataIndex:"householder",render:function(e){if(e.length){var t=X.default.createElement("div",{style:{width:250}},X.default.createElement(T.default,null,X.default.createElement(N.default,{span:8},"家长姓名"),X.default.createElement(N.default,{span:8},"亲缘关系"),X.default.createElement(N.default,{span:8},"联系方式")),e.map(function(e,t){return X.default.createElement(T.default,{key:t},X.default.createElement(N.default,{span:8},e.name),X.default.createElement(N.default,{span:8},e.relationship),X.default.createElement(N.default,{span:8},e.tel))}));return X.default.createElement(L.default,{content:t,title:"家长信息",trigger:"hover"},X.default.createElement("div",{className:"operation"},X.default.createElement("span",{style:{color:"#1cc09f",fontWeight:600}},e[0].name)))}return""}},{title:"操作",key:"operation",render:function(t){return X.default.createElement("div",{style:{fontSize:16},className:"operation"},X.default.createElement("a",{title:"修改",onClick:function(){n.showCreateModal(t,"修改"+t.studentName+"信息",!0),n.setSelectGrade(t.grade);var e=t.birthday.split("-");n.setSelectYear(e[0]),n.setSelectMonth(e[1]),n.setEditingIndex()},style:{marginRight:8,color:"#b3b7dd"}},X.default.createElement(A.default,{type:"edit"})),X.default.createElement(y.default,{title:"确定删除该学生?",onConfirm:function(){return e.handleDelete([{studentId:t.studentId}])}},X.default.createElement("a",{title:"删除",style:{marginRight:8,color:"#b3b7dd"}},X.default.createElement(A.default,{type:"delete"}))))}}],D={name:"file",action:"/v3/fs/uploadStudentsFile?scenarioId="+this.props.scenarioId+"&schoolId="+this.props.currentSchoolId,withCredentials:!0,accept:".xlsx",supportServerRender:!0,onChange:function(t){if("done"===t.file.status?R.default.success(t.file.name+" 文件上传成功"):"error"===t.file.status&&R.default.error(t.file.name+" 文件上传失败"),t.file.response)if(0===t.file.response.retCode){R.default.success(t.file.name+" 学生信息导入成功"),n.showImportStudentModal();var a=e.props.studentTable.studentPagination.pagination,o=a.current,r=a.pageSize;e.state.grade.length&&e.setState({grade:[]}),e.state.sex&&e.setState({sex:""}),!he(e.props.studentTable.studentFilter)&&e.props.studentTableActions.saveStudentFilter(),e.fetchData(e.props.scenarioId,e.props.currentSchoolId,(o-1)*r,r)}else-1===t.file.response.retCode&&(R.default.error(t.file.name+" 学生信息导入失败："+t.file.response.result),n.showImportStudentModal())}},x=[];return"all"!==b&&(x.push(X.default.createElement(fe,{key:"all",value:""},"全部")),S[b].map(function(e){x.push(X.default.createElement(fe,{key:e.classId+"班",value:e.classId},e.classId))})),this.props.isModel?X.default.createElement(v.default,{rowKey:function(e){return e.studentId+"Info"},columns:_,dataSource:o,pagination:{total:h,showSizeChanger:!0,showQuickJumper:!0},size:"middle",loading:a.loading}):X.default.createElement(r.default,{title:"学生管理",style:{minHeight:784},extra:X.default.createElement("p",{style:{fontSize:15}},"当前年级类型   ：",X.default.createElement("strong",{style:{color:"#1cc09f"}},this.props.gradeTypeString)),className:"student-manage"},X.default.createElement(m.default,{visible:s.visible,title:s.title,onCancel:function(){n.handleCancel(),s.isAdd&&n.addNewHouseholder(),s.editingIndex&&n.setEditingIndex(),s.selectGrade&&n.setSelectGrade(),s.selectYear&&n.setSelectYear(),s.selectMonth&&n.setSelectMonth()},confirmLoading:s.confirmLoading,footer:[X.default.createElement(C.default,{key:"back",onClick:function(){n.handleCancel(),s.isAdd&&n.addNewHouseholder(),s.editingIndex&&n.setEditingIndex(),s.selectGrade&&n.setSelectGrade(),s.selectYear&&n.setSelectYear(),s.selectMonth&&n.setSelectMonth()}},"取消"),X.default.createElement(C.default,{key:"submit",type:"primary",onClick:function(){e.handleCreateStudent(),s.selectYear&&n.setSelectYear(),s.selectMonth&&n.setSelectMonth()},loading:s.confirmLoading},"确定")]},s.visible?X.default.createElement(ne.default,{ref:function(t){e.studentForm=t},setEditingIndex:n.setEditingIndex,editingIndex:s.editingIndex,isAdd:s.isAdd,addNewHouseholder:n.addNewHouseholder,student:s.student,gradeOption:g,classOption:S,selectGrade:s.selectGrade,setSelectGrade:n.setSelectGrade,selectYear:s.selectYear,setSelectYear:n.setSelectYear,selectMonth:s.selectMonth,setSelectMonth:n.setSelectMonth,isModify:s.isModify}):null),X.default.createElement(m.default,{title:l.leaveInfo.studentName+"请假信息",visible:l.visible,onCancel:function(){n.handleStudentLeaveCancel(),l.unLeave&&n.handleStudentToUnLeave()},footer:[X.default.createElement(C.default,{key:"back",onClick:function(){n.handleStudentLeaveCancel(),l.unLeave&&n.handleStudentToUnLeave()}},"取消"),X.default.createElement(C.default,{key:"submit",type:"primary",onClick:this.handleStudentLeave,loading:l.confirmLoading},"确定")]},l.visible?X.default.createElement(re.default,{ref:function(t){e.studentLeaveForm=t},leaveInfo:l.leaveInfo,toBeLeave:l.toBeLeave,handleStudentToBeLeave:n.handleStudentToBeLeave,unLeave:l.unLeave,handleStudentToUnLeave:n.handleStudentToUnLeave,disableStartTime:l.disableStartTime,disableEndTime:l.disableEndTime,setDisableStartTimeAndEndTime:n.setDisableStartTimeAndEndTime}):null),X.default.createElement(m.default,{title:"导入学生信息",visible:u.visible,onCancel:function(){return n.showImportStudentModal()},footer:null},u.visible?X.default.createElement(p.default,{style:{margin:"20px 0px -20px 40px "}},X.default.createElement(p.default.Item,{dot:X.default.createElement(A.default,{type:"download",style:{fontSize:"16px"}})},"请先下载模板文件, 并按模版文件要求的格式填写",X.default.createElement("a",{href:"/v3/fs/downloadstudentstemplate",target:"_blank",style:{color:"#FFF"}},X.default.createElement(C.default,{type:"primary",icon:"download",style:{marginLeft:10}},"下载模板"))),X.default.createElement(p.default.Item,{dot:X.default.createElement(A.default,{type:"edit",style:{fontSize:"16px"}})},"编辑······",X.default.createElement("span",{style:{color:"#F4364C"}},"(请确保导入的学生的班级已配置)")),X.default.createElement(p.default.Item,{dot:X.default.createElement(A.default,{type:"upload",style:{fontSize:"16px"}})},"上传编辑好的模板文件",X.default.createElement(c.default,D,X.default.createElement(C.default,{type:"primary",icon:"upload",style:{marginLeft:10}},"选择文件...")))):null),X.default.createElement(m.default,{title:"导出学生信息",visible:f.visible,onCancel:function(){n.showExportStudentModal(),n.setExportSelectGrade("all"),n.setSelectClassId()},footer:null,width:430},X.default.createElement("div",{id:"exportStudentModal"},X.default.createElement(q.default,{getPopupContainer:function(){return document.getElementById("exportStudentModal")},value:b,size:"large",style:{width:120,margin:"0px 15px"},onChange:function(e){n.setExportSelectGrade(e),n.setSelectClassId()}},X.default.createElement(fe,{value:"all"},"全校"),g.map(function(e){return X.default.createElement(fe,{key:""+e,value:""+e},e)})),X.default.createElement(q.default,{value:w,size:"large",getPopupContainer:function(){return document.getElementById("exportStudentModal")},style:{width:120,margin:"0px 20px 0px 5px"},onChange:function(e){return n.setSelectClassId(e)}},x),X.default.createElement(C.default,{type:"primary",size:"large",style:{height:30,width:90},loading:f.confirmLoading,onClick:function(){if("all"===b)n.exportStudentList(e.props.scenarioId,e.props.currentSchoolId).then(function(e){0===e.value.retCode&&n.showExportStudentModal()}).catch(function(e){R.default.error("导出学生信息文件失败："+e.message),n.showExportStudentModal()});else{var t={};""===w?t={baseGrade:S[b][0].baseGrade,years:S[b][0].years}:S[b].some(function(e){return w===e.classId&&(t=e),w===e.classId}),n.exportStudentList(e.props.scenarioId,e.props.currentSchoolId,t).then(function(e){0===e.value.retCode&&n.showExportStudentModal()}).catch(function(e){R.default.error("导出学生信息文件失败："+e.message),n.showExportStudentModal()})}}},"导出")),X.default.createElement("iframe",{src:""+a.downloadFilePath,style:{display:"none"}})),X.default.createElement(i.default,{spinning:a.loading},X.default.createElement("div",{style:{width:"100%",height:30,margin:"5px 0px 15px 0px"}},X.default.createElement(y.default,{title:"确定删除?",onConfirm:function(){return e.handleDelete(a.batchStudentList,!0)}},X.default.createElement(C.default,{type:"primary",icon:"delete",style:{height:30,width:74,float:"right",fontWeight:600,fontSize:14},disabled:a.deleteDisabled},"删除")),X.default.createElement(C.default,{type:"primary",icon:"download",style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14},onClick:0!==g.length?function(){return n.showExportStudentModal(!0)}:function(){d.default.warning({message:"提示",description:"当前班级列表为空，请先配置班级信息"})}},"导出"),X.default.createElement(C.default,{type:"primary",icon:"upload",style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14},onClick:0!==g.length?function(){return n.showImportStudentModal(!0)}:function(){d.default.warning({message:"提示",description:"当前班级列表为空，请先配置班级信息"})}},"导入"),X.default.createElement(C.default,{type:"primary",icon:"plus",style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14},onClick:0!==g.length?n.showCreateModal:function(){d.default.warning({message:"提示",description:"当前班级列表为空，请先配置班级信息"})}},"添加")),X.default.createElement(v.default,{rowKey:"studentId",rowSelection:M,columns:_,dataSource:o,pagination:{total:h,showSizeChanger:!0,showQuickJumper:!0,current:a.studentPagination.pagination.current},onChange:this.handleTableChange})))}}]),t}(X.default.Component),Se={studentTable:Q.PropTypes.object.isRequired,scenarioId:Q.PropTypes.string.isRequired,currentSchoolId:Q.PropTypes.string.isRequired,classTableData:Q.PropTypes.array.isRequired,gradeTypeString:Q.PropTypes.string,isModel:Q.PropTypes.bool,classInfo:Q.PropTypes.object,studentTableActions:Q.PropTypes.object.isRequired,classTableActions:Q.PropTypes.object.isRequired};ve.propTypes=Se,t.default=(0,te.connect)(function(e){return{studentTable:e.schoolManage.studentTable,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,classTableData:e.schoolManage.classTable.classTableData,gradeTypeString:e.schoolManage.classTable.gradeTypeString}},function(e){return{studentTableActions:(0,ee.bindActionCreators)(ie,e),classTableActions:(0,ee.bindActionCreators)({fetchGradeConfig:se.fetchGradeConfig,setGradeTypeString:se.setGradeTypeString,fetchClassTableData:se.fetchClassTableData},e)}})(ve)},390:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(204),a(203)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=(a(85),a(74)),C=n(I),b=a(0),E=n(b),w=C.default.Group,A=function(e){function t(){var e,a,n,o;(0,p.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),n.state={mode:"门内",visible:!1,cameraData:[],targetKeys:[],bindLoading:!1},n.getAreaCameraData=function(){for(var e=[],t=[],a=n.props.areaCameraList,o=n.props.unbindCameraList,r=o.concat(a),l=0;l<r.length;l++){var i=r[l],s={key:i.cameraName+":"+i.cameraIp+":"+i.cameraPort,title:i.cameraName+" - "+i.cameraIp+":"+i.cameraPort};t.push(s)}for(var d=0;d<a.length;d++){var u=a[d];e.push(u.cameraName+":"+u.cameraIp+":"+u.cameraPort)}n.setState({cameraData:t,targetKeys:e})},n.getInDoorCameraData=function(){for(var e=[],t=[],a=[],o=n.props.unbindCameraList,r=0;r<n.props.doorCameraList.length;r++){var l=n.props.doorCameraList[r];"门内"===l.placeType&&(a.push(l),e.push(l.cameraName+":"+l.cameraIp+":"+l.cameraPort))}for(var i=o.concat(a),s=0;s<i.length;s++){var d=i[s],u={key:d.cameraName+":"+d.cameraIp+":"+d.cameraPort,title:d.cameraName+" - "+d.cameraIp+":"+d.cameraPort};t.push(u)}n.setState({cameraData:t,targetKeys:e})},n.getOutDoorCameraData=function(){for(var e=[],t=[],a=[],o=n.props.unbindCameraList,r=0;r<n.props.doorCameraList.length;r++){var l=n.props.doorCameraList[r];"门外"===l.placeType&&(a.push(l),e.push(l.cameraName+":"+l.cameraIp+":"+l.cameraPort))}for(var i=o.concat(a),s=0;s<i.length;s++){var d=i[s],u={key:d.cameraName+":"+d.cameraIp+":"+d.cameraPort,title:d.cameraName+" - "+d.cameraIp+":"+d.cameraPort};t.push(u)}n.setState({cameraData:t,targetKeys:e})},n.handleChange=function(e,t,a){if("right"===t){for(var o=[],r=0;r<a.length;r++){var l=a[r].split(":");o.push({cameraName:l[0]})}n.setState({bindLoading:!0}),"crowde"===n.props.areaType?n.props.bindCameraToArea(n.props.scenarioId,n.props.schoolId,n.props.areaName,o).then(function(e){n.setState({bindLoading:!1}),d.default.success("绑定摄像头成功!"),n.props.fetchUnbindCameraList(n.props.scenarioId,n.props.schoolId)}).catch(function(e){n.getAreaCameraData(),n.setState({bindLoading:!1}),d.default.error("绑定摄像头失败: "+e.message)}):"door"===n.props.areaType&&n.props.bindCameraToDoor(n.props.scenarioId,n.props.schoolId,n.props.doorName,n.state.mode,o).then(function(e){n.setState({bindLoading:!1}),d.default.success("绑定摄像头成功!"),n.props.getDoorCameraList(n.props.scenarioId,n.props.schoolId,n.props.doorName),n.props.fetchUnbindCameraList(n.props.scenarioId,n.props.schoolId)}).catch(function(e){"门内"===n.state.mode?n.getInDoorCameraData():n.getOutDoorCameraData(),n.setState({bindLoading:!1}),d.default.error("绑定摄像头失败: "+e.message)})}else if("left"===t){for(var i=[],s=0;s<a.length;s++){var u=a[s].split(":");i.push({cameraName:u[0]})}n.setState({bindLoading:!0}),"crowde"===n.props.areaType?n.props.unbindCameraFromArea(n.props.scenarioId,n.props.schoolId,n.props.areaName,i).then(function(e){n.setState({bindLoading:!1}),d.default.success("解绑摄像头成功!"),n.props.fetchUnbindCameraList(n.props.scenarioId,n.props.schoolId)}).catch(function(t){e=e.concat(a),n.setState({targetKeys:e,bindLoading:!1}),d.default.error("解绑摄像头失败: "+t.message)}):"door"===n.props.areaType&&n.props.unbindCameraFromDoor(n.props.scenarioId,n.props.schoolId,n.props.doorName,n.state.mode,i).then(function(e){n.setState({bindLoading:!1}),d.default.success("解绑摄像头成功!"),n.props.getDoorCameraList(n.props.scenarioId,n.props.schoolId,n.props.doorName),n.props.fetchUnbindCameraList(n.props.scenarioId,n.props.schoolId)}).catch(function(t){e=e.concat(a),n.setState({targetKeys:e,bindLoading:!1}),d.default.error("解绑摄像头失败: "+t.message)})}n.setState({targetKeys:e})},n.onModeChange=function(e){n.setState({mode:e.target.value}),"门内"===e.target.value?n.getInDoorCameraData():n.getOutDoorCameraData()},o=a,(0,v.default)(n,o)}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;"crowde"===this.props.areaType?this.props.getAreaCameraList(this.props.scenarioId,this.props.schoolId,this.props.areaName).then(function(t){e.getAreaCameraData()}).catch(function(e){}):"door"===this.props.areaType&&this.props.getDoorCameraList(this.props.scenarioId,this.props.schoolId,this.props.doorName).then(function(t){"门内"===e.state.mode?e.getInDoorCameraData():e.getOutDoorCameraData()}).catch(function(e){})}},{key:"render",value:function(){var e=E.default.createElement(w,{onChange:this.onModeChange,value:this.state.mode},E.default.createElement(C.default,{value:"门内"},"门内"),E.default.createElement(C.default,{value:"门外"},"门外"));return E.default.createElement("div",null,E.default.createElement(r.default,{spinning:this.state.bindLoading},"door"===this.props.areaType?e:null,E.default.createElement(i.default,{dataSource:this.state.cameraData,showSearch:!0,searchPlaceholder:"搜索",listStyle:{width:260,height:300},titles:["摄像头名称-IP地址:端口号(未绑定)","摄像头名称-IP地址:端口号(已绑定)"],operations:["绑定","解绑"],targetKeys:this.state.targetKeys,onChange:this.handleChange,render:function(e){return e.title}})))}}]),t}(b.Component);t.default=A},391:function(e,t,a){"use strict";function n(e,t){return function(a){return a({type:b,payload:I.getClassRoomList(e,t)})}}function o(e,t,a){return function(n){return n({type:E,payload:I.addClassRoom(e,t,a)})}}function r(e,t,a){return function(n){return n({type:w,payload:I.delClassRoom(e,t,a)})}}function l(e,t,a){return function(n){return n({type:L,payload:I.getClassRoomCGMConfig(e,t,a)})}}function i(e,t){return function(a){return a({type:_,payload:I.getALLClassRoomCGMConfig(e,t)})}}function s(e,t,a,n){return function(o){return o({type:T,payload:I.addClassRoomCGM(e,t,a,n)})}}function d(e,t,a,n){return function(o){return o({type:D,payload:I.delClassRoomCGM(e,t,a,n)})}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:A,payload:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:M,payload:e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"添加教室";return{type:N,payload:e,title:t}}function p(){return{type:x}}function h(){return{type:O}}function m(){return{type:k}}function g(){return{type:R}}Object.defineProperty(t,"__esModule",{value:!0});var v=a(4),S=function(e){return e&&e.__esModule?e:{default:e}}(v);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case R:return(0,S.default)({},e,{classroomData:[]});case F(E):return(0,S.default)({},e,{classroomCreateForm:(0,S.default)({},e.classroomCreateForm,{confirmLoading:!0})});case F(b):return(0,S.default)({},e,{loading:!0});case P(b):return(0,S.default)({},e,{loading:!1,classroomData:n});case G(b):return(0,S.default)({},e,{loading:!1});case P(L):return(0,S.default)({},e,{classRoomCGMList:t.payload});case P(_):return(0,S.default)({},e,{allClassRoomCGMList:t.payload});case P(T):case P(D):return(0,S.default)({},e);case A:return(0,S.default)({},e,{classRoomList:n});case M:return(0,S.default)({},e,{selectedRowKeys:n});case N:return(0,S.default)({},e,{classroomCreateForm:{visible:!0,classRoomName:n,title:t.title}});case x:return(0,S.default)({},e,{classroomCreateForm:{visible:!1,confirmLoading:!1}});case k:return(0,S.default)({},e,{classroomCreateForm:(0,S.default)({},e.classroomCreateForm,{confirmLoading:!0})});case O:return(0,S.default)({},e,{classroomCreateForm:(0,S.default)({},e.classroomCreateForm,{visible:!1,selectDoorType:""})});default:return e}},t.fetchClassroomTableData=n,t.addClassroomToServer=o,t.deleteClassroomToServer=r,t.getCGMListByClassRoomName=l,t.getAllClassRoomCGM=i,t.bindCGMToClassRoom=s,t.unbindCGMFromClassRoom=d,t.setBatchClassRoomList=u,t.saveSelectRowKeys=c,t.showCreateModal=f,t.hideCreateModal=p,t.handleCancel=h,t.handleCreate=m,t.destoryTableData=g;var y=a(31),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),C={classroomData:[],classRoomList:[],selectedRowKeys:[],loading:!0,classroomCreateForm:{visible:!1,classRoomName:"",title:"",confirmLoading:!1},classRoomCGMList:[],allClassRoomCGMList:[]},b="areaSetting/Classroom/FETCH_CLASSROOM_DATA",E="areaSetting/Classroom/ADD_CLASSROOM",w="areaSetting/Classroom/DELETE_CLASSROOM",A="areaSetting/Classroom/BATCH_DOOR_NAME_LIST",M="areaSetting/Classroom/SAVE_SELECT_ROWKEYS",L="settings/Classroom/FETCH_CLASSROOMCGMLIST",_="settings/Classroom/FETCH_ALLCLASSROOMCGMLIST",T="settings/Classroom/FETCH_BIND_CLASSROOMCGM",D="settings/Classroom/FETCH_UNBIND_CLASSROOMCGM",N="areaSetting/Classroom/SHOW_CREATEMODAL",x="areaSetting/Classroom/HIDE_CREATEMODAL",k="areaSetting/Classroom/HANDLE_CRAETE",O="areaSetting/Classroom/HANDLE_CANCEL",R="areaSetting/Classroom/DESTORY_TABLE_DATA",F=function(e){return e+"_PENDING"},P=function(e){return e+"_FULFILLED"},G=function(e){return e+"_REJECTED"}},392:function(e,t,a){"use strict";function n(e,t){var a={data:{},sort:[]};if(t&&t.length>0)for(var n=0;n<t.length;n++){var o=t[n].areaName;a.data[o]?a.data[o]=(0,I.default)({},a.data[o],t[n]):(a.data[o]=(0,I.default)({},t[n]),a.sort.push(o))}return a}function o(e,t){if(e.data[t.areaName])return e;var a=(0,I.default)({},e);return a.data[t.areaName]=(0,I.default)({},t),a.sort.push(t.areaName),a}function r(e,t){if(t&&e.data[t.areaName]){var a=(0,I.default)({},e),n=t.areaName;return a.data[n]=(0,I.default)({},a.data[n],t),a}return e}function l(e,t){if(t.length>0){for(var a=(0,I.default)({},e),n=0;n<t.length;n++){var o=t[n].areaName;a.data[o]&&(delete a.data[o],a.sort.splice(a.sort.indexOf(o),1))}return a}return e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];switch(t.type){case R(w):return(0,I.default)({},e,{areaList:n(e.areaList,t.payload)});case R(_):return(0,I.default)({},e,{areaModuleList:t.payload});case R(T):return(0,I.default)({},e,{allAreaModuleList:t.payload});case R(A):return(0,I.default)({},e,{areaList:o(e.areaList,t.payload)});case R(M):return(0,I.default)({},e,{areaList:r(e.areaList,t.payload)});case R(L):return(0,I.default)({},e,{areaList:l(e.areaList,t.payload)});case R(D):case R(N):return(0,I.default)({},e);case R(x):return(0,I.default)({},e,{areaCameraList:t.payload});case R(k):case R(O):return(0,I.default)({},e);default:return e}}function s(e,t){return function(a){return a({type:w,payload:b.getAreaConfig(e,t)})}}function d(e,t,a){return function(n){return n({type:A,payload:b.addAreaConfig(e,t,a)})}}function u(e,t,a){return function(n){return n({type:M,payload:b.modifyAreaConfig(e,t,a)})}}function c(e,t,a){return function(n){return n({type:L,payload:b.deleteAreaConfig(e,t,a)})}}function f(e,t,a){return function(n){return n({type:_,payload:b.getAreaModuleConfig(e,t,a)})}}function p(e,t){return function(a){return a({type:T,payload:b.getAllAreaModule(e,t)})}}function h(e,t,a,n){return function(o){return o({type:D,payload:b.addCGMArea(e,t,a,n)})}}function m(e,t,a,n){return function(o){return o({type:N,payload:b.delCGMArea(e,t,a,n)})}}function g(e,t,a){return function(n){return n({type:x,payload:b.getCameraListByAreaName(e,t,a)})}}function v(e,t,a,n){return function(o){return o({type:k,payload:b.bindAreaCameras(e,t,a,n)})}}function S(e,t,a,n){return function(o){return o({type:O,payload:b.unbindAreaCameras(e,t,a,n)})}}Object.defineProperty(t,"__esModule",{value:!0});var y=a(4),I=function(e){return e&&e.__esModule?e:{default:e}}(y);t.default=i,t.getAreaList=s,t.addArea=d,t.modifyArea=u,t.deleteArea=c,t.getAreaModuleList=f,t.getAllAreaModuleList=p,t.addCGMToArea=h,t.delCGMFromArea=m,t.getAreaCameraList=g,t.bindCameraToArea=v,t.unbindCameraFromArea=S;var C=a(31),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C),E={areaList:{data:{},sort:[]},areaModuleList:[],allAreaModuleList:[],areaCameraList:[]},w="settings/crowdeArea/FETCH_GETAREALIST",A="settings/crowdeArea/FETCH_AREALIST",M="settings/crowdeArea/FETCH_MODIFYAREA",L="settings/crowdeArea/FETCH_DELETEAREA",_="settings/crowdeArea/FETCH_AREAMODULELIST",T="settings/crowdeArea/FETCH_ALLAREAMODULELIST",D="settings/crowdeArea/FETCH_ADDCGM",N="settings/crowdeArea/FETCH_DELCGM",x="settings/crowdeArea/FETCH_AREACAMERALIST",k="settings/crowdeArea/FETCH_BIND_AREACAMERA",O="settings/crowdeArea/FETCH_UNBIND_AREACAMERA",R=function(e){return e+"_FULFILLED"}},393:function(e,t,a){"use strict";function n(e,t){return function(a){return a({type:L,payload:A.getDoorConfig(e,t)})}}function o(e,t,a){return function(n){return n({type:_,payload:A.addDoorBaseConfig(e,t,a)})}}function r(e,t,a){return function(n){return n({type:T,payload:A.modifyDoorBaseConfig(e,t,a)})}}function l(e,t,a){return function(n){return n({type:D,payload:A.delDoorBaseConfig(e,t,a)})}}function i(e,t,a){return function(n){return n({type:k,payload:A.getDoorModuleConfig(e,t,a)})}}function s(e,t){return function(a){return a({type:O,payload:A.getAllDoorModule(e,t)})}}function d(e,t,a,n,o,r){return function(l){return l({type:R,payload:A.addDoorReaders(e,t,a,n,o,r)})}}function u(e,t,a,n){return function(o){return o({type:F,payload:A.delDoorReaders(e,t,a,n)})}}function c(e,t,a){return function(n){return n({type:P,payload:A.getCameraListByDoorName(e,t,a)})}}function f(e,t,a,n,o){return function(r){return r({type:G,payload:A.bindDoorCameras(e,t,a,n,o)})}}function p(e,t,a,n,o){return function(r){return r({type:H,payload:A.unbindDoorCameras(e,t,a,n,o)})}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:N,payload:e}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:x,payload:e}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"添加校门",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:V,payload:e,title:t,isModify:a}}function v(){return{type:B}}function S(){return{type:z}}function y(){return{type:W}}function I(e){return{type:U,payload:e}}function C(){return{type:j}}Object.defineProperty(t,"__esModule",{value:!0});var b=a(4),E=function(e){return e&&e.__esModule?e:{default:e}}(b);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case j:return(0,E.default)({},e,{schoolGateData:[]});case K(_):case K(T):return(0,E.default)({},e,{schoolGateCreateForm:(0,E.default)({},e.schoolGateCreateForm,{confirmLoading:!0})});case K(L):return(0,E.default)({},e,{loading:!0});case q(L):return(0,E.default)({},e,{loading:!1,schoolGateData:n});case Y(L):return(0,E.default)({},e,{loading:!1});case q(k):return(0,E.default)({},e,{doorModuleList:t.payload});case q(P):return(0,E.default)({},e,{doorCameraList:t.payload});case q(G):case q(H):return(0,E.default)({},e);case q(O):return(0,E.default)({},e,{allDoorModuleList:t.payload});case q(R):case q(F):return(0,E.default)({},e);case N:return(0,E.default)({},e,{doorNameList:n});case x:return(0,E.default)({},e,{selectedRowKeys:n});case V:return(0,E.default)({},e,{schoolGateCreateForm:{visible:!0,schoolGateInfo:n,title:t.title,isModify:t.isModify}});case B:return(0,E.default)({},e,{schoolGateCreateForm:{visible:!1,confirmLoading:!1,isModify:!1}});case W:return(0,E.default)({},e,{schoolGateCreateForm:(0,E.default)({},e.schoolGateCreateForm,{confirmLoading:!0})});case z:return(0,E.default)({},e,{schoolGateCreateForm:(0,E.default)({},e.schoolGateCreateForm,{visible:!1,selectDoorType:""})});case U:return(0,E.default)({},e,{schoolGateCreateForm:(0,E.default)({},e.schoolGateCreateForm,{selectDoorType:n})});default:return e}},t.fetchSchoolGateTableData=n,t.addSchoolGateToServer=o,t.modifySchoolGateToServer=r,t.deleteSchoolGateToServer=l,t.getDoorModuleList=i,t.getAllDoorModuleList=s,t.addReadersToDoor=d,t.delReadersFromDoor=u,t.getDoorCameraList=c,t.bindCameraToDoor=f,t.unbindCameraFromDoor=p,t.setBatchDoorNameList=h,t.saveSelectRowKeys=m,t.showCreateModal=g,t.hideCreateModal=v,t.handleCancel=S,t.handleCreate=y,t.setSelectDoorType=I,t.destoryTableData=C;var w=a(31),A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(w),M={schoolGateData:[],doorNameList:[],selectedRowKeys:[],loading:!0,deleteDisabled:!0,schoolGateCreateForm:{visible:!1,schoolGateInfo:{},title:"",isModify:!1,confirmLoading:!1,selectDoorType:""},doorModuleList:[],allDoorModuleList:[],doorCameraList:[]},L="areaSetting/SchoolGate/FETCH_SCHOOL_GATE_DATA",_="areaSetting/SchoolGate/ADD_SCHOOL_GATE",T="areaSetting/SchoolGate/MODIFY_SCHOOL_GATE",D="areaSetting/SchoolGate/DELETE_SCHOOL_GATE",N="areaSetting/SchoolGate/BATCH_DOOR_NAME_LIST",x="areaSetting/SchoolGate/SAVE_SELECT_ROWKEYS",k="settings/schoolGate/FETCH_DOORMODULELIST",O="settings/schoolGate/FETCH_ALLDOORMODULELIST",R="settings/schoolGate/FETCH_ADDCGMDOOR",F="settings/schoolGate/FETCH_DELCGMDOOR",P="settings/schoolGate/FETCH_DOORCAMERALIST",G="settings/schoolGate/FETCH_BIND_DOORCAMERA",H="settings/schoolGate/FETCH_UNBIND_DOORCAMERA",V="areaSetting/SchoolGate/SHOW_CREATEMODAL",B="areaSetting/SchoolGate/HIDE_CREATEMODAL",W="areaSetting/SchoolGate/HANDLE_CRAETE",z="areaSetting/SchoolGate/HANDLE_CANCEL",U="areaSetting/SchoolGate/SET_SELECT_DOOR_TYPE",j="areaSetting/SchoolGate/DESTORY_TABLE_DATA",K=function(e){return e+"_PENDING"},q=function(e){return e+"_FULFILLED"},Y=function(e){return e+"_REJECTED"}},394:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;switch(arguments[1].type){case d:return(0,i.default)({},e,{isVisible:!0});case u:return(0,i.default)({},e,{isVisible:!1});default:return e}}function o(){return{type:d}}function r(){return{type:u}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.showAddCamera=o,t.hideAddCamera=r;var s={isVisible:!1},d="Settings/CameraList/SHOW",u="Settings/CameraList/HIDE"},395:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;switch(arguments[1].type){case d:return(0,i.default)({},e,{isVisible:!0});case u:return(0,i.default)({},e,{isVisible:!1});default:return e}}function o(){return{type:d}}function r(){return{type:u}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.showAddModule=o,t.hideAddModule=r;var s={isVisible:!1},d="Settings/ModuleList/SHOW",u="Settings/ModuleList/HIDE"},396:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;switch(arguments[1].type){case d:return(0,i.default)({},e,{isVisible:!0});case u:return(0,i.default)({},e,{isVisible:!1});default:return e}}function o(){return{type:d}}function r(){return{type:u}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=n,t.showAddSensor=o,t.hideAddSensor=r;var s={isVisible:!1},d="Settings/SensorList/SHOW",u="Settings/SensorList/HIDE"},397:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=(a(117),a(130)),i=n(l),s=(a(37),a(35)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(1507),E=n(b);a(1616);var w=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.onDrag=function(e,t){a.setState({position:{x:t.x,y:t.y},popoverVisible:!1})},a.onStop=function(e,t){a.props.updateModulePosition({IGIM_SN:a.props.IG_SN+a.props.IM_SN,bind_x:t.x,bind_y:t.y})},a.onStart=function(){},a.unbind=function(){a.props.unbindModule({IGIM_SN:a.props.IG_SN+a.props.IM_SN,mapID:a.props.currentMapID}),a.props.updateBindModuleList()},a.handleVisibleChange=function(e){a.setState({popoverVisible:e})},a.state={deltaPosition:{x:0,y:0},position:{x:parseInt(a.props.bind_x),y:parseInt(a.props.bind_y)},popoverVisible:!1},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e={onDrag:this.onDrag,onStart:this.onStart,onStop:this.onStop},t=this.state.position,a={x:parseInt(this.props.bind_x),y:parseInt(this.props.bind_y)};return C.default.createElement(E.default,(0,r.default)({position:a,bounds:"parent"},e,{disabled:!this.props.isEditing}),C.default.createElement("div",{className:"box",style:{position:"absolute"}},C.default.createElement(i.default,{content:C.default.createElement("div",{style:{width:"100%"}},"当前坐标:",t.x+","+t.y,C.default.createElement(d.default,{size:"small",style:{float:"right",backgroundColor:"#ffcdd2",color:"#fd534e",display:this.props.isEditing?"":"none"},onClick:this.unbind},"移除")),title:C.default.createElement("div",{style:{marginTop:0,color:"#51adfe"}},"定位模块: "+this.props.location),visible:this.state.popoverVisible,trigger:"hover",onVisibleChange:this.handleVisibleChange},C.default.createElement("div",{className:"pin"}),C.default.createElement("div",{className:"pulse"}))))}}]),t}(I.Component);t.default=w},398:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;switch(arguments[1].type){case c:return(0,d.default)({},e,{isVisible:!0});case f:return(0,d.default)({},e,{isVisible:!1});case p:return(0,d.default)({},e,{confirmLoading:!0});case h:return(0,d.default)({},e,{confirmLoading:!1});default:return e}}function o(){return{type:c}}function r(){return{type:f}}function l(){return{type:p}}function i(){return{type:h}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=n,t.showAddFloor=o,t.hideAddFloor=r,t.showConfirm=l,t.hideConfirm=i;var u={isVisible:!1,confirmLoading:!1},c="MAPEDIT/FLOORTABLE/SHOW",f="MAPEDIT/FLOORTABLE/HIDE",p="MAPEDIT/FLOORTABLE/CONFIRM",h="MAPEDIT/FLOORTABLE/UNCONFIRM"},399:function(e,t,a){"use strict";function n(e,t){var a=0;for(a=0;a<e.length;a++)if(e[a].appName===t)return a;return-1}function o(){return{type:E}}function r(){return{type:w}}function l(e,t,a){return function(n){return n({type:L,payload:C.addSubscribeAppName(e,t,a)})}}function i(e,t){return function(a){return a({type:_,payload:C.getSubscribeAppList(e,t)})}}function s(e,t,a){return function(n){return n({type:T,payload:C.delSubscribeAppName(e,t,a)})}}function d(e){return{type:A,payload:e}}function u(e){return{type:M,payload:e}}function c(e,t,a,n){return function(o){return o({type:D,payload:C.addSubscribeDetail(e,t,a,n)})}}function f(e,t,a){return function(n){return n({type:x,payload:C.getSubscribeListByAppName(e,t,a)})}}function p(e,t,a,n){return function(o){return o({type:N,payload:C.delSubscribeDetail(e,t,a,n)})}}function h(e,t){return{type:k,payload:{appCardValue:e,index:t}}}function m(e,t){return{type:O,payload:{appCardValue:e,index:t}}}function g(e,t,a,n){return function(o){return o({type:R,payload:C.modifySubscribeDetail(e,t,a,n)})}}function v(){return{type:F}}Object.defineProperty(t,"__esModule",{value:!0});var S=a(4),y=function(e){return e&&e.__esModule?e:{default:e}}(S);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,o=(t.payload,e.appCard),r=0;switch(a){case E:return(0,y.default)({},e,{appModalVisible:!0});case w:return(0,y.default)({},e,{appModalVisible:!1});case P(L):return(0,y.default)({},e);case G(L):return 0===t.payload.errCode&&o.push({appName:t.payload.appName,subscribeAddModVis:!1,subscribeTable:[]}),(0,y.default)({},e,{appCard:o});case H(L):case P(_):return(0,y.default)({},e);case G(_):return 0===t.payload.errCode&&(o=[],t.payload.appNameList.map(function(e){o.push({appName:e.appName,subscribeAddModVis:!1,subscribeTable:[]})})),(0,y.default)({},e,{appCard:o});case H(_):case P(T):return(0,y.default)({},e);case G(T):return 0===t.payload.errCode&&(r=n(o,t.payload.appName))>-1&&o.splice(r,1),(0,y.default)({},e,{appCard:o});case H(T):return(0,y.default)({},e);case A:return r=n(o,t.payload.appName),r>-1&&(o[r].subscribeAddModVis=!0),(0,y.default)({},e,{appCard:o});case M:return r=n(o,t.payload.appName),r>-1&&(o[r].subscribeAddModVis=!1),(0,y.default)({},e,{appCard:o});case P(D):return(0,y.default)({},e);case G(D):return 0===t.payload.errCode&&(r=n(o,t.payload.appName))>-1&&o[r].subscribeTable.push(t.payload.serverRowValue),(0,y.default)({},e,{appCard:o});case H(D):case P(x):return(0,y.default)({},e);case G(x):var l=[],i=void 0;return 0===t.payload.errCode&&(r=n(o,t.payload.appName))>-1&&(t.payload.subscribeList.map(function(e){i={subScribeType:e.subScribeType,messageApi:e.messageApi,method:e.method,Authentication:e.Authentication,subscribeVis:!1},void 0!==e.publishTime&&(i.publishTime=e.publishTime),"无认证"!==e.Authentication&&(i.userName=e.userName,i.password=e.password,i.confirm=e.password),l.push(i)}),o[r].subscribeTable=l),(0,y.default)({},e,{appCard:o});case H(x):case P(N):return(0,y.default)({},e);case G(N):var s=0;if(0===t.payload.errCode&&(r=n(o,t.payload.appName))>-1)for(s=0;s<o[r].subscribeTable.length;s++)o[r].subscribeTable[s].subScribeType===t.payload.subScribeType&&o[r].subscribeTable.splice(s,1);return(0,y.default)({},e,{appCard:o});case H(N):return(0,y.default)({},e);case k:return r=n(o,t.payload.appCardValue.appName),r>-1&&(o[r].subscribeTable[t.payload.index].subscribeVis=!0),(0,y.default)({},e,{appCard:o});case O:return r=n(o,t.payload.appCardValue.appName),r>-1&&(o[r].subscribeTable[t.payload.index].subscribeVis=!1),(0,y.default)({},e,{appCard:o});case P(R):return(0,y.default)({},e);case G(R):var d=0,u=t.payload.values;if(0===t.payload.errCode&&(r=n(o,t.payload.appName))>-1)for(d=0;d<o[r].subscribeTable.length;d++)o[r].subscribeTable[d].subScribeType===u.subScribeType&&(o[r].subscribeTable[d].messageApi=u.messageApi,o[r].subscribeTable[d].method=u.method,o[r].subscribeTable[d].Authentication=u.Authentication,"无认证"===u.Authentication&&void 0!==o[r].subscribeTable[d].userName&&(delete o[r].subscribeTable[d].userName,delete o[r].subscribeTable[d].password,delete o[r].subscribeTable[d].confirm),void 0!==u.publishTime&&(o[r].subscribeTable[d].publishTime=u.publishTime),void 0!==u.userName&&(o[r].subscribeTable[d].userName=u.userName),void 0!==u.password&&(o[r].subscribeTable[d].password=u.password,o[r].subscribeTable[d].confirm=u.confirm));return(0,y.default)({},e,{appCard:o});case H(R):return(0,y.default)({},e);case F:return(0,y.default)({},e,{appModalVisible:!1,appCard:[]});default:return e}},t.showCreateAPPModal=o,t.hideCreateAPPModal=r,t.addAppCard=l,t.getSubAppList=i,t.delAppCard=s,t.showAddServerModal=d,t.hideAddServerModal=u,t.addServerRow=c,t.getSubListByAppName=f,t.delSubDetail=p,t.showModifySerModal=h,t.hideModifySerModal=m,t.modifySubDetail=g,t.unInitApp=v;var I=a(31),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(I),b={appModalVisible:!1,appCard:[]},E="settings/NewApplication/SHOW_CREATE_APPMODAL",w="settings/NewApplication/HIDE_CREATE_APPMODAL",A="settings/NewApplication/SHOW_ADD_SUBSCRIBEMODAL",M="settings/NewApplication/HIDE_ADD_SUBSCRIBEMODAL",L="settings/NewApplication/ADD_APP_CARD/FETCH",_="settings/NewApplication/GET_SUB_APPLIST/FETCH",T="settings/NewApplication/DEL_APP_CARD/FETCH",D="settings/NewApplication/ADD_SUBSCRIBE_ROW/FETCH",N="settings/NewApplication/DEL_SUBSCRIBE_ROW/FETCH",x="settings/NewApplication/GET_SUBSCRIBE_BY_APPNAME/FETCH",k="settings/NewApplication/SHOW_MODIFY_SUBSCRIBEMODAL",O="settings/NewApplication/HIDE_MODIFY_SUBSCRIBEMODAL",R="settings/NewApplication/MODIFY_SUBSCRIBE_ROW/FETCH",F="settings/NewApplication/UN_INIT_APP",P=function(e){return e+"_PENDING"},G=function(e){return e+"_FULFILLED"},H=function(e){return e+"_REJECTED"}},400:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case C:return(0,u.default)({},e,{selectGrade:n});case b:return(0,u.default)({},e,{selectClassId:n});case w:return(0,u.default)({},e,{gradeOption:t.gradeOption,classOption:t.classOption});case E:return(0,u.default)({},e,{config:n});default:return e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:w,gradeOption:e,classOption:t}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return{type:C,payload:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:b,payload:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:E,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(4),u=n(d);t.gradeConfig=o,t.setGradeOptionAndClassOption=r,t.setSelectGrade=l,t.setSelectClassId=i,t.setGradeConfig=s;var c=a(17),f=a(382),p=n(f),h=a(383),m=n(h),g=a(381),v=n(g),S=a(380),y=n(S),I={selectGrade:"all",selectClassId:"",gradeOption:[],classOption:{},config:{}},C="health/HealthMonitorRedux/SET_SELECT_GRADE",b="health/HealthMonitorRedux/SET_SELECT_CLASSID",E="health/HealthMonitorRedux/SET_GRADE_CONFIG",w="health/HealthMonitorRedux/SET_GRADEOPTION_AND_CLASSOPTION";t.default=(0,c.combineReducers)({overView:p.default,stepCount:m.default,gradeConfig:o,healthDetail:v.default,setRanking:y.default})},401:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case v(g):return(0,i.default)({},e,{loading:!0});case S(g):return(0,i.default)({},e,{student:n,loading:!1});case y(g):return(0,i.default)({},e,{loading:!1});default:return e}}function r(e,t,a){return function(n){return n({type:g,payload:d.getOneStudentHealthReport(e,t,a)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=n(l);t.personalHealthDetail=o,t.fetchOneStudentHealthDetail=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u=a(17),c=a(385),f=n(c),p=a(384),h=n(p),m={loading:!0,student:{}},g="health/PersonalHealthDetailRedux/FETCH_ONE_STUENT_HEALTH_DETAIL",v=function(e){return e+"_PENDING"},S=function(e){return e+"_FULFILLED"},y=function(e){return e+"_REJECTED"};t.default=(0,u.combineReducers)({personalHealthDetail:o,personalStepCount:f.default,personalHeartRate:h.default})},402:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case g:return(0,d.default)({},e,{showScreenModal:n});case S:return(0,d.default)({},e,{gradeOption:n.gradeOption,classOption:n.classOption});case v:return(0,d.default)({},e,{isConfimBtnClicked:n});default:return e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:g,payload:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:v,payload:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:S,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),d=n(s);t.ClassroomContainer=o,t.showScreenModal=r,t.confimBtnIsClicked=l,t.saveTheGrade=i;var u=a(17),c=a(387),f=n(c),p=a(386),h=n(p),m={showScreenModal:!1,isConfimBtnClicked:!1,gradeOption:[]},g="Classroom/showScreenModal",v="Classroom/ScreenModal/confimBtnClicked",S="Classroom/saveTheGrade";t.default=(0,u.combineReducers)({ClassroomContainer:o,ScreenModal:f.default,ClassLive:h.default})},403:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.crowdeAreaActions=t.smartGatewayListActions=t.moduleListActions=t.sensorListActions=t.cameraListActions=t.mapsTableActions=t.mapUploadActions=t.mapsEditActions=void 0;var r=a(17),l=a(829),i=o(l),s=a(827),d=o(s),u=a(398),c=o(u),f=a(399),p=n(f),h=a(394),m=o(h),g=a(396),v=o(g),S=a(395),y=o(S),I=a(261),C=o(I),b=a(392),E=o(b),w=a(393),A=n(w),M=a(391),L=n(M);t.default=(0,r.combineReducers)({mapsEdit:i.default,mapUpload:d.default,mapsTable:c.default,newApplication:p.default,cameraList:m.default,sensorList:v.default,moduleList:y.default,smartGatewayList:C.default,crowdeArea:E.default,schoolGate:A.default,classroom:L.default}),t.mapsEditActions=i,t.mapUploadActions=d,t.mapsTableActions=c,t.cameraListActions=m,t.sensorListActions=v,t.moduleListActions=y,t.smartGatewayListActions=C,t.crowdeAreaActions=E},58:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.children;return this.props.unwrap&&(e=m.default.createElement("div",{className:"unwrap"},this.props.children)),m.default.createElement("div",{className:"content-wrapper"},e)}}]),t}(m.default.Component);t.default=g},681:function(e,t,a){var n=a(1146);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},682:function(e,t,a){var n=a(1159);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},683:function(e,t,a){var n=a(1161);"string"==typeof n&&(n=[[e.i,n,""]]);a(15)(n,{});n.locals&&(e.exports=n.locals)},684:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=a(0),r=n(o),l=a(19),i=a(842),s=n(i),d=a(839),u=n(d),c=(0,s.default)();(0,l.render)(r.default.createElement(u.default,{store:c}),document.getElementById("app"))},766:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(50),a(49)),r=n(o),l=(a(118),a(97)),i=n(l),s=(a(251),a(250)),d=n(s),u=(a(204),a(203)),c=n(u),f=(a(29),a(28)),p=n(f),h=(a(47),a(46)),m=n(h),g=(a(175),a(174)),v=n(g),S=(a(257),a(256)),y=n(S),I=(a(37),a(35)),C=n(I),b=(a(33),a(18)),E=n(b),w=(a(73),a(72)),A=n(w),M=a(92),L=n(M),_=a(4),T=n(_),D=a(205),N=n(D),x=(a(23),a(22)),k=n(x),O=a(13),R=n(O),F=a(1),P=n(F),G=a(9),H=n(G),V=a(3),B=n(V),W=a(2),z=n(W),U=(a(85),a(74)),j=n(U),K=a(0),q=n(K),Y=j.default.Group,J=function(e){function t(e){(0,P.default)(this,t);var a=(0,B.default)(this,(t.__proto__||(0,R.default)(t)).call(this,e));return a.showModal=function(){a.setState({visible:!0,mode:1,selectedRowKeys:[],selectedRows:[],bindData:[]}),1==a.state.mode?a.handleRefresh():a.getBindDevices()},a.handleOk=function(){for(var e=[],t=[],n=[],o=[],r=[],l=0;l<a.state.sourceData.length;l++){var i=a.state.sourceData[l];"bind"==i.action?(e.push({ICSn:i.IC_SN,IGName:i.IGName,IGSn:i.IG_SN}),t.push(i.IG_SN)):"unbind"==i.action&&(n.push({ICSn:i.IC_SN,IGName:i.IGName,IGSn:i.IG_SN}),o.push(i.IG_SN),r.push({ICSn:i.IC_SN,IGSn:i.IG_SN}))}if(0===e.length&&0===n.length)return void k.default.info("无改动");a.setState({loadingAuto:!0,isSubmitting:!0});var s=[];if(e.length>0){var d=new N.default(function(n,o){a.props.addIotNetworkDeviceList(a.props.scenarioId,a.props.schoolId,e).then(function(e){n(e),k.default.success("绑定网络设备成功");var o=a.state.sourceData.map(function(e,a){return t.indexOf(e.IG_SN)>=0?(0,T.default)({},e,{action:""}):e});a.setState({loadingAuto:!1,isSubmitting:!1,sourceData:o})}).catch(function(e){o("绑定网络设备失败: "+e.message),a.setState({loadingAuto:!1,isSubmitting:!1})})});s.push(d)}if(n.length>0){var u=new N.default(function(e,t){a.props.deleteBindCGMList({scenarioId:a.props.scenarioId,schoolId:a.props.schoolId,IGList:r}).then(function(r){a.props.deleteIotNetworkDeviceList(a.props.scenarioId,a.props.schoolId,n).then(function(t){e(t),k.default.success("解除绑定网络设备成功");var n=a.state.sourceData.map(function(e,t){return o.indexOf(e.IG_SN)>=0?(0,T.default)({},e,{action:""}):e});a.setState({loadingAuto:!1,isSubmitting:!1,sourceData:n})}).catch(function(e){t("解除绑定网络设备失败: "+e.message),a.setState({loadingAuto:!1,isSubmitting:!1})})}).catch(function(e){t("解除绑定模块失败: "+e.message)})});s.push(u)}N.default.all(s).then(function(e){a.handleRefresh()}).catch(function(e){k.default.error(e)})},a.handleCancel=function(){a.setState({visible:!1})},a.onModeChange=function(e){a.setState({mode:e.target.value}),1==e.target.value?a.handleRefresh():a.getBindDevices()},a.getBindDevices=function(){a.setState({loadingManual:!0,selectedRowKeys:[],selectedRows:[]}),a.props.getIotNetworkDeviceListBySchool({scenarioId:a.props.scenarioId,schoolId:a.props.schoolId}).then(function(e){for(var t=e.value,n=[],o=0;o<t.length;o++){var r=t[o];n.push({key:o,IC_SN:r.IC_SN,IG_SN:r.IG_SN,IGName:r.IGName})}a.setState({bindData:n,loadingManual:!1})}).catch(function(e){a.setState({loadingManual:!1}),k.default.error("请求已绑定网络设备失败: "+e.message)})},a.getDevicesForBind=function(){for(var e=[],t=[],n=a.props.ICList,o=0;o<n.sort.length;o++)for(var r=n.data[n.sort[o]],l=0;l<r.IGList.sort.length;l++){var i=r.IGList.data[r.IGList.sort[l]],s={key:i.IG_SN,ICName:r.ICName,IC_SN:r.IC_SN,IGName:i.IGName,IG_SN:i.IG_SN,action:"",chosen:i.bindSchool==a.props.schoolId,disabled:!!i.bindSchool&&i.bindSchool!=a.props.schoolId};s.chosen&&e.push(s.key),t.push(s)}a.setState({sourceData:t,targetKeys:e})},a.handleRefresh=function(){a.setState({isRefreshing:!0,loadingAuto:!0}),a.props.getAutoDevicesAndBindDevices().then(function(e){a.getDevicesForBind(),a.setState({isRefreshing:!1,loadingAuto:!1})}).catch(function(e){a.setState({isRefreshing:!1,loadingAuto:!1}),k.default.error(e)})},a.handleChange=function(e,t,n){for(var o=[].concat((0,L.default)(a.state.sourceData)),r=0;r<o.length;r++)n.indexOf(o[r].key)>=0&&(o[r].action?o[r].action="":o[r].action="right"==t?"bind":"unbind");a.setState({sourceData:o,targetKeys:e})},a.onDelete=function(e){a.setState({delLoading:!0});var t=[];t.push({ICSn:e.IC_SN,IGName:e.IGName,IGSn:e.IG_SN}),a.props.deleteBindCGMList({scenarioId:a.props.scenarioId,schoolId:a.props.schoolId,IGList:[{ICSn:e.IC_SN,IGSn:e.IG_SN}]}).then(function(e){a.props.deleteIotNetworkDeviceList(a.props.scenarioId,a.props.schoolId,t).then(function(e){a.getBindDevices(),a.setState({delLoading:!1}),k.default.success("解除绑定成功"),a.getBindDevices()}).catch(function(e){a.setState({delLoading:!1}),k.default.error("解除绑定失败: "+e.message)})}).catch(function(e){a.setState({delLoading:!1}),k.default.error("删除绑定模组失败: "+e.message)})},a.handleBatchDelete=function(){a.setState({batchDelLoading:!0});var e=a.state.selectedRows,t=[],n=[];if(e.length>0){for(var o=0;o<e.length;o++){var r=e[o];t.push({ICSn:r.IC_SN,IGName:r.IGName,IGSn:r.IG_SN}),n.push({ICSn:r.IC_SN,IGSn:r.IG_SN})}a.props.deleteBindCGMList({scenarioId:a.props.scenarioId,schoolId:a.props.schoolId,IGList:n}).then(function(e){a.props.deleteIotNetworkDeviceList(a.props.scenarioId,a.props.schoolId,t).then(function(e){a.getBindDevices(),k.default.success("解除绑定成功"),a.setState({batchDelLoading:!1,selectedRowKeys:[],selectedRows:[]})}).catch(function(e){k.default.error("解除绑定失败: "+e.message),a.setState({batchDelLoading:!1})})}).catch(function(e){k.default.error("删除绑定模组失败: "+e.message),a.setState({batchDelLoading:!1})})}},a.handleDeleteAll=function(){a.setState({delAllLoading:!0}),a.props.deleteBindCGMList({scenarioId:a.props.scenarioId,schoolId:a.props.schoolId}).then(function(e){a.props.deleteIotNetworkDeviceList(a.props.scenarioId,a.props.schoolId,[]).then(function(e){a.getBindDevices(),k.default.success("解除绑定成功"),a.setState({delAllLoading:!1,selectedRowKeys:[],selectedRows:[]})}).catch(function(e){k.default.error("解除绑定失败: "+e.message),a.setState({delAllLoading:!1})})}).catch(function(e){k.default.error("删除绑定模组失败: "+e.message),a.setState({delAllLoading:!1})})},a.afterClose=function(){a.setState({isRefreshing:!1,isSubmitting:!1,delLoading:!1,batchDelLoading:!1,loadingAuto:!1,loadingManual:!1,mode:1,sourceData:[],targetKeys:[],selectedRowKeys:[],selectedRows:[],bindData:[]})},a.onUploadChange=function(e){var t=e.fileList.length,n=t?[e.fileList[t-1]]:[];if(a.setState({fileList:n}),e.file.status,"done"===e.file.status){var o=e.file.response;0==o.retCode?(k.default.success("绑定网络设备成功"),a.getBindDevices()):k.default.error("绑定网络设备失败: "+o.result)}else"error"===e.file.status&&k.default.error(e.file.name+" 文件上传失败")},a.state={isRefreshing:!1,isSubmitting:!1,loadingAuto:!1,loadingManual:!1,delLoading:!1,batchDelLoading:!1,delAllLoading:!1,visible:!1,mode:1,sourceData:[],targetKeys:[],selectedRowKeys:[],selectedRows:[],bindData:[],fileList:[]},a}return(0,z.default)(t,e),(0,H.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[{title:"控制器",dataIndex:"IC_SN",key:"IC_SN"},{title:"网关",dataIndex:"IG_SN",key:"IG_SN"},{title:"操作",dataIndex:"operation",render:function(t,a,n){return q.default.createElement(A.default,{title:"解除绑定将删除所有相关的已添加模组, 确定解除绑定?",onConfirm:function(){return e.onDelete(a)}},q.default.createElement("a",{href:"#"},"解绑"))}}],a=this.state,n=a.selectedRowKeys,o=a.fileList,l=(this.props.scenarioId,this.props.schoolId,{name:"file",fileList:o,action:"/v3/fs/uploadManualApListFile?scenarioId="+this.props.scenarioId+"&schoolId="+this.props.schoolId,withCredentials:!0,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:this.onUploadChange}),s={selectedRowKeys:n,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})}},u=this.state.selectedRowKeys.length>0,f=q.default.createElement("div",null,q.default.createElement(p.default,{spinning:this.state.loadingManual||this.state.batchDelLoading||this.state.delLoading||this.state.delAllLoading},q.default.createElement(y.default,{style:{margin:"20px 0px -20px 40px "}},q.default.createElement(y.default.Item,{dot:q.default.createElement(E.default,{type:"download",style:{fontSize:"16px"}})},"请先下载模板文件, 并按模版文件要求的格式填写",q.default.createElement("a",{href:"/v3/fs/downloadmanualaplisttemplate",target:"_blank"},q.default.createElement(C.default,{type:"primary",style:{marginLeft:10}},"下载模板"))),q.default.createElement(y.default.Item,{dot:q.default.createElement(E.default,{type:"edit",style:{fontSize:"16px"}})},"编辑···"),q.default.createElement(y.default.Item,{dot:q.default.createElement(E.default,{type:"upload",style:{fontSize:"16px"}})},q.default.createElement(v.default,l,q.default.createElement("span",null,"上传编辑好的模板文件"),q.default.createElement(C.default,{type:"primary",style:{marginLeft:10}},q.default.createElement(E.default,{type:"upload"})," 选择文件...")))),q.default.createElement("div",null,q.default.createElement(A.default,{title:"解除绑定将删除所有相关的已添加模组, 确定解除绑定? ",onConfirm:this.handleBatchDelete,okText:"确定",cancelText:"取消"},q.default.createElement(C.default,{type:"primary",style:{marginTop:10,marginBottom:10},disabled:!u,loading:this.state.batchDelLoading},"解绑已选")),q.default.createElement(A.default,{title:"解除绑定将删除所有相关的已添加模组, 确定解除绑定? ",onConfirm:this.handleDeleteAll,okText:"确定",cancelText:"取消"},q.default.createElement(C.default,{type:"primary",disabled:!(this.state.bindData.length>0),style:{marginTop:10,marginBottom:10},loading:this.state.delAllLoading},"全部解绑"))),q.default.createElement(m.default,{rowSelection:s,columns:t,dataSource:this.state.bindData,size:"small"}))),h=q.default.createElement(p.default,{spinning:this.state.loadingAuto},q.default.createElement("div",null,q.default.createElement(c.default,{dataSource:this.state.sourceData,showSearch:!0,listStyle:{width:300,height:300},operations:["绑定","解绑"],targetKeys:this.state.targetKeys,onChange:this.handleChange,render:function(e){return e.IGName+"(SN:"+e.IG_SN+")"},searchPlaceholder:"搜索",notFoundContent:"列表为空"}),q.default.createElement(C.default,{type:"primary",style:{margin:5},onClick:this.handleRefresh,loading:this.state.isRefreshing},"刷新"),q.default.createElement(d.default,{message:"警告: 解除绑定网络设备将删除所有相关的已添加模组, 请谨慎操作!",type:"warning",showIcon:!0})));return q.default.createElement("div",null,q.default.createElement(i.default,{placement:"bottom",title:"绑定网络设备"},q.default.createElement("a",{className:"btn-floating",onClick:this.showModal,style:{backgroundColor:"#1cc09f"}},q.default.createElement("i",{className:"fa fa-link "}))),this.state.visible?q.default.createElement(r.default,{visible:!0,title:"绑定网络设备",width:720,onOk:this.handleOk,onCancel:this.handleCancel,afterClose:this.afterClose,footer:[1==this.state.mode?q.default.createElement(C.default,{key:"back",size:"large",onClick:this.handleCancel},"取消"):null,1==this.state.mode?q.default.createElement(A.default,{key:"confirm",title:"确定提交更改？",onConfirm:this.handleOk},q.default.createElement(C.default,{key:"submit",type:"primary",size:"large",loading:this.state.isSubmitting},"提交")):q.default.createElement(C.default,{key:"confirm",type:"primary",size:"large",onClick:this.handleCancel},"确定")]},q.default.createElement("div",null,q.default.createElement("span",null,"来源："),q.default.createElement(Y,{onChange:this.onModeChange,value:this.state.mode},q.default.createElement(j.default,{value:1},"自动获取"),q.default.createElement(j.default,{value:2},"手动添加"))),1==this.state.mode?h:f):null)}}]),t}(q.default.Component);t.default=J},767:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.initSchoolMap=function(){var e=null,t=new AMap.ContextMenu,n=null,o=null,r=a.props.handlePosition,l=a,i=null,s=null;if(a.props.initPosition){i={resizeEnable:!0,center:new AMap.LngLat(a.props.initPosition.lng,a.props.initPosition.lat),zoom:15}}else i={resizeEnable:!0,center:[120.197853,30.185527],zoom:11};e=new AMap.Map(a.refs.amapContainer,i),e.plugin("AMap.Geolocation",function(){s=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),e.addControl(s),AMap.event.addListener(s,"complete",l.onGeolocationComplete),AMap.event.addListener(s,"error",l.onGeolocationError),a.setState({geolocation:s})}),a.props.initPosition||s&&s.getCurrentPosition(),n=new AMap.Marker({map:e,position:e.getCenter(),draggable:!0}),n.on("dragend",function(t){e.setCenter(t.lnglat),r(t.lnglat)}),AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){e.addControl(new AMap.ToolBar)}),r(e.getCenter()),t.addItem("设为学校所在位置",function(t){if(a.state.marker)a.state.marker.setPosition(o),a.state.map.setCenter(o);else{var n=new AMap.Marker({map:e,position:o,draggable:!0});a.setState({marker:n})}r(o)},0),e.on("rightclick",function(a){t.open(e,a.lnglat),o=a.lnglat}),a.setState({map:e,marker:n})},a.onGeolocationComplete=function(e){if(a.state.marker)a.state.marker.setPosition(e.position);else{var t=new AMap.Marker({map:a.state.map,position:e.position,draggable:!0});t.on("dragend",function(e){a.state.map.setCenter(e.lnglat),a.props.handlePosition(e.lnglat)}),a.setState({marker:t})}},a.onGeolocationError=function(){},a.state={map:null,marker:null,geolocation:null},a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.initSchoolMap()}},{key:"componentWillUnmount",value:function(){this.state.map&&this.state.map.destroy()}},{key:"render",value:function(){return m.default.createElement("div",{ref:"amapContainer",style:{width:500,height:300}})}}]),t}(m.default.Component);t.default=g},768:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(50),a(49)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(251),a(250)),d=n(s),u=(a(118),a(97)),c=n(u),f=(a(37),a(35)),p=n(f),h=(a(23),a(22)),m=n(h),g=a(4),v=n(g),S=(a(41),a(48)),y=n(S),I=a(13),C=n(I),b=a(1),E=n(b),w=a(9),A=n(w),M=a(3),L=n(M),_=a(2),T=n(_),D=(a(65),a(64)),N=n(D),x=a(0),k=n(x),O=a(767),R=n(O);a(681);var F=a(99),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(F),G=N.default.Item,H=function(e){function t(){var e,a,n,o;(0,E.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,L.default)(this,(e=t.__proto__||(0,C.default)(t)).call.apply(e,[this].concat(l))),n.checkSchoolName=function(e,t,a){P.getStringByteLength(t)>32?a("学校名不能超过16个汉字或32个字符"):a()},o=a,(0,L.default)(n,o)}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentDidMount",value:function(){this.props.form.setFieldsValue({schoolName:this.props.schoolName})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}};return k.default.createElement(N.default,{style:{marginTop:"15px"}},k.default.createElement(G,(0,v.default)({},t,{label:"学校名称"}),e("schoolName",{rules:[{type:"string",required:!0,message:"请输入学校名称!"},{message:"仅支持中英文，数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:this.checkSchoolName}]})(k.default.createElement(y.default,{maxLength:"32"}))))}}]),t}(k.default.Component),V=N.default.create()(H),B=function(e){function t(e){(0,E.default)(this,t);var a=(0,L.default)(this,(t.__proto__||(0,C.default)(t)).call(this,e));return a.showModal=function(){a.setState({visible:!0}),"modify"==a.props.mode&&a.form&&a.form.setFieldsValue({schoolName:a.props.schoolInfo.schoolName})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){a.form.validateFields(function(e,t){if(!e){var n={schoolName:"",location_x:"",location_y:""};n.schoolName=t.schoolName,n.location_x=a.state.position.lat,n.location_y=a.state.position.lng,a.props.handleAddSchool(n).then(function(e){m.default.success("创建学校成功"),a.setState({visible:!1})}).catch(function(e){m.default.error("创建学校失败: "+e.message)})}})},a.handleModify=function(){a.form.validateFields(function(e,t){if(!e)if(a.props.schoolInfo.schoolMap[1],a.props.schoolInfo.schoolMap[0],a.props.schoolInfo.schoolName==t.schoolName&&a.props.schoolInfo.schoolMap[1]==a.state.position.lat&&a.props.schoolInfo.schoolMap[0]==a.state.position.lng)m.default.info("无改动");else{var n={schoolId:a.props.schoolInfo.schoolId,schoolName:"",location_x:"",location_y:""};n.schoolName=t.schoolName,n.location_x=a.state.position.lat,n.location_y=a.state.position.lng,a.props.handleModifySchool(n).then(function(){m.default.success("修改学校成功"),a.setState({visible:!1})}).catch(function(e){m.default.error("修改学校失败: "+e.message)})}})},a.handleClose=function(){a.form.resetFields()},a.handlePosition=function(e){a.setState({position:{lat:e.lat,lng:e.lng}})},a.state={visible:!1,position:{lat:0,lng:0},initPosition:null},a}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentWillMount",value:function(){if("modify"==this.props.mode){var e={lat:this.props.schoolInfo.schoolMap[1],lng:this.props.schoolInfo.schoolMap[0]};this.setState({initPosition:e})}}},{key:"render",value:function(){var e=this,t=null,a=null,n="";return"add"==this.props.mode?t={schoolId:"",button:k.default.createElement(p.default,{ref:"button",type:"primary",icon:"plus-circle-o",size:"large",onClick:this.showModal,style:{marginRight:"20px",borderRadius:"16px",display:"inline-block",background:"#1cc09f",border:"#1cc09f",height:"32px"}},"添加新学校"),title:"添加新学校",okText:"添加",onOk:this.handleCreate,afterClose:this.handleClose}:(t={schoolId:this.props.schoolInfo.schoolId,button:k.default.createElement(c.default,{placement:"bottomLeft",title:"修改学校"},k.default.createElement("a",{className:"btn-floating",onClick:this.showModal,style:{backgroundColor:"#03a9f4"}},k.default.createElement("i",{className:"fa fa-pencil-square-o "}))),title:"修改学校信息",okText:"提交",onOk:this.handleModify,afterClose:function(){}},a={lat:this.props.schoolInfo.schoolMap[1],lng:this.props.schoolInfo.schoolMap[0]},n=this.props.schoolInfo.schoolName),k.default.createElement("div",null,t.button,this.state.visible?k.default.createElement(r.default,{visible:this.state.visible,title:t.title,okText:t.okText,onCancel:this.handleCancel,onOk:t.onOk,afterClose:t.afterClose},k.default.createElement(i.default,{spinning:this.props.loading},k.default.createElement(d.default,{message:"点击鼠标右键设置学校位置",type:"info",showIcon:!0}),window.AMap?k.default.createElement(R.default,{handlePosition:this.handlePosition,initPosition:a,ref:"map"}):k.default.createElement("div",{className:"map-item"},k.default.createElement("div",{className:"default-map"},k.default.createElement("img",{src:"/iot/web/education/resources/img/default_school_map.jpg"}),k.default.createElement("span",null,"无地图，请确保浏览器可访问互联网"))),k.default.createElement(V,{ref:function(t){e.form=t},schoolName:n}))):null)}}]),t}(k.default.Component);t.default=B},769:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(693),a(692)),i=n(l),s=(a(33),a(18)),d=n(s),u=(a(23),a(22)),c=n(u),f=a(4),p=n(f),h=a(205),m=n(h),g=a(13),v=n(g),S=a(1),y=n(S),I=a(9),C=n(I),b=a(3),E=n(b),w=a(2),A=n(w),M=(a(45),a(44)),L=n(M),_=(a(54),a(53)),T=n(_),D=(a(39),a(38)),N=n(D),x=(a(73),a(72)),k=n(x),O=(a(118),a(97)),R=n(O),F=a(0),P=n(F),G=a(40),H=a(17),V=a(21),B=a(768),W=n(B);a(681);var z=a(766),U=n(z),j=a(150),K=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(j),q=function(e){var t=[],a=e.schoolList.data;for(var n in a)if(a.hasOwnProperty(n)){var o=function(){var o=a[n];if(e.isSearch&&-1===o.schoolName.indexOf(e.schoolSearchName))return"continue";t.push(P.default.createElement(T.default,{lg:6,md:8,sm:12,xs:24,key:o.schoolId},P.default.createElement(N.default,{className:"schoolInfo",style:{margin:"15px 0"},bordered:!1,bodyStyle:{padding:2},key:""+o.schoolName},P.default.createElement(G.Link,{to:"/iot/web/education/school",onClick:function(){e.local_setCurrentSchoolId(o.schoolId),localStorage.setItem("schoolId",o.schoolId)}},P.default.createElement("div",{className:"panel-body text-center bg-center",style:{height:200,backgroundImage:"url("+(window.AMap?"https://restapi.amap.com/v3/staticmap?location="+o.schoolMap+"&zoom=15&size=440*200&markers=mid,,A:"+o.schoolMap+"&key=06ec21fb2bb22d5d96d7ea015ee782f3)":"/iot/web/education/resources/img/default_school_map.jpg")}})),P.default.createElement("ul",{className:"card-action-buttons"},P.default.createElement("li",null,P.default.createElement(W.default,{mode:"modify",loading:e.modifySchoolLoading,handleModifySchool:e.handleModifySchool,schoolInfo:o})),P.default.createElement("li",null,P.default.createElement(U.default,{ICList:e.ICList,scenarioId:e.scenarioId,schoolId:o.schoolId,getAutoDevicesAndBindDevices:e.getAutoDevicesAndBindDevices,getIotNetworkDeviceListBySchool:e.getIotNetworkDeviceListBySchool,addIotNetworkDeviceList:e.addIotNetworkDeviceList,deleteIotNetworkDeviceList:e.deleteIotNetworkDeviceList,deleteBindCGMList:e.deleteBindCGMList,local_unBindIGsFromSchool:e.local_unBindIGsFromSchool})),P.default.createElement("li",null,P.default.createElement(k.default,{title:"是否确定删除该学校? 删除后不可恢复！",onConfirm:function(){e.handleDelSchool(o)},onCancel:function(e){},okText:"确定",cancelText:"取消"},P.default.createElement(R.default,{placement:"bottomRight",title:"删除学校"},P.default.createElement("a",{className:"btn-floating",style:{backgroundColor:"#ff4081"}},P.default.createElement("i",{className:"fa fa-trash "})))))),P.default.createElement(G.Link,{to:"/iot/web/education/school",onClick:function(){e.local_setCurrentSchoolId(o.schoolId),localStorage.setItem("schoolId",o.schoolId)}},P.default.createElement("div",{className:"text-center  clearfix",style:{marginTop:-5,fontSize:"20px",padding:"10px 5px",whiteSpace:"nowrap"}},P.default.createElement("span",{title:o.schoolName,style:{color:"#303a4e",display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},o.schoolName))))))}();if("continue"===o)continue}return P.default.createElement(L.default,{gutter:48},t)},Y=function(e){function t(e){(0,y.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return a.getBindDevices=function(e){return new m.default(function(t,n){a.props.scenarioAction.getIotNetworkDeviceListByScenario({scenarioId:e}).then(function(e){t(e)}).catch(function(e){n("获取学校绑定的网络设备失败: "+e.message)})})},a.getIGList=function(e){return new m.default(function(t,n){a.props.scenarioAction.getIGList(e).then(function(e){t(e)}).catch(function(t){n("获取控制器("+e+")下网关列表失败: "+t.message)})})},a.getAllICsAndIGs=function(e){return new m.default(function(t,n){a.props.scenarioAction.getICList(e).then(function(e){var o=e.value,r=[];if(o.length>0){for(var l=0;l<o.length;l++)!function(e){r.push(new m.default(function(t,n){a.getIGList(o[e].IC_SN).then(function(e){t(e)}).catch(function(e){n(e)})}))}(l);m.default.all(r).then(function(e){t(e)}).catch(function(e){n(e)})}else t([])}).catch(function(e){n("获取控制器列表失败: "+e.message)})})},a.getAutoDevicesAndBindDevices=function(){var e=a.props.scenario.scenarioId;return m.default.all([a.getBindDevices(e),a.getAllICsAndIGs(e)])},a.handleUserSearch=function(){var e=a.refs.searchInput.value,t=""!==e;a.setState({schoolSearchName:e,isSearch:t})},a.handleAddSchool=function(e){return new m.default(function(t,n){a.props.scenarioAction.addSchoolConfig((0,p.default)({},e,{scenarioId:a.props.scenario.scenarioId})).then(function(e){a.props.scenarioAction.getSchoolList(a.props.scenario.scenarioId).then(function(e){}).catch(function(e){n("获取学校列表失败: "+e.message)}),t(e.value)}).catch(function(e){n(new Error(e.message))})})},a.handleDelSchool=function(e){a.props.scenarioAction.deleteDeviceBySchoolId({scenarioId:a.props.scenario.scenarioId,schoolId:e.schoolId}).then(function(t){a.props.scenarioAction.delSchoolConfig({scenarioId:a.props.scenario.scenarioId,schoolList:[{schoolId:e.schoolId}]}).then(function(e){c.default.success("删除学校成功"),a.props.scenarioAction.getSchoolList(a.props.scenario.scenarioId).then(function(e){}).catch(function(e){reject("获取学校列表失败: "+e.message)})}).catch(function(e){c.default.error("删除学校失败: "+e.message)})}).catch(function(e){c.default.error("解除该学校绑定的设备失败")})},a.handleModifySchool=function(e){return new m.default(function(t,n){a.props.scenarioAction.modifySchoolConfig((0,p.default)({},e,{scenarioId:a.props.scenario.scenarioId})).then(function(e){t(),a.props.scenarioAction.getSchoolList(a.props.scenario.scenarioId).then(function(e){}).catch(function(e){n("获取学校列表失败: "+e.message)})}).catch(function(e){n(new Error(e.message))})})},a.state={schoolSearchName:"",isSearch:!1},a}return(0,A.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){this.props.scenarioAction.getSchoolList(this.props.scenario.scenarioId).then(function(e){}).catch(function(e){reject("获取学校列表失败: "+e.message)})}},{key:"render",value:function(){return P.default.createElement("div",{className:"wrapper-content animated fadeIn"},P.default.createElement(r.default,{spinning:this.props.scenario.getSchoolLoading||this.props.scenario.delSchoolLoading},P.default.createElement("div",{className:"row row-table text-center",style:{marginTop:"20px"}},P.default.createElement("div",{className:"pull-left"},P.default.createElement(W.default,{mode:"add",loading:this.props.scenario.addSchoolLoading,handleAddSchool:this.handleAddSchool})),P.default.createElement("div",null,P.default.createElement("div",{className:"pull-right",style:{display:"inline-block",position:"relative"}},P.default.createElement("input",{type:"text",placeholder:"请输入学校名称",style:{width:"250px",borderRadius:"16px",border:"#FF0000"},className:"ant-input ant-input-lg",ref:"searchInput",onChange:this.handleUserSearch}),P.default.createElement(d.default,{type:"search",style:{position:"absolute",right:10,top:10,cursor:"pointer"}})))),P.default.createElement(q,{ICList:this.props.scenario.ICList,scenarioId:this.props.scenario.scenarioId,modifySchoolLoading:this.props.scenario.modifySchoolLoading,handleDelSchool:this.handleDelSchool,handleEditSchool:this.handleEditSchool,schoolList:this.props.scenario.schoolList,schoolSearchName:this.state.schoolSearchName,isSearch:this.state.isSearch,getAutoDevicesAndBindDevices:this.getAutoDevicesAndBindDevices,getIotNetworkDeviceListBySchool:this.props.scenarioAction.getIotNetworkDeviceListBySchool,addIotNetworkDeviceList:this.props.scenarioAction.addIotNetworkDeviceList,deleteIotNetworkDeviceList:this.props.scenarioAction.deleteIotNetworkDeviceList,handleModifySchool:this.handleModifySchool,local_setCurrentSchoolId:this.props.scenarioAction.local_setCurrentSchoolId,local_unBindIGsFromSchool:this.props.scenarioAction.local_unBindIGsFromSchool,deleteBindCGMList:this.props.scenarioAction.deleteBindCGMList}),P.default.createElement(i.default,{style:{right:"30px",bottom:"80px"}})))}}]),t}(F.Component);t.default=(0,V.connect)(function(e){return{scenario:e.common.scenario}},function(e){return{scenarioAction:(0,H.bindActionCreators)(K,e)}})(Y)},770:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchoolList=void 0;var n=a(769),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.SchoolList=o.default},771:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(50),a(49)),l=o(r),i=(a(354),a(252)),s=o(i),d=(a(45),a(44)),u=o(d),c=(a(714),a(360)),f=o(c),p=(a(117),a(130)),h=o(p),m=(a(47),a(46)),g=o(m),v=(a(33),a(18)),S=o(v),y=(a(37),a(35)),I=o(y),C=(a(41),a(48)),b=o(C),E=(a(23),a(22)),w=o(E),A=a(13),M=o(A),L=a(1),_=o(L),T=a(9),D=o(T),N=a(3),x=o(N),k=a(2),O=o(k),R=(a(202),a(201)),F=o(R),P=a(0),G=o(P),H=a(58),V=o(H),B=a(40),W=a(17),z=a(21);a(1605);var U=a(371),j=n(U),K=a(259),q=n(K),Y=F.default.TabPane,J=function(e){function t(e){(0,_.default)(this,t);var a=(0,x.default)(this,(t.__proto__||(0,M.default)(t)).call(this,e));return a.showModal=function(e,t){var n=a.props,o=n.scenarioId,r=n.schoolId,l=n.alertDetailState,i=n.alertDetailActions;a.setState({visible:!0,dataLoading:!0}),i.fetchAlertStuData(o,r,e.areaName,e.alarmReTime).then(function(){a.setState({dataLoading:!1,filtersData:l.alertDetailTable})}).catch(function(e){a.setState({dataLoading:!1}),w.default.error("获取学生详情失败: "+e.message)})},a.handleCancel=function(e){a.setState({visible:!1,menuSelect:1,INSnDropdownVis:!1,IdDropdownVis:!1,NamDropdownVis:!1,filterINSn:"",filterStuId:"",filterStuNam:"",filtersData:[]})},a.goback=function(){B.browserHistory.push("/iot/web/education/school/dashboard")},a.handleDangerChange=function(e){var t=e.current,n=e.pageSize,o=a.props,r=o.scenarioId,l=o.schoolId,i=a.props.alertCountActions,s=i.fetchAlertTableData;(0,i.saveDanAlertPagination)({current:t,pageSize:n}),a.setState({dataLoading:!0}),s(r,l,2,(t-1)*n,n).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1}),w.default.error("获取紧急告警详情失败: "+e.message)})},a.handleWarningChange=function(e){var t=e.current,n=e.pageSize,o=a.props,r=o.scenarioId,l=o.schoolId,i=a.props.alertCountActions,s=i.fetchAlertTableData;(0,i.saveWarnAlertPagination)({current:t,pageSize:n}),a.setState({dataLoading:!0}),s(r,l,1,(t-1)*n,n).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1}),w.default.error("获取重要告警详情失败: "+e.message)})},a.tabsOnChange=function(e){var t=a.props,n=t.scenarioId,o=t.schoolId,r=a.props.alertTableState,l=r.danAlertPagination,i=r.warnAlertPagination,s=a.props.alertCountActions.fetchAlertTableData;"1"===e?(a.setState({dataLoading:!0}),s(n,o,2,(l.current-1)*l.pageSize,l.pageSize).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1}),w.default.error("获取紧急告警详情失败: "+e.message)})):(a.setState({dataLoading:!0}),s(n,o,1,(i.current-1)*i.pageSize,i.pageSize).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1}),w.default.error("获取重要告警详情失败: "+e.message)}))},a.handleMenuClick=function(e){"1"===e.key?a.setState({menuSelect:1}):a.setState({menuSelect:2})},a.onINSnInputChange=function(e){a.setState({filterINSn:e.target.value})},a.onStuIdInputChange=function(e){a.setState({filterStuId:e.target.value})},a.onStuNameInputChange=function(e){a.setState({filterStuNam:e.target.value})},a.onSearch=function(e){var t=a.props.alertDetailState,n=a.state,o=n.filterINSn,r=n.filterStuId,l=n.filterStuNam,i=null,s=[];t.alertDetailTable.map(function(e,t){s.push(e)}),2!==e&&2!==a.state.menuSelect||(s=s.filter(function(e,t){return"--"!==e.studentId.toString()})),""!==o&&(i=new RegExp(o,"gi"),s=s.filter(function(e,t){return e.INSn.toString().match(i)})),""!==r&&(i=new RegExp(r,"gi"),s=s.filter(function(e,t){return e.studentId.toString().match(i)})),""!==l&&(i=new RegExp(l,"gi"),s=s.filter(function(e,t){return e.studentName.toString().match(i)})),a.setState({filtersData:s})},a.onINSnSearch=function(e){a.setState({INSnDropdownVis:!1}),a.onSearch(0)},a.onIdSearch=function(e){a.setState({IdDropdownVis:!1}),a.onSearch(0)},a.onNamSearch=function(e){a.setState({NamDropdownVis:!1}),a.onSearch(0)},a.state={visible:!1,dataLoading:!0,menuSelect:1,INSnDropdownVis:!1,IdDropdownVis:!1,NamDropdownVis:!1,filterINSn:"",filterStuId:"",filterStuNam:"",filtersData:[]},a}return(0,O.default)(t,e),(0,D.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.alertCountActions.fetchAlertTableData,a=this.props,n=a.scenarioId,o=a.schoolId;""!==n&&""!==o&&(t(n,o,2,0,10).then(function(){e.setState({dataLoading:!1})}).catch(function(t){e.setState({dataLoading:!1}),w.default.error("获取紧急告警详情失败: "+t.message)}),t(n,o,1,0,10).then(function(){e.setState({dataLoading:!1})}).catch(function(t){e.setState({dataLoading:!1}),w.default.error("获取重要告警详情失败: "+t.message)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenarioId!==e.scenarioId||this.props.schoolId!==e.schoolId)&&e.scenarioId&&e.schoolId&&(e.alertCountActions.fetchAlertTableData(scenarioId,schoolId,2,0,10).then(function(){t.setState({dataLoading:!1})}).catch(function(e){t.setState({dataLoading:!1}),w.default.error("获取紧急告警详情失败: "+e.message)}),e.alertCountActions.fetchAlertTableData(scenarioId,schoolId,1,0,10).then(function(){t.setState({dataLoading:!1})}).catch(function(e){t.setState({dataLoading:!1}),w.default.error("获取重要告警详情失败: "+e.message)}))}},{key:"componentDidUpdate",value:function(e,t){t.menuSelect!==this.state.menuSelect&&this.onSearch(this.state.menuSelect)}},{key:"render",value:function(){var e=this,t=[{title:"告警区域名称",dataIndex:"areaName",key:"areaName"},{title:"告警时间",dataIndex:"alarmTime",key:"alarmTime"},{title:"拥挤区人数",key:"alarmNum",dataIndex:"alarmNum",render:function(t,a,n){return G.default.createElement("a",{onClick:function(){return e.showModal(a,n)}},t)}}],a=[{title:"姓名",dataIndex:"name",key:"name"},{title:"关系",dataIndex:"relationship",key:"relationship"},{title:"联系方式",dataIndex:"tel",key:"tel"}],n=[{title:"手环号",dataIndex:"INSn",key:"INSn",filterDropdown:G.default.createElement("div",{className:"custom-filter-dropdown"},G.default.createElement(b.default,{ref:function(t){return e.searchINSnInput=t},placeholder:"请输入搜索手环号",value:this.state.filterINSn,onChange:this.onINSnInputChange,onPressEnter:this.onINSnSearch}),G.default.createElement(I.default,{type:"primary",onClick:this.onINSnSearch},"搜索")),filterDropdownVisible:this.state.INSnDropdownVis,filterIcon:G.default.createElement(S.default,{type:"search",style:{color:this.state.filterINSn?"#1cc09f":"#aaa"}}),onFilterDropdownVisibleChange:function(t){e.setState({INSnDropdownVis:t},function(){return e.searchINSnInput.focus()})}},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:G.default.createElement("div",{className:"custom-filter-dropdown"},G.default.createElement(b.default,{ref:function(t){return e.searchIdInput=t},placeholder:"请输入搜索学号",value:this.state.filterStuId,onChange:this.onStuIdInputChange,onPressEnter:this.onIdSearch}),G.default.createElement(I.default,{type:"primary",onClick:this.onIdSearch},"搜索")),filterDropdownVisible:this.state.IdDropdownVis,filterIcon:G.default.createElement(S.default,{type:"search",style:{color:this.state.filterStuId?"#1cc09f":"#aaa"}}),onFilterDropdownVisibleChange:function(t){e.setState({IdDropdownVis:t},function(){return e.searchIdInput.focus()})}},{title:"学生姓名",dataIndex:"studentName",key:"studentName",filterDropdown:G.default.createElement("div",{className:"custom-filter-dropdown"},G.default.createElement(b.default,{ref:function(t){return e.searchNamInput=t},placeholder:"请输入搜索姓名",value:this.state.filterStuNam,onChange:this.onStuNameInputChange,onPressEnter:this.onNamSearch}),G.default.createElement(I.default,{type:"primary",onClick:this.onNamSearch},"搜索")),filterDropdownVisible:this.state.NamDropdownVis,filterIcon:G.default.createElement(S.default,{type:"search",style:{color:this.state.filterStuNam?"#1cc09f":"#aaa"}}),onFilterDropdownVisibleChange:function(t){e.setState({NamDropdownVis:t},function(){return e.searchNamInput.focus()})}},{title:"当前年级",key:"grade",dataIndex:"grade"},{title:"班级",key:"classId",dataIndex:"classId"},{title:"性别",key:"sex",dataIndex:"sex"},{title:"家长信息",key:"householder",dataIndex:"householder",render:function(e,t,n){if("--"===t.studentId&&"--"===t.studentName)return G.default.createElement("a",null,"--");var o=G.default.createElement(g.default,{pagination:!1,size:"small",rowKey:"name",columns:a,dataSource:t.householder}),r="";return 0===t.householder.length?G.default.createElement("a",null,"--"):(r=t.householder[0].name,G.default.createElement(h.default,{content:o,title:"家长信息",style:{paddingLeft:0,paddingRight:0}},G.default.createElement("a",null,r)))}}],o=G.default.createElement(f.default,{onClick:this.handleMenuClick},G.default.createElement(f.default.Item,{key:"1"},"全部信息"),G.default.createElement(f.default.Item,{key:"2"},"已关联信息"));return G.default.createElement(V.default,null,G.default.createElement(u.default,null,G.default.createElement(I.default,{type:"primary",icon:"arrow-left",style:{marginBottom:"15px"},onClick:this.goback},"返回校园概览")),G.default.createElement(u.default,null,G.default.createElement("div",{className:"alert-tabs"},G.default.createElement(F.default,{type:"card",onChange:this.tabsOnChange},G.default.createElement(Y,{tab:"紧急告警",key:"1"},G.default.createElement("div",{style:{background:"#fff",padding:"16px",marginTop:"-16px",minHeight:680}},G.default.createElement(g.default,{className:"alert-table-dangeralert",rowKey:function(e){return e.schoolId+e.areaName+e.alarmReTime+e.alarmNum},columns:t,dataSource:this.props.alertTableState.dangerAlertTable,onChange:this.handleDangerChange,loading:this.state.dataLoading,pagination:{total:this.props.alertTableState.dangerAlertCount,showSizeChanger:!0,showQuickJumper:!0}}))),G.default.createElement(Y,{tab:"重要告警",key:"2"},G.default.createElement("div",{style:{background:"#fff",padding:"16px",marginTop:"-16px",minHeight:680}},G.default.createElement(g.default,{className:"alert-table-warningalert",rowKey:function(e){return e.schoolId+e.areaName+e.alarmReTime+e.alarmNum},columns:t,dataSource:this.props.alertTableState.warningAlertTable,onChange:this.handleWarningChange,loading:this.state.dataLoading,pagination:{total:this.props.alertTableState.warningAlertCount,showSizeChanger:!0,showQuickJumper:!0}})))))),G.default.createElement(l.default,{width:"850px",title:"学生详情",visible:this.state.visible,onOk:this.handleCancel,onCancel:this.handleCancel},G.default.createElement(u.default,{type:"flex",justify:"end"},G.default.createElement(s.default,{overlay:o},G.default.createElement(I.default,{type:"primary",style:{width:70,marginBottom:"10px"}},"筛选 ",G.default.createElement(S.default,{type:"down"})))),G.default.createElement(u.default,null,this.state.visible?G.default.createElement(g.default,{rowKey:"INSn",columns:n,dataSource:this.state.filtersData,loading:this.state.dataLoading}):null)))}}]),t}(G.default.Component);t.default=(0,z.connect)(function(e){return{alertTableState:e.dashboard.alertCount,alertDetailState:e.dashboard.alertStuDetail,scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId}},function(e){return{alertDetailActions:(0,W.bindActionCreators)(j,e),alertCountActions:(0,W.bindActionCreators)(q,e)}})(J)},772:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(45),a(44)),d=n(s),u=(a(54),a(53)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(173),a(172)),m=n(h),g=a(13),v=n(g),S=a(1),y=n(S),I=a(9),C=n(I),b=a(3),E=n(b),w=a(2),A=n(w),M=a(0),L=n(M),_=a(40),T=a(17),D=a(21),N=a(259),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(N),k=function(e){function t(e){(0,y.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return a.refresh=function(){var e=a.props.alertCountActions.fetchAlertCountData,t=a.props,n=t.scenarioId,o=t.schoolId;a.setState({dataLoading:!0}),e(n,o).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1})})},a.num2e=function(e){var t=e.toString().length-1;return(e*Math.pow(10,-t)).toFixed(1)+"E+"+t},a.state={dataLoading:!0},a}return(0,A.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.alertCountActions.fetchAlertCountData,a=this.props,n=a.scenarioId,o=a.schoolId;""!==n&&""!==o&&t(n,o).then(function(){e.setState({dataLoading:!1})}).catch(function(t){e.setState({dataLoading:!1})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenarioId!==e.scenarioId||this.props.schoolId!==e.schoolId)&&e.scenarioId&&e.schoolId&&e.alertCountActions.fetchAlertCountData(e.scenarioId,e.schoolId).then(function(){t.setState({dataLoading:!1})}).catch(function(e){t.setState({dataLoading:!1})})}},{key:"alerCli",value:function(){_.browserHistory.push({pathname:"/iot/web/education/school/dashboard/alert-table"})}},{key:"render",value:function(){var e=this.props.alertCountState.seriousCount,t=this.props.alertCountState.importCount;return e>=1e4&&(e=this.num2e(e)),t>=1e4&&(t=this.num2e(t)),L.default.createElement(r.default,{title:"安全告警",style:{height:280},extra:L.default.createElement("div",null,L.default.createElement(m.default,{style:{cursor:"pointer"},color:"#1cc09f",onClick:this.alerCli},"详情"),L.default.createElement(m.default,{color:"#1cc09f",onClick:this.refresh},L.default.createElement(p.default,{type:"sync"})))},L.default.createElement(i.default,{spinning:this.state.dataLoading},L.default.createElement(d.default,{type:"flex",align:"middle",gutter:10,style:{marginTop:15}},L.default.createElement(c.default,{className:"text-center",span:"12"},L.default.createElement("div",{className:""},L.default.createElement("span",{className:"fa-stack fa-3x"},L.default.createElement("em",{className:"fa fa-circle fa-stack-2x text-danger"}),L.default.createElement("em",{className:"fa fa-exclamation fa-stack-1x fa-inverse text-white"}))),L.default.createElement("div",{className:"text-danger"},L.default.createElement("p",{style:{width:100,fontSize:32,color:"#f05050",fontWeight:"bold",margin:"0 auto"}},e,L.default.createElement("span",{style:{fontSize:8,color:"#5f5f5f",fontWeight:"bold",margin:"0 auto"}}," 次"))),L.default.createElement("p",{style:{height:"50px",fontWeight:"600",fontSize:"14px"}},"紧急告警")),L.default.createElement(c.default,{className:"text-center",span:"12"},L.default.createElement("div",{className:""},L.default.createElement("span",{className:"fa-stack fa-3x"},L.default.createElement("em",{className:"fa fa-circle fa-stack-2x text-warning"}),L.default.createElement("em",{className:"fa fa-bell fa-stack-1x fa-inverse text-white"}))),L.default.createElement("div",{className:"text-warning"},L.default.createElement("p",{style:{width:100,fontSize:32,color:"#ff902b",fontWeight:"bold",margin:"0 auto"}},t,L.default.createElement("span",{style:{fontSize:8,color:"#5f5f5f",fontWeight:"bold",margin:"0 auto"}}," 次"))),L.default.createElement("p",{style:{height:"50px",fontWeight:"600",fontSize:"14px"}},"重要告警")))))}}]),t}(L.default.Component);t.default=(0,D.connect)(function(e){return{alertCountState:e.dashboard.alertCount,scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId}},function(e){return{alertCountActions:(0,T.bindActionCreators)(x,e)}})(k)},773:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(47),a(46)),l=o(r),i=(a(45),a(44)),s=o(i),d=(a(37),a(35)),u=o(d),c=(a(41),a(48)),f=o(c),p=(a(33),a(18)),h=o(p),m=(a(23),a(22)),g=o(m),v=a(4),S=o(v),y=a(13),I=o(y),C=a(1),b=o(C),E=a(9),w=o(E),A=a(3),M=o(A),L=a(2),_=o(L),T=(a(85),a(74)),D=o(T),N=(a(202),a(201)),x=o(N),k=(a(149),a(106)),O=o(k),R=a(0),F=o(R),P=a(40),G=a(17),H=a(21),V=a(58),B=o(V),W=a(372),z=n(W),U=a(131),j=n(U);a(1606);var K=O.default.Group,q=x.default.TabPane,Y=D.default.Group,J={display:"block",height:"24px",lineHeight:"24px",marginLeft:8},$=10,Z=function(e){for(var t in e)return!1;return!0},Q=function(e){function t(e){(0,b.default)(this,t);var a=(0,M.default)(this,(t.__proto__||(0,I.default)(t)).call(this,e));return a.handleInSchoolTableChange=function(e,t){var n=(0,S.default)({},a.state.inSchoolPagination);n.current=void 0==e?1:e.current,a.setState({inSchoolPagination:n});var o=Z(t)?a.props.attendanceDetailState.inSchoolFilter.filter:t;a.fetchInSchool({page:n.current,filters:o})},a.fetchInSchool=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.filters,o=0;t?o=(t-1)*$:a.state.inSchoolPagination.current&&(o=(a.state.inSchoolPagination.current-1)*$),a.setState({inSchoolLoading:!0}),a.props.attendanceDetailActions.getStudentInfoInSchool((0,S.default)({scenarioId:a.props.scenarioId,schoolId:a.props.currentSchoolId,startRowIndex:o,maxItem:$},n)).then(function(e){var t=(0,S.default)({},a.state.inSchoolPagination);t.total=e.value.total,a.setState({inSchoolPagination:t,inSchoolLoading:!1})}).catch(function(e){a.setState({inSchoolLoading:!1}),g.default.error("获取在校学生详情失败: "+e.message)})},a.handleOutSchoolTableChange=function(e,t){var n=(0,S.default)({},a.state.outSchoolPagination);n.current=void 0==e?1:e.current,a.setState({outSchoolPagination:n});var o=Z(t)?a.props.attendanceDetailState.outSchoolFilter.filter:t;a.fetchOutSchool({page:n.current,filters:o})},a.fetchOutSchool=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.filters,o=0;t?o=(t-1)*$:a.state.outSchoolPagination.current&&(o=(a.state.outSchoolPagination.current-1)*$),a.setState({outSchoolLoading:!0}),a.props.attendanceDetailActions.getStudentInfoOutSchool((0,S.default)({scenarioId:a.props.scenarioId,schoolId:a.props.currentSchoolId,startRowIndex:o},n,{maxItem:$})).then(function(e){var t=(0,S.default)({},a.state.outSchoolPagination);t.total=e.value.total,a.setState({outSchoolPagination:t,outSchoolLoading:!1})}).catch(function(e){a.setState({outSchoolLoading:!1}),g.default.error("获取离校学生详情失败: "+e.message)})},a.handleLeaveSchoolTableChange=function(e,t){var n=(0,S.default)({},a.state.leaveSchoolPagination);n.current=void 0==e?1:e.current,a.setState({leaveSchoolPagination:n});var o=Z(t)?a.props.attendanceDetailState.leaveSchoolFilter.filter:t;a.fetchLeaveSchool({page:n.current,filters:o})},a.fetchLeaveSchool=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.filters,o=0;t?o=(t-1)*$:a.state.leaveSchoolPagination.current&&(o=(a.state.leaveSchoolPagination.current-1)*$),a.setState({leaveSchoolLoading:!0}),a.props.attendanceDetailActions.getStudentInfoLeave((0,S.default)({scenarioId:a.props.scenarioId,schoolId:a.props.currentSchoolId,startRowIndex:o},n,{maxItem:$})).then(function(e){var t=(0,S.default)({},a.state.leaveSchoolPagination);t.total=e.value.total,a.setState({leaveSchoolPagination:t,leaveSchoolLoading:!1})}).catch(function(e){a.setState({leaveSchoolLoading:!1}),g.default.error("获取请假学生详情失败: "+e.message)})},a.handleNeverComeSchoolTableChange=function(e,t){var n=(0,S.default)({},a.state.neverComeSchoolPagination);n.current=void 0==e?1:e.current,a.setState({neverComeSchoolPagination:n});var o=Z(t)?a.props.attendanceDetailState.neverComeSchoolFilter.filter:t;a.fetchNeverComeSchool({page:n.current,filters:o})},a.fetchNeverComeSchool=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.filters,o=0;t?o=(t-1)*$:a.state.neverComeSchoolPagination.current&&(o=(a.state.neverComeSchoolPagination.current-1)*$),a.setState({neverComeSchoolLoading:!0}),a.props.attendanceDetailActions.getStudentInfoNever((0,S.default)({scenarioId:a.props.scenarioId,schoolId:a.props.currentSchoolId,startRowIndex:o},n,{maxItem:$})).then(function(e){var t=(0,S.default)({},a.state.neverComeSchoolPagination);t.total=e.value.total,a.setState({neverComeSchoolPagination:t,neverComeSchoolLoading:!1})}).catch(function(e){a.setState({neverComeSchoolLoading:!1}),g.default.error("获取暂未到校学生详情失败: "+e.message)})},a.fetchGradeAndClass=function(){var e=a.props,t=e.scenarioId,n=e.currentSchoolId;a.props.classTableActions.fetchClassTableData(t,n).then(function(e){var t=[],n={};a.props.isModel||(e.value.map(function(e){var a=!0,o=e.grade;t.some(function(e){return e===o&&(a=!1),e===o}),a&&t.push(o),t.length&&(n[""+o]=void 0===n[""+o]?[]:n[""+o],n[""+o].push({baseGrade:e.baseGrade,years:e.years,classId:e.classId}))}),a.props.attendanceDetailActions.setGradeOptionAndClassOption(t,n))})},a.goback=function(){P.browserHistory.push("/iot/web/education/school/dashboard")},a.click=function(e){switch(e){case"1":a.fetchInSchool();break;case"2":a.fetchOutSchool();break;case"3":a.fetchLeaveSchool();break;default:a.fetchNeverComeSchool()}},a.state={inSchoolPagination:{},inSchoolLoading:!1,inSchoolFilters:{filter:{}},filterDropdownVisible:!1,outSchoolPagination:{},outSchoolLoading:!1,outSchoolFilters:{filter:{}},outSchoolfilterDropdownVisible:!1,leaveSchoolPagination:{},leaveSchoolLoading:!1,leaveSchoolFilters:{filter:{}},leaveSchoolfilterDropdownVisible:!1,neverComeSchoolPagination:{},neverComeSchoolLoading:!1,neverComeSchoolFilters:{filter:{}},neverComeSchoolfilterDropdownVisible:!1},a}return(0,_.default)(t,e),(0,w.default)(t,[{key:"componentDidMount",value:function(){this.fetchInSchool(),this.fetchGradeAndClass()}},{key:"render",value:function(){var e=this,t=[{leaveReason:"病假"},{leaveReason:"事假"}],a=this.props.attendanceDetailState,n=a.classOption,o=a.gradeOption,r=a.inSchool,i=a.outSchool,d=a.leaveSchool,c=a.neverComeSchool,p=a.inSchoolFilter,m=a.outSchoolFilter,g=a.leaveSchoolFilter,v=a.neverComeSchoolFilter,y=[{title:"姓名",dataIndex:"studentName",key:"studentname",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学生姓名",value:this.state.inSchoolFilters.filter.studentNameWeak,suffix:this.state.inSchoolFilters.filter.studentNameWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({inSchoolFilters:{filter:{studentNameWeak:""}}})}}):null,onChange:function(t){e.setState({inSchoolFilters:{filter:(0,S.default)({},p.filter,{studentNameWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{studentNameWeak:t.target.value})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{studentNameWeak:e.state.inSchoolFilters.filter.studentNameWeak})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:p.filter&&p.filter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学号",value:this.state.inSchoolFilters.filter.studentIdWeak,suffix:this.state.inSchoolFilters.filter.studentIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({inSchoolFilters:{filter:{studentIdWeak:""}}})}}):null,onChange:function(t){e.setState({inSchoolFilters:{filter:(0,S.default)({},p.filter,{studentIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{studentIdWeak:t.target.value})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{studentIdWeak:e.state.inSchoolFilters.filter.studentIdWeak})}),e.handleInSchoolTableChange(1,(0,S.default)({},p.filter,{studentIdWeak:e.state.inSchoolFilters.filter.studentIdWeak}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:p.filter&&p.filter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},F.default.createElement("div",{style:{padding:8}},F.default.createElement(K,{ref:"inSchoolCheckboxGroup",onChange:function(t){if(void 0!==t){var a=t,o=[];a.map(function(e){return o.push(n[e][0].years)}),e.setState({inSchoolFilters:{filter:(0,S.default)({},p.filter,{grade:o})}})}}},o&&o.map(function(e){return F.default.createElement(s.default,{key:e,span:8},F.default.createElement(O.default,{value:e},e))}))),F.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},F.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){var t=e.state.inSchoolFilters.filter.grade;e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{grade:t})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter),e.setState({filterDropdownVisible:!1})}},"确定"),F.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){if(void 0!==p.filter.grade){var t=p.filter;delete t.grade,e.refs.inSchoolCheckboxGroup.state.value=[],e.props.attendanceDetailActions.inSchoolSaveFilter(t)}e.handleInSchoolTableChange(),e.setState({filterDropdownVisible:!1})}},"重置"))),filterIcon:F.default.createElement(h.default,{type:"filter",style:{color:p.filter&&p.filter.grade?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({filterDropdownVisible:t})}},{title:"班号",dataIndex:"classId",key:"classId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索班号",value:this.state.inSchoolFilters.filter.classIdWeak,suffix:this.state.inSchoolFilters.filter.classIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({inSchoolFilters:{filter:{classIdWeak:""}}})}}):null,onChange:function(t){e.setState({inSchoolFilters:{filter:(0,S.default)({},p.filter,{classIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{classIdWeak:t.target.value})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{classIdWeak:e.state.inSchoolFilters.filter.classIdWeak})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:p.filter&&p.filter.classIdWeak?"#1cc09f":"#aaa"}})},{title:"到校时间",key:"inSchoolTime",dataIndex:"inSchoolTime",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索时间",onChange:function(t){e.setState({inSchoolFilters:{filter:(0,S.default)({},p.filter,{inSchoolTimeWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{inSchoolTimeWeak:t.target.value})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.inSchoolSaveFilter({filter:(0,S.default)({},p.filter,{inSchoolTimeWeak:e.state.inSchoolFilters.filter.inSchoolTimeWeak})}),e.handleInSchoolTableChange(1,e.state.inSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{display:"none",color:p.filter&&p.filter.inSchoolTimeWeak?"#1cc09f":"#aaa"}})}],I=[{title:"姓名",dataIndex:"studentName",key:"studentName",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学生姓名",value:this.state.outSchoolFilters.filter.studentNameWeak,suffix:this.state.outSchoolFilters.filter.studentNameWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({outSchoolFilters:{filter:{studentNameWeak:""}}})}}):null,onChange:function(t){e.setState({outSchoolFilters:{filter:(0,S.default)({},m.filter,{studentNameWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{studentNameWeak:t.target.value})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{studentNameWeak:e.state.outSchoolFilters.filter.studentNameWeak})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:m.filter&&m.filter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学号",value:this.state.outSchoolFilters.filter.studentIdWeak,suffix:this.state.outSchoolFilters.filter.studentIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({outSchoolFilters:{filter:{studentIdWeak:""}}})}}):null,onChange:function(t){e.setState({outSchoolFilters:{filter:(0,S.default)({},m.filter,{studentIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{studentIdWeak:t.target.value})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{studentIdWeak:e.state.outSchoolFilters.filter.studentIdWeak})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:m.filter&&m.filter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},F.default.createElement("div",{style:{padding:8}},F.default.createElement(K,{ref:"outSchoolCheckboxGroup",onChange:function(t){if(void 0!==t){var a=t,o=[];a.map(function(e){return o.push(n[e][0].years)}),e.setState({outSchoolFilters:{filter:(0,S.default)({},m.filter,{grade:o})}})}}},o&&o.map(function(e){return F.default.createElement(s.default,{key:e,span:8},F.default.createElement(O.default,{value:e},e))}))),F.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},F.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){var t=e.state.outSchoolFilters.filter.grade;e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{grade:t})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter),e.setState({outSchoolfilterDropdownVisible:!1})}},"确定"),F.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){if(void 0!==m.filter.years){var t=m.filter;delete t.grade,e.refs.outSchoolCheckboxGroup.state.value=[],e.props.attendanceDetailActions.outSchoolSaveFilter(t)}e.handleOutSchoolTableChange(),e.setState({outSchoolfilterDropdownVisible:!1})}},"重置"))),filterIcon:F.default.createElement(h.default,{type:"filter",style:{color:m.filter&&m.filter.grade?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.outSchoolfilterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({outSchoolfilterDropdownVisible:t})}},{title:"班号",dataIndex:"classId",key:"classId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索班号",value:this.state.outSchoolFilters.filter.classIdWeak,suffix:this.state.outSchoolFilters.filter.classIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({outSchoolFilters:{filter:{classIdWeak:""}}})}}):null,onChange:function(t){e.setState({outSchoolFilters:{filter:(0,S.default)({},m.filter,{classIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{classIdWeak:t.target.value})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{classIdWeak:e.state.outSchoolFilters.filter.classIdWeak})}),e.handleOutSchoolTableChange(1,e.state.outSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:m.filter&&m.filter.classIdWeak?"#1cc09f":"#aaa"}})},{title:"离校时间",key:"outSchoolTime",dataIndex:"outSchoolTime",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索时间",onChange:function(t){e.props.attendanceDetailActions.outSchoolSaveFilter({filter:(0,S.default)({},m.filter,{outSchoolTimeWeak:t.target.value})})},onPressEnter:this.handleOutSchoolTableChange}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.handleOutSchoolTableChange}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{display:"none",color:m.filter&&m.filter.outSchoolTimeWeak?"#1cc09f":"#aaa"}})}],C=[{title:"姓名",dataIndex:"studentName",key:"studentName",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学生姓名",value:this.state.leaveSchoolFilters.filter.studentNameWeak,suffix:this.state.leaveSchoolFilters.filter.studentNameWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({leaveSchoolFilters:{filter:{studentNameWeak:""}}})}}):null,onChange:function(t){e.setState({leaveSchoolFilters:{filter:(0,S.default)({},g.filter,{studentNameWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{studentNameWeak:t.target.value})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{studentNameWeak:e.state.leaveSchoolFilters.filter.studentNameWeak})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:g.filter&&g.filter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学号",value:this.state.leaveSchoolFilters.filter.studentIdWeak,suffix:this.state.leaveSchoolFilters.filter.studentIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({leaveSchoolFilters:{filter:{studentIdWeak:""}}})}}):null,onChange:function(t){e.setState({leaveSchoolFilters:{filter:(0,S.default)({},g.filter,{studentIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{studentIdWeak:t.target.value})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{studentIdWeak:e.state.leaveSchoolFilters.filter.studentIdWeak})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:g.filter&&g.filter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},F.default.createElement("div",{style:{padding:8}},F.default.createElement(K,{ref:"leaveSchoolCheckboxGroup",onChange:function(t){if(void 0!==t){var a=t,o=[];a.map(function(e){return o.push(n[e][0].years)}),e.setState({leaveSchoolFilters:{filter:(0,S.default)({},g.filter,{grade:o})}})}}},o&&o.map(function(e){return F.default.createElement(s.default,{key:e,span:8},F.default.createElement(O.default,{value:e},e))}))),F.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},F.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){var t=e.state.leaveSchoolFilters.filter.grade;e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{grade:t})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter),e.setState({leaveSchoolfilterDropdownVisible:!1})}},"确定"),F.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){if(void 0!==g.filter.grade){var t=g.filter;delete t.grade,e.refs.leaveSchoolCheckboxGroup.state.value=[],e.props.attendanceDetailActions.leaveSchoolSaveFilter(t)}e.handleLeaveSchoolTableChange(),e.setState({leaveSchoolfilterDropdownVisible:!1})}},"重置"))),filterIcon:F.default.createElement(h.default,{type:"filter",style:{color:g.filter&&g.filter.grade?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.leaveSchoolfilterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({leaveSchoolfilterDropdownVisible:t})}},{title:"班号",dataIndex:"classId",key:"classId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索班号",value:this.state.leaveSchoolFilters.filter.classIdWeak,suffix:this.state.leaveSchoolFilters.filter.classIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({leaveSchoolFilters:{filter:{classIdWeak:""}}})}}):null,onChange:function(t){e.setState({leaveSchoolFilters:{filter:(0,S.default)({},g.filter,{classIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{classIdWeak:t.target.value})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{classIdWeak:e.state.leaveSchoolFilters.filter.classIdWeak})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:g.filter&&g.filter.classIdWeak?"#1cc09f":"#aaa"}})},{title:"请假开始时间",key:"leaveStartTime",dataIndex:"leaveStartTime"},{title:"请假结束时间",key:"leaveEndTime",dataIndex:"leaveEndTime"},{title:"请假原因",key:"leaveReason",dataIndex:"leaveReason",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},F.default.createElement(Y,{style:{padding:8},onChange:function(t){void 0!==t.target.value&&e.setState({leaveSchoolFilters:{filter:(0,S.default)({},g.filter,{leaveReason:t.target.value})}})}},t&&t.map(function(e){return F.default.createElement(D.default,{style:J,key:e.leaveReason,value:e.leaveReason},e.leaveReason)})),F.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},F.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){e.state.leaveSchoolFilters.filter.leaveReason;e.props.attendanceDetailActions.leaveSchoolSaveFilter({filter:(0,S.default)({},g.filter,{leaveReason:e.state.leaveSchoolFilters.filter.leaveReason})}),e.handleLeaveSchoolTableChange(1,e.state.leaveSchoolFilters.filter),e.setState({LeaveSchoolfilterDropdownVisible:!1})}},"确定"),F.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){if(void 0!==LeaveSchoolFilter.filter.leaveReason){var t=g.filter;delete t.leaveReason,e.props.attendanceDetailActions.leaveSchoolSaveFilter(t)}e.handleLeaveSchoolTableChange(),e.setState({LeaveSchoolfilterDropdownVisible:!1})}},"重置"))),filterIcon:F.default.createElement(h.default,{type:"filter",style:{color:g.filter&&g.filter.grade?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.LeaveSchoolfilterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({LeaveSchoolfilterDropdownVisible:t})}}],b=[{title:"姓名",dataIndex:"studentName",key:"studentName",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学生姓名",value:this.state.neverComeSchoolFilters.filter.studentNameWeak,suffix:this.state.neverComeSchoolFilters.filter.studentNameWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({neverComeSchoolFilters:{filter:{studentNameWeak:""}}})}}):null,onChange:function(t){e.setState({neverComeSchoolFilters:{filter:(0,S.default)({},v.filter,{studentNameWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{studentNameWeak:t.target.value})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{studentNameWeak:e.state.neverComeSchoolFilters.filter.studentNameWeak})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:v.filter&&v.filter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索学号",value:this.state.neverComeSchoolFilters.filter.studentNameWeak,suffix:this.state.neverComeSchoolFilters.filter.studentIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({neverComeSchoolFilters:{filter:{studentIdWeak:""}}})}}):null,onChange:function(t){e.setState({neverComeSchoolFilters:{filter:(0,S.default)({},v.filter,{studentIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{studentIdWeak:t.target.value})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{studentIdWeak:e.state.neverComeSchoolFilters.filter.studentIdWeak})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:v.filter&&v.filter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},F.default.createElement("div",{style:{padding:8}},F.default.createElement(K,{ref:"neverSchoolCheckboxGroup",onChange:function(t){if(void 0!==t){var a=t,o=[];a.map(function(e){return o.push(n[e][0].years)}),e.setState({neverComeSchoolFilters:{filter:(0,S.default)({},v.filter,{grade:o})}})}}},o&&o.map(function(e){return F.default.createElement(s.default,{key:e,span:8},F.default.createElement(O.default,{value:e},e))}))),F.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},F.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){var t=e.state.neverComeSchoolFilters.filter.grade;e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{grade:t})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter),e.setState({neverComeSchoolfilterDropdownVisible:!1})}},"确定"),F.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){if(void 0!==v.filter.grade){var t=v.filter;delete t.grade,e.refs.neverSchoolCheckboxGroup.state.value=[],e.props.attendanceDetailActions.neverComeSchoolSaveFilter(t)}e.handleNeverComeSchoolTableChange(),e.setState({neverComeSchoolfilterDropdownVisible:!1})}},"重置"))),filterIcon:F.default.createElement(h.default,{type:"filter",style:{color:v.filter&&v.filter.grade?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.neverComeSchoolfilterDropdownVisible,onFilterDropdownVisibleChange:function(t){return e.setState({neverComeSchoolfilterDropdownVisible:t})}},{title:"班号",dataIndex:"classId",key:"classId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(f.default,{placeholder:"请输入搜索班号",value:this.state.neverComeSchoolFilters.filter.classIdWeak,suffix:this.state.neverComeSchoolFilters.filter.classIdWeak?F.default.createElement(h.default,{type:"close-circle",onClick:function(){e.setState({neverComeSchoolFilters:{filter:{classIdWeak:""}}})}}):null,onChange:function(t){e.setState({neverComeSchoolFilters:{filter:(0,S.default)({},v.filter,{classIdWeak:t.target.value})}})},onPressEnter:function(t){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{classIdWeak:t.target.value})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}}),F.default.createElement(u.default,{type:"primary",onClick:function(){e.props.attendanceDetailActions.neverComeSchoolSaveFilter({filter:(0,S.default)({},v.filter,{classIdWeak:e.state.neverComeSchoolFilters.filter.classIdWeak})}),e.handleNeverComeSchoolTableChange(1,e.state.neverComeSchoolFilters.filter)}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:v.filter&&v.filter.classIdWeak?"#1cc09f":"#aaa"}})},{title:"离校时间",key:"outSchoolTime",dataIndex:"outSchoolTime"}];return F.default.createElement(B.default,null,F.default.createElement(s.default,null,F.default.createElement(u.default,{type:"primary",icon:"arrow-left",style:{marginBottom:"15px"},onClick:this.goback},"返回校园概览")),F.default.createElement(s.default,null,F.default.createElement("div",{className:"card-container attendanceDetail"},F.default.createElement(x.default,{type:"card",ref:"x",onTabClick:this.click,style:{height:"100%"},animated:!1},F.default.createElement(q,{tab:"在校学生",key:"1"},F.default.createElement(l.default,{columns:y,style:{minHeight:"200px"},dataSource:r.data,pagination:this.state.inSchoolPagination,onChange:this.handleInSchoolTableChange,loading:this.state.inSchoolLoading})),F.default.createElement(q,{tab:"离校学生",key:"2"},F.default.createElement(l.default,{columns:I,style:{minHeight:"200px"},dataSource:i.data,pagination:this.state.outSchoolPagination,onChange:this.handleOutSchoolTableChange,loading:this.state.outSchoolLoading})),F.default.createElement(q,{tab:"请假学生",key:"3"},F.default.createElement(l.default,{columns:C,style:{minHeight:"200px"},dataSource:d.data,pagination:this.state.leaveSchoolPagination,onChange:this.handleLeaveSchoolTableChange,loading:this.state.leaveSchoolLoading})),F.default.createElement(q,{tab:"暂未到校",key:"4"},F.default.createElement(l.default,{columns:b,style:{minHeight:"200px"},dataSource:c.data,pagination:this.state.neverComeSchoolPagination,onChange:this.handleNeverComeSchoolTableChange,loading:this.state.neverComeSchoolLoading}))))))}}]),t}(F.default.Component);t.default=(0,H.connect)(function(e){return{attendanceDetailState:e.dashboard.attendanceDetail,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{attendanceDetailActions:(0,G.bindActionCreators)(z,e),classTableActions:(0,G.bindActionCreators)(j,e)}})(Q)},774:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(45),a(44)),d=n(s),u=(a(54),a(53)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(173),a(172)),m=n(h),g=a(0),v=n(g),S=a(40),y=a(1607),I=(n(y),function(e){var t=e.InTheSchool,a=e.Schoolleavers,n=e.Studentleave,o=e.NeverComeToSchool,l=e.isPending,s=e.refresh,u=e.ConfigOption,f=function(){S.browserHistory.push("/iot/web/education/school/dashboard/attendance-detail")};return v.default.createElement(r.default,{title:"出勤统计",style:{height:280},extra:v.default.createElement("div",null,v.default.createElement(m.default,{style:{cursor:"pointer"},color:"#1cc09f",onClick:f},"详情"),v.default.createElement(m.default,{color:"#1cc09f",onClick:function(){s(u.scenarioId,u.currentSchoolId)}},v.default.createElement(p.default,{type:"sync"})))},v.default.createElement("div",null,v.default.createElement(i.default,{spinning:l},v.default.createElement(d.default,{type:"flex",justify:"center",align:"center"},v.default.createElement(c.default,{span:10,offset:2},v.default.createElement(c.default,{span:9},v.default.createElement("div",{style:{backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-10px -9px",height:"100px",width:"88px"}})),v.default.createElement(c.default,{span:12,offset:3},v.default.createElement("div",{style:{textAlign:"center",padding:"20px 0"}},v.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei,微软雅黑",fontSize:"14px",color:"#343e4e",fontWeight:"500"}},"在校学生数"),v.default.createElement("p",{style:{fontFamily:"AriaMT",fontSize:"22px",color:"#343e4e",fontWeight:"600"}},t)))),v.default.createElement(c.default,{span:10,offset:2},v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{position:"relative",overflow:"hidden",height:"100px",width:"88px"}},v.default.createElement("img",{src:"/iot/web/education/resources/img/icon.png",style:{position:"absolute",top:"-8px",left:"-206px"},alt:"InTheSchool"}))),v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{textAlign:"center",padding:"20px 0"}},v.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei,微软雅黑",fontSize:"14px",color:"#343e4e",fontWeight:"500"}},"离校学生数"),v.default.createElement("p",{style:{fontFamily:"AriaMT",fontSize:"22px",color:"#343e4e",fontWeight:"600"}},a))))),v.default.createElement(d.default,{type:"flex",justify:"center",align:"center"},v.default.createElement(c.default,{span:10,offset:2},v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{position:"relative",overflow:"hidden",height:"100px",width:"88px"}},v.default.createElement("img",{src:"/iot/web/education/resources/img/icon.png",style:{position:"absolute",top:"-8px",left:"-108px"},alt:"InTheSchool"}))),v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{textAlign:"center",padding:"20px 0"}},v.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei,微软雅黑",fontSize:"14px",color:"#343e4e",fontWeight:"500"}},"请假学生数"),v.default.createElement("p",{style:{fontFamily:"AriaMT",fontSize:"22px",color:"#343e4e",fontWeight:"600"}},n)))),v.default.createElement(c.default,{span:10,offset:2},v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{position:"relative",overflow:"hidden",height:"100px",width:"88px"}},v.default.createElement("img",{src:"/iot/web/education/resources/img/icon.png",style:{position:"absolute",top:"-8px",left:"-304px"},alt:"InTheSchool"}))),v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{textAlign:"center",padding:"20px 0"}},v.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei,微软雅黑",fontSize:"14px",color:"#343e4e",fontWeight:"500"}},"暂未到校数"),v.default.createElement("p",{style:{fontFamily:"AriaMT",fontSize:"22px",color:"#343e4e",fontWeight:"600"}},o))))))))});I.prototype={InTheSchool:v.default.PropTypes.string,Schoolleavers:v.default.PropTypes.string,Studentleave:v.default.PropTypes.string,NeverComeToSchool:v.default.PropTypes.string,isPending:v.default.PropTypes.string},t.default=I},775:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=o(r),i=a(10),s=o(i),d=(a(39),a(38)),u=o(d),c=(a(47),a(46)),f=o(c),p=(a(29),a(28)),h=o(p),m=a(13),g=o(m),v=a(1),S=o(v),y=a(9),I=o(y),C=a(3),b=o(C),E=a(2),w=o(E),A=(a(91),a(86)),M=o(A),L=a(0),_=o(L),T=a(21),D=a(17),N=a(1211),x=o(N),k=a(233),O=a(397),R=o(O),F=a(132),P=n(F),G=a(374),H=n(G);a(1608);var V=M.default.Option,B=function(e){function t(e){(0,S.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,g.default)(t)).call(this,e));return W.call(a),a.state={mapLoading:!1,tableLoading:!1,studentPositionList:{},mapTitle:"",mapList:[],bindModuleList:[]},a.columns=[{title:"地图名称",dataIndex:"mapName",width:"30%",onCellClick:a.selectLayer},{title:"定位模块数",dataIndex:"bindModuleList.length",width:"10%",onCellClick:a.selectLayer},{title:"比例尺 (px/m)",dataIndex:"scale",width:"15%",onCellClick:a.selectLayer},{title:"地图描述",dataIndex:"mapDescribe",onCellClick:a.selectLayer,render:function(e,t,a){return t.mapDescribe||"--"}}],a}return(0,w.default)(t,e),(0,I.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.mapList.data&&e.floorInfo.currentMapID){for(var t=e.mapList.data[e.floorInfo.currentMapID].scale||20,a={},n=this.state.studentPositionList,o=e.studentPositionList.length,r=[],l=0;l<o;l++){var i=e.studentPositionList[l];if("all"===e.floorInfo.matched||"matched"===e.floorInfo.matched&&!!i.studentId||"mismatch"===e.floorInfo.matched&&!i.studentId){var s=i.INSn;a[s]={INSn:s,x:null,y:null,location:{}};for(var d=0;d<i.location.length;d++){var u=i.location[d];n[s]&&n[s].location[u.locationName]&&Math.abs(n[s].location[u.locationName].rssi-u.rssi)<20&&(a[s].x||(a[s].x=n[s].x,a[s].y=n[s].y,r.push({x:a[s].x,y:a[s].y,value:1}))),a[s].location[u.locationName]||(a[s].location[u.locationName]=u)}if(!a[s].x){if(1==i.location.length||i.location[0].locationName==i.location[1].locationName){var c=Math.random(),f=(i.location[0].radius||5)*t*(i.location[0].rssi/100)*c,p=f*c,h=f*(1-c);a[s].x=parseInt(parseInt(i.location[0].x)+p),a[s].y=parseInt(parseInt(i.location[0].y)+h)}else a[s].x=parseInt((parseInt(i.location[0].x)*i.location[0].rssi+parseInt(i.location[1].x)*i.location[1].rssi)/(i.location[0].rssi+i.location[1].rssi)),a[s].y=parseInt((parseInt(i.location[0].y)*i.location[0].rssi+parseInt(i.location[1].y)*i.location[1].rssi)/(i.location[0].rssi+i.location[1].rssi));r.push({x:a[s].x,y:a[s].y,value:1})}}}this.getHeatmapInstance().setData({max:1,data:r}),this.setState({studentPositionList:a})}}},{key:"componentDidMount",value:function(){var e=this;this.setState({mapLoading:!0,tableLoading:!0}),this.interval=0,this.props.floorInfoActions.setCurrentMapID(""),this.props.floorInfoActions.setCurrentImgUrl(""),this.props.moduleActions.fetchModuleListData(this.props.scenarioId,this.props.currentSchoolId).then(function(){e.props.moduleActions.updateBindModuleList()}).catch(function(e){}),this.props.moduleActions.fetchMapListData(this.props.scenarioId,this.props.currentSchoolId).then(function(t){e.setState({tableLoading:!1}),e.props.moduleActions.updateBindModuleList();var a=t.value[0];a?(e.getHeatmapInstance().configure({width:a.mapWidth,height:a.mapHeight}),e.props.moduleActions.fetchModuleListDataByMapId({scenarioId:e.props.scenarioId,schoolId:e.props.currentSchoolId,bindMapId:a.mapID}).then(function(t){e.setState({bindModuleList:t.value})}).catch(function(e){}),e.props.moduleActions.fetchSudentPositionData(e.props.scenarioId,e.props.currentSchoolId,a.mapID).then(function(){e.setState({mapLoading:!1})}).catch(function(t){e.setState({mapLoading:!1})}),e.interval=setInterval(function(){e.props.moduleActions.fetchSudentPositionData(e.props.scenarioId,e.props.currentSchoolId,a.mapID).then(function(e){}).catch(function(e){})},5e3),e.props.floorInfoActions.setCurrentMapID(a.mapID),e.props.floorInfoActions.setCurrentImgUrl(a.mapURL),e.setState({mapTitle:a.mapName})):e.setState({mapLoading:!1}),e.setState({mapList:t.value})}).catch(function(e){})}},{key:"componentWillUnmount",value:function(){0!==this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){for(var e=this.columns,t=(this.dataSource,this.props.floorInfo.currentMapID),a=[],n="100%",o="100%",r=this.state.bindModuleList,l=[],i=this.props.mapList.data,s=this.props.mapList.sort,d=0;d<s.length;d++){var c=s[d];i[c]&&l.push(i[c])}for(var d=r.length-1;d>=0;d--){var p=r[d];a.push(_.default.createElement(R.default,{key:d,IM_SN:d,currentMapID:t,bind_x:p.bind_x,bind_y:p.bind_y,location:p.locationName}))}i[t]&&(n=parseInt(i[t].mapWidth),o=parseInt(i[t].mapHeight));var m=_.default.createElement(M.default,{defaultValue:"all",style:{width:120,marginTop:-5},onChange:this.handleChange},_.default.createElement(V,{value:"all"},"全部"),_.default.createElement(V,{value:"matched"},"已匹配"),_.default.createElement(V,{value:"mismatch"},"未匹配"));return _.default.createElement(u.default,{title:"热图: "+this.state.mapTitle,bodyStyle:{paddingTop:0},extra:m},_.default.createElement("div",{style:{height:580,width:"100%",position:"relative",paddingTop:27,paddingLeft:24,paddingRight:24,backgroundColor:"#aabac3"}},_.default.createElement(h.default,{spinning:this.state.mapLoading},_.default.createElement(k.Scrollbars,{renderThumbHorizontal:this.renderThumb,renderThumbVertical:this.renderThumb,style:{height:526,position:"relative",backgroundColor:"white",boxShadow:"2px 2px 2px #888888",zIndex:50,textAlign:"center",margin:"0 auto"}},_.default.createElement("div",{ref:"container",style:{position:"absolute",left:"0px",top:"0px",width:n,height:o}},_.default.createElement("img",{style:{verticalAlign:"middle",position:"absolute",left:"0px",top:"0px"},ref:"myImg",src:this.props.floorInfo.currentImgUrl,alt:""}),_.default.createElement("div",{id:"dragCanvas",style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}},a))))),_.default.createElement("div",{style:{marginTop:20}},_.default.createElement(f.default,{size:"small",bordered:!0,dataSource:l,columns:e,rowKey:"mapID",pagination:{defaultPageSize:5,size:"large"},rowClassName:this.setSelectedRowClass,loading:this.state.tableLoading})))}}]),t}(L.Component),W=function(){var e=this;this.getHeatmapInstance=function(){return e.heatmapInstance||(e.heatmapInstance=x.default.create({container:e.refs.container})),e.heatmapInstance},this.selectLayer=function(t){if(e.props.floorInfo.currentMapID!=t.mapID){e.props.floorInfoActions.setCurrentMapID(t.mapID),0!==e.interval&&clearInterval(e.interval),e.props.studentPositionList.length>0&&e.props.moduleActions.dleSudentPositionData(),e.setState({mapLoading:!0,bindModuleList:[]}),e.props.moduleActions.fetchModuleListDataByMapId({scenarioId:e.props.scenarioId,schoolId:e.props.currentSchoolId,bindMapId:t.mapID}).then(function(t){e.setState({bindModuleList:t.value})}).catch(function(e){}),e.props.moduleActions.fetchSudentPositionData(e.props.scenarioId,e.props.currentSchoolId,t.mapID).then(function(t){e.setState({mapLoading:!1})}).catch(function(t){e.setState({mapLoading:!1})}),e.interval=setInterval(function(){e.props.moduleActions.fetchSudentPositionData(e.props.scenarioId,e.props.currentSchoolId,t.mapID).then(function(e){}).catch(function(e){})},5e3);var a=-1;if(e.state.mapList.some(function(e,n){return a=n,e.mapID===t.mapID})){var n=e.state.mapList[a],o=n.mapURL;e.setState({mapTitle:n.mapName}),e.props.floorInfoActions.setCurrentImgUrl(o)}var r=e.props.mapList.data[t.mapID];if(r){var l=parseInt(r.mapWidth),i=parseInt(r.mapHeight);e.getHeatmapInstance().configure({width:l,height:i})}}},this.setSelectedRowClass=function(t){return t.mapID===e.props.floorInfo.currentMapID?"selected-layer":""},this.renderThumb=function(e){var t=e.style,a=(0,s.default)(e,["style"]),n={backgroundColor:"rgba(0, 0, 0, 0.4)",borderRadius:"inherit",cursor:"pointer"};return _.default.createElement("div",(0,l.default)({style:(0,l.default)({},t,n)},a))},this.handleChange=function(t){e.props.floorInfoActions.setMatchedType(t)}};t.default=(0,T.connect)(function(e){return{mapList:e.common.module.mapList,studentPositionList:e.common.module.studentPositionList,floorInfo:e.dashboard.floorInfo}},function(e){return{moduleActions:(0,D.bindActionCreators)(P,e),floorInfoActions:(0,D.bindActionCreators)(H,e)}})(B)},776:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(47),a(46)),l=o(r),i=(a(117),a(130)),s=o(i),d=(a(45),a(44)),u=o(d),c=(a(54),a(53)),f=o(c),p=(a(33),a(18)),h=o(p),m=(a(37),a(35)),g=o(m),v=(a(41),a(48)),S=o(v),y=a(4),I=o(y),C=(a(23),a(22)),b=o(C),E=a(13),w=o(E),A=a(1),M=o(A),L=a(9),_=o(L),T=a(3),D=o(T),N=a(2),x=o(N),k=(a(202),a(201)),O=o(k),R=a(0),F=o(R),P=a(40),G=a(17),H=a(21),V=a(58),B=o(V),W=a(375),z=n(W),U=a(131),j=n(U),K=O.default.TabPane,q=function(e){switch(e){case 1:return"六年制小学";case 2:return"三年制初中";case 3:return"三年制高中";case 4:return"综合中学";case 5:return"幼儿园";case 6:return"自定义";default:return""}},Y=function(e){function t(){var e,a,n,o;(0,M.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,D.default)(this,(e=t.__proto__||(0,w.default)(t)).call.apply(e,[this].concat(l))),n.goback=function(){P.browserHistory.push("/iot/web/education/school/dashboard")},n.click=function(e){1==e?n.props.heartAlertDetailActions.getStudentsByHeartAlarm(n.props.scenarioId,n.props.currentSchoolId,"fast").catch(function(e){b.default.error("获取心率过速列表失败:"+e.message)}):n.props.heartAlertDetailActions.getStudentsByHeartAlarm(n.props.scenarioId,n.props.currentSchoolId,"slow").catch(function(e){b.default.error("获取心率过缓列表失败:"+e.message)})},o=a,(0,D.default)(n,o)}return(0,x.default)(t,e),(0,_.default)(t,[{key:"componentDidMount",value:function(){this.fetchDataAfterGetSchoolId(this.props.scenarioId,this.props.currentSchoolId),this.props.heartAlertDetailActions.getStudentsByHeartAlarm(this.props.scenarioId,this.props.currentSchoolId,"fast").catch(function(e){b.default.error("获取心率过速列表失败:"+e.message)})}},{key:"fetchDataAfterGetSchoolId",value:function(e,t){var a=this;this.props.classTableActions.fetchGradeConfig(e,t).then(function(e){if(0===e.value.gradeConf.length)return void a.props.classTableActions.showGradeTypeModel();var t=q(e.value.gradeType);a.props.classTableActions.setGradeTypeString(t)}).catch(function(e){b.default.error("获取年级类型失败: "+e.message)}),this.fetchData(e,t)}},{key:"fetchData",value:function(e,t){this.props.classTableActions.fetchClassTableData(e,t).catch(function(e){b.default.error("获取班级列表失败: "+e.message)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.heartAlertDetailActions,n=t.heartAlertDetailState,o=this.props.heartAlertDetailState,r=o.fastData,i=o.slowData,d=this.props.classTable.classTableData,c=[];d.map(function(e){var t=!0,a=e.grade;c.some(function(e){return e===a&&(t=!1),e===a}),t&&c.push(a)});var p=[{title:"学生",dataIndex:"studentName",key:"studentName",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchStudentName=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{studentName:e.searchStudentName.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{studentName:e.searchStudentName.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.slowFilter.studentName?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchStudentId=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{studentId:e.searchStudentId.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{studentId:e.searchStudentId.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.slowFilter.studentId?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filters:c.map(function(e){return{text:e,value:e}}),onFilter:function(e,t){return e===t.grade}},{title:"班级",dataIndex:"classId",key:"classId",render:function(e){return e+"班"},filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchClassId=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{classId:e.searchClassId.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchSlowFilter((0,I.default)({},n.slowFilter,{classId:e.searchClassId.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.slowFilter.classId?"#1cc09f":"#aaa"}})},{title:"心率",key:"heartRate",dataIndex:"heartRate"},{title:"检测时间",key:"updateTime",dataIndex:"updateTime"},{title:"联系家长",dataIndex:"householder",render:function(e){if(e.length){var t=F.default.createElement("div",{style:{width:250,color:"#80878c"}},F.default.createElement(u.default,null,F.default.createElement(f.default,{span:8},"家长姓名"),F.default.createElement(f.default,{span:8},"亲缘关系"),F.default.createElement(f.default,{span:8},"联系方式")),e.map(function(e){return F.default.createElement(u.default,{key:e.name},F.default.createElement(f.default,{span:8},e.name),F.default.createElement(f.default,{span:8},e.relationship),F.default.createElement(f.default,{span:8},e.tel))}));return F.default.createElement(s.default,{content:t,title:"家长信息",trigger:"hover"},F.default.createElement("div",{className:"operation"},F.default.createElement("a",{style:{color:"#1cc09f",fontWeight:600,textDecoration:"underline"}},e[0].name)))}return""}}],m=[{title:"学生",dataIndex:"studentName",key:"studentName",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchStudentName=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{studentName:e.searchStudentName.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{studentName:e.searchStudentName.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.fastFilter.studentName?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchStudentId=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{studentId:e.searchStudentId.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{studentId:e.searchStudentId.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.fastFilter.studentId?"#1cc09f":"#aaa"}})},{title:"年级",dataIndex:"grade",key:"grade",filters:c.map(function(e){return{text:e,value:e}}),onFilter:function(e,t){return e===t.grade}},{title:"班级",dataIndex:"classId",key:"classId",render:function(e){return e+"班"},filterDropdown:F.default.createElement("div",{className:"custom-filter-dropdown"},F.default.createElement(S.default,{ref:function(t){e.searchClassId=t},placeholder:"请输入搜索班级",onPressEnter:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{classId:e.searchClassId.refs.input.value}))}}),F.default.createElement(g.default,{type:"primary",onClick:function(){return a.setSearchFastFilter((0,I.default)({},n.fastFilter,{classId:e.searchClassId.refs.input.value}))}},"搜索")),filterIcon:F.default.createElement(h.default,{type:"search",style:{color:n.fastFilter.classId?"#1cc09f":"#aaa"}})},{title:"心率",key:"heartRate",dataIndex:"heartRate"},{title:"检测时间",key:"updateTime",dataIndex:"updateTime"},{title:"联系家长",dataIndex:"householder",render:function(e){if(e.length){var t=F.default.createElement("div",{style:{width:250,color:"#80878c"}},F.default.createElement(u.default,null,F.default.createElement(f.default,{span:8},"家长姓名"),F.default.createElement(f.default,{span:8},"亲缘关系"),F.default.createElement(f.default,{span:8},"联系方式")),e.map(function(e){return F.default.createElement(u.default,{key:e.name},F.default.createElement(f.default,{span:8},e.name),F.default.createElement(f.default,{span:8},e.relationship),F.default.createElement(f.default,{span:8},e.tel))}));return F.default.createElement(s.default,{content:t,title:"家长信息",trigger:"hover"},F.default.createElement("div",{className:"operation"},F.default.createElement("a",{style:{color:"#1cc09f",fontWeight:600,textDecoration:"underline"}},e[0].name)))}return""}}];return F.default.createElement(B.default,null,F.default.createElement(u.default,null,F.default.createElement(g.default,{type:"primary",icon:"arrow-left",style:{marginBottom:"15px"},onClick:this.goback},"返回校园概览")),F.default.createElement(u.default,null,F.default.createElement("div",{className:"card-container"},F.default.createElement(O.default,{type:"card",ref:"x",onTabClick:this.click,style:{height:"100%"}},F.default.createElement(K,{tab:"心率过速",key:"1"},F.default.createElement(l.default,{rowKey:"studentId",columns:m,dataSource:r,pagination:{pageSize:10},loading:this.props.heartAlertDetailState.fastIspending})),F.default.createElement(K,{tab:"心率过缓",key:"2"},F.default.createElement(l.default,{rowKey:"studentId",columns:p,dataSource:i,pagination:{pageSize:10},loading:this.props.heartAlertDetailState.slowIspending}))))))}}]),t}(F.default.Component),J=function(e,t){return e.filter(function(e){return-1!==e.classId.indexOf(t)})},$=function(e,t){return e.filter(function(e){return-1!==e.classId.indexOf(t.classId)&&-1!==e.studentId.indexOf(t.studentId)&&-1!==e.studentName.indexOf(t.studentName)})},Z=function(e,t){return e.filter(function(e){return-1!==e.classId.indexOf(t.classId)&&-1!==e.studentId.indexOf(t.studentId)&&-1!==e.studentName.indexOf(t.studentName)})};t.default=(0,H.connect)(function(e){return{heartAlertDetailState:(0,I.default)({},e.dashboard.heartAlertDetail,{slowData:$(e.dashboard.heartAlertDetail.slowData,e.dashboard.heartAlertDetail.slowFilter),fastData:Z(e.dashboard.heartAlertDetail.fastData,e.dashboard.heartAlertDetail.fastFilter)}),scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,classTable:(0,I.default)({},e.schoolManage.classTable,{classTableData:J(e.schoolManage.classTable.classTableData,e.schoolManage.classTable.searchClassId)})}},function(e){return{heartAlertDetailActions:(0,G.bindActionCreators)(z,e),classTableActions:(0,G.bindActionCreators)(j,e)}})(Y)},777:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(45),a(44)),d=n(s),u=(a(54),a(53)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(173),a(172)),m=n(h),g=a(0),v=n(g),S=a(40),y=function(e){var t=e.heartRateFast,a=e.heartRateSlow,n=e.isPending,o=e.refresh,l=e.ConfigOption,s=function(){S.browserHistory.push("/iot/web/education/school/dashboard/heartAlert-detail")};return v.default.createElement(r.default,{title:"心率告警",style:{height:280},extra:v.default.createElement("div",null,v.default.createElement(m.default,{style:{cursor:"pointer"},color:"#1cc09f",onClick:s},"详情"),v.default.createElement(m.default,{color:"#1cc09f",onClick:function(){o.fetchHeartAlert(l.scenarioId,l.currentSchoolId)}},v.default.createElement(p.default,{type:"sync"})))},v.default.createElement(d.default,null,v.default.createElement("div",null,v.default.createElement(i.default,{spinning:n},v.default.createElement(d.default,null,v.default.createElement(c.default,{span:12},v.default.createElement("div",null,v.default.createElement(d.default,null,v.default.createElement(c.default,{span:24},v.default.createElement("div",{style:{backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-400px -9px",height:"110px",width:"110px",margin:"0 auto"}}))),v.default.createElement(d.default,null,v.default.createElement(c.default,{span:24},v.default.createElement("div",{style:{minWidth:"155px",height:"110px",textAlign:"center"}},v.default.createElement("p",{style:{height:"50px",padding:"8% 0 5% 0",fontWeight:"600",fontSize:"14px"}},"心率过速(大于100)"),v.default.createElement("p",{style:{height:"60px",fontSize:"22px",fontWeight:"800",color:"#ff405b",fontFamily:"AriaMT"}},t)))))),v.default.createElement(c.default,{span:12},v.default.createElement("div",{style:{height:"200px"}},v.default.createElement(d.default,null,v.default.createElement(c.default,{span:24},v.default.createElement("div",{style:{backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-510px -9px",height:"110px",width:"110px",margin:"0 auto"}}))),v.default.createElement(d.default,null,v.default.createElement(c.default,{span:24},v.default.createElement("div",{style:{minWidth:"155px",height:"110px",textAlign:"center"}},v.default.createElement("p",{style:{height:"50px",padding:"8% 0 5% 0",fontWeight:"600",fontSize:"14px"}},"心率过缓(小于60)"),v.default.createElement("p",{style:{height:"60px",fontSize:"22px",fontWeight:"800",color:"#2f9eff",fontFamily:"AriaMT"}},a)))))))))))};y.prototype={heartRateFast:v.default.PropTypes.string,heartRateSlow:v.default.PropTypes.string,isPending:v.default.PropTypes.bool},t.default=y},778:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(173),a(172)),d=n(s),u=(a(33),a(18)),c=n(u),f=(a(23),a(22)),p=n(f),h=a(13),m=n(h),g=a(1),v=n(g),S=a(9),y=n(S),I=a(3),C=n(I),b=a(2),E=n(b),w=a(0),A=n(w),M=a(197),L=n(M),_=a(17),T=a(21),D=a(377),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(D),x=function(e){function t(){var e,a,n,o;(0,v.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,C.default)(this,(e=t.__proto__||(0,m.default)(t)).call.apply(e,[this].concat(l))),n.getoption=function(e){var t=e.data,a=e.rate;return{tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"rgb(26, 179, 148)"}},formatter:function(e){return e[0].name+"<br/>"+e[0].seriesName+":"+parseInt(100*parseFloat(e[0].value))+"%"}},grid:{top:10,left:10,right:35,bottom:20,containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,data:t,axisLine:{lineStyle:{color:"#80878C",width:1}}},yAxis:{type:"value",axisLabel:{formatter:function(e){return 100*e+"%"}},axisLine:{lineStyle:{color:"#80878C",width:1}},splitLine:{lineStyle:{type:"dashed"}}},series:{name:"到校率",type:"line",smooth:!0,showSymbol:!1,lineStyle:{normal:{color:"#1cc09f",width:1}},itemStyle:{normal:{color:"rgb(26, 179, 148)",borderWidth:1}},areaStyle:{normal:{color:"rgba(28, 192, 159, 0.4)",opacity:1}},data:a}}},n.resize=function(){var e=n.getoption(n.props.historySchoolRateState),t=L.default.init(n.refs.HistorySchoolRate);t.setOption(e),t.resize()},o=a,(0,C.default)(n,o)}return(0,E.default)(t,e),(0,y.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(!e.historySchoolRateState.isPending){var t=this.getoption(e.historySchoolRateState);L.default.init(this.refs.HistorySchoolRate).setOption(t)}}},{key:"componentDidMount",value:function(){this.props.historySchoolRateActions.fetchHistorySchoolRateData(this.props.scenarioId,this.props.currentSchoolId,"aWeek").catch(function(e){p.default.error("获取历史到校率失败:"+e.message)}),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){this.props.historySchoolRateActions.setActiveKey({activeKey:"aWeek"}),window.removeEventListener("resize",this.resize)}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.historySchoolRateState.isPending;return A.default.createElement(r.default,{title:"历史到校率",extra:A.default.createElement("div",null,A.default.createElement("a",{style:{margin:"0px 6px",color:"aWeek"===this.props.historySchoolRateState.activeKey?"#49a9ee":"#80878c"},onClick:function(){e.props.historySchoolRateActions.setActiveKey({activeKey:"aWeek"}),e.props.historySchoolRateActions.fetchHistorySchoolRateData(e.props.scenarioId,e.props.currentSchoolId,"aWeek").catch(function(e){p.default.error("获取历史到校率失败:"+e.message)})}},"周 "),"|",A.default.createElement("a",{style:{margin:"0px 6px",color:"aMonth"===this.props.historySchoolRateState.activeKey?"#49a9ee":"#80878c"},onClick:function(){e.props.historySchoolRateActions.setActiveKey({activeKey:"aMonth"}),e.props.historySchoolRateActions.fetchHistorySchoolRateData(e.props.scenarioId,e.props.currentSchoolId,"aMonth").catch(function(e){p.default.error("获取历史到校率失败:"+e.message)})}}," 月"),A.default.createElement(d.default,{color:"#1cc09f",onClick:function(){e.props.historySchoolRateActions.fetchHistorySchoolRateData(e.props.scenarioId,e.props.currentSchoolId,e.props.historySchoolRateState.activeKey)}},A.default.createElement(c.default,{type:"sync"}))),style:{height:280}},A.default.createElement(i.default,{spinning:t},A.default.createElement("div",{ref:"HistorySchoolRate",style:{height:210,width:"100%"}})))}}]),t}(A.default.Component);t.default=(0,T.connect)(function(e){return{historySchoolRateState:e.dashboard.historySchoolRate,currentSchoolId:e.common.scenario.currentSchoolId,scenarioId:e.common.scenario.scenarioId}},function(e){return{historySchoolRateActions:(0,_.bindActionCreators)(N,e)}})(x)},779:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(37),a(35)),d=n(s),u=(a(41),a(48)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(23),a(22)),m=n(h),g=a(4),v=n(g),S=a(13),y=n(S),I=a(1),C=n(I),b=a(9),E=n(b),w=a(3),A=n(w),M=a(2),L=n(M),_=(a(202),a(201)),T=n(_),D=a(0),N=n(D),x=a(58),k=n(x),O=a(40),R=a(17),F=a(21),P=a(378),G=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(P);a(1609);var H=T.default.TabPane,V=function(e){function t(e){(0,C.default)(this,t);var a=(0,A.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e));return a.goback=function(){O.browserHistory.push("/iot/web/education/school/dashboard")},a.handleInSchSearch=function(){var e=a.props.inoutDetailState.studentPagination.pagination,t=a.props.inoutDetailState.studentFilter;void 0===t.studentIdWeak?a.setState({idFiltered:!1}):a.setState({idFiltered:!0}),void 0===t.studentNameWeak?a.setState({nameFiltered:!1}):a.setState({nameFiltered:!0}),a.handleInSchTableChange(e,null,null,!0)},a.handleInSchTableChange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(e.current,e.pageSize),l=a.props,i=l.scenarioId,s=l.schoolId,d=(l.inoutDetailState,o?{pagination:(0,v.default)({},e,{current:1})}:{pagination:e});a.props.inoutDetailActions.saveStudentPagination(d);var u=(0,v.default)({},a.props.inoutDetailState.studentFilter);a.setState({dataLoading:!0}),a.fetchInSchData(i,s,(d.pagination.current-1)*r,r,u)},a.handleOutSchSearch=function(){var e=a.props.inoutDetailState.studentPagination.pagination,t=a.props.inoutDetailState.studentFilter;void 0===t.studentIdWeak?a.setState({idFiltered:!1}):a.setState({idFiltered:!0}),void 0===t.studentNameWeak?a.setState({nameFiltered:!1}):a.setState({nameFiltered:!0}),a.handleOutSchTableChange(e,null,null,!0)},a.handleOutSchTableChange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(e.current,e.pageSize),l=a.props,i=l.scenarioId,s=l.schoolId,d=(l.inoutDetailState,o?{pagination:(0,v.default)({},e,{current:1})}:{pagination:e});a.props.inoutDetailActions.saveStudentPagination(d);var u=(0,v.default)({},a.props.inoutDetailState.studentFilter);a.setState({dataLoading:!0}),a.fetchOutSchData(i,s,(d.pagination.current-1)*r,r,u)},a.onTabsChange=function(e){var t={},n=a.props,o=n.scenarioId,r=n.schoolId,l=n.inoutDetailActions;l.saveStudentFilter(t),l.saveStudentPagination({pagination:{pageSize:10,current:1}}),"1"==e?(a.setState({dataLoading:!0,idFiltered:!1,nameFiltered:!1,studentId:"",studentName:""}),a.fetchInSchData(o,r,0,10,{})):"2"==e&&(a.setState({dataLoading:!0,idFiltered:!1,nameFiltered:!1,studentId:"",studentName:""}),a.fetchOutSchData(o,r,0,10,{}))},a.idEmitEmpty=function(){var e=a.props,t=e.inoutDetailState,n=e.inoutDetailActions,o=t.studentFilter;a.studentIdInput.focus(),a.setState({studentId:""}),void 0!==o.studentIdWeak&&delete o.studentIdWeak,n.saveStudentFilter(o)},a.nameEmitEmpty=function(){var e=a.props,t=e.inoutDetailState,n=e.inoutDetailActions,o=t.studentFilter;a.studentNameInput.focus(),a.setState({studentName:""}),void 0!==o.studentNameWeak&&delete o.studentNameWeak,n.saveStudentFilter(o)},a.state={dataLoading:!0,idFiltered:!1,nameFiltered:!1,studentId:"",studentName:""},a}return(0,L.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.schoolId,n=this.props.inoutDetailState.studentPagination.pagination;n.current,n.pageSize;""!==t&&""!==a&&(this.fetchInSchData(t,a,0,10,{}),this.fetchOutSchData(t,a,0,10,{}))}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.schoolId!==e.schoolId)&&e.scenarioId&&e.schoolId&&(this.fetchInSchData(e.scenarioId,e.schoolId,0,10,{}),this.fetchOutSchData(e.scenarioId,e.schoolId,0,10,{}))}},{key:"fetchInSchData",value:function(e,t,a,n){var o=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.props.inoutDetailActions.getStudentInSchoolData(e,t,a,n,r).then(function(){o.setState({dataLoading:!1})}).catch(function(e){o.setState({dataLoading:!1}),m.default.error("获取进校详情失败: "+e.message)})}},{key:"fetchOutSchData",value:function(e,t,a,n){var o=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.props.inoutDetailActions.getStudentOutSchoolData(e,t,a,n,r).then(function(){o.setState({dataLoading:!1})}).catch(function(e){o.setState({dataLoading:!1}),m.default.error("获取出校详情失败: "+e.message)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.inoutDetailState,n=t.inoutDetailActions,o=this.state.studentId?N.default.createElement(p.default,{type:"close-circle",onClick:this.idEmitEmpty}):null,l=this.state.studentName?N.default.createElement(p.default,{type:"close-circle",onClick:this.nameEmitEmpty}):null,s=[{title:"姓名",dataIndex:"studentName",key:"studentName",width:297,filterDropdown:N.default.createElement("div",{className:"custom-filter-dropdown"},N.default.createElement(c.default,{value:a.studentFilter.studentNameWeak,placeholder:"请输入搜索姓名",suffix:l,style:{width:140},ref:function(t){return e.studentNameInput=t},onChange:function(t){var o=a.studentFilter;""===t.target.value?void 0!==o.studentNameWeak&&delete o.studentNameWeak:o=(0,v.default)({},a.studentFilter,{studentNameWeak:t.target.value}),e.setState({studentName:t.target.value}),n.saveStudentFilter(o)},onPressEnter:this.handleInSchSearch}),N.default.createElement(d.default,{type:"primary",onClick:this.handleInSchSearch},"搜索")),filterIcon:N.default.createElement(p.default,{type:"search",style:{color:this.state.nameFiltered?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",width:296,filterDropdown:N.default.createElement("div",{className:"custom-filter-dropdown"},N.default.createElement(c.default,{value:a.studentFilter.studentIdWeak,placeholder:"请输入搜索学号",suffix:o,style:{width:140},ref:function(t){return e.studentIdInput=t},onChange:function(t){var o=a.studentFilter;""===t.target.value?void 0!==o.studentIdWeak&&delete o.studentIdWeak:o=(0,v.default)({},a.studentFilter,{studentIdWeak:t.target.value}),e.setState({studentId:t.target.value}),n.saveStudentFilter(o)},onPressEnter:this.handleInSchSearch}),N.default.createElement(d.default,{type:"primary",onClick:this.handleInSchSearch},"搜索")),filterIcon:N.default.createElement(p.default,{type:"search",style:{color:this.state.idFiltered?"#1cc09f":"#aaa"}})},{title:"进校时间",dataIndex:"inOutSchoolTime",key:"inOutSchoolTime",width:296}],u=[{title:"姓名",dataIndex:"studentName",key:"studentName",width:297,filterDropdown:N.default.createElement("div",{className:"custom-filter-dropdown"},N.default.createElement(c.default,{value:a.studentFilter.studentNameWeak,placeholder:"请输入搜索姓名",suffix:l,style:{width:140},ref:function(t){return e.studentNameInput=t},onChange:function(t){var o=a.studentFilter;""===t.target.value?void 0!==o.studentNameWeak&&delete o.studentNameWeak:o=(0,v.default)({},a.studentFilter,{studentNameWeak:t.target.value}),e.setState({studentName:t.target.value}),n.saveStudentFilter(o)},onPressEnter:this.handleOutSchSearch}),N.default.createElement(d.default,{type:"primary",onClick:this.handleOutSchSearch},"搜索")),filterIcon:N.default.createElement(p.default,{type:"search",style:{color:this.state.nameFiltered?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",key:"studentId",width:296,filterDropdown:N.default.createElement("div",{className:"custom-filter-dropdown"},N.default.createElement(c.default,{value:a.studentFilter.studentIdWeak,placeholder:"请输入搜索学号",suffix:o,style:{width:140},ref:function(t){return e.studentIdInput=t},onChange:function(t){var o=a.studentFilter;""===t.target.value?void 0!==o.studentIdWeak&&delete o.studentIdWeak:o=(0,v.default)({},a.studentFilter,{studentIdWeak:t.target.value}),e.setState({studentId:t.target.value}),n.saveStudentFilter(o)},onPressEnter:this.handleOutSchSearch}),N.default.createElement(d.default,{type:"primary",onClick:this.handleOutSchSearch},"搜索")),filterIcon:N.default.createElement(p.default,{type:"search",style:{color:this.state.idFiltered?"#1cc09f":"#aaa"}})},{title:"出校时间",dataIndex:"inOutSchoolTime",key:"inOutSchoolTime",width:296}];return N.default.createElement(k.default,null,N.default.createElement(i.default,null,N.default.createElement(d.default,{type:"primary",icon:"arrow-left",style:{marginBottom:"15px"},onClick:this.goback},"返回校园概览")),N.default.createElement(i.default,null,N.default.createElement("div",{className:"inOutSchool-tabs"},N.default.createElement(T.default,{type:"card",ref:"x",style:{height:"100%"},onChange:this.onTabsChange},N.default.createElement(H,{tab:"入校情况",key:"1"},N.default.createElement("div",{style:{background:"#fff",padding:"16px",marginTop:"-16px",minHeight:680}},N.default.createElement(r.default,{className:"ant-table-inschool",rowKey:function(e){return e.studentId+e.inOutSchoolTime},columns:s,dataSource:this.props.inoutDetailState.inSchoolTable,onChange:this.handleInSchTableChange,loading:this.state.dataLoading,pagination:{total:a.inTotalCount,showSizeChanger:!0,showQuickJumper:!0,current:a.studentPagination.pagination.current}}))),N.default.createElement(H,{tab:"离校情况",key:"2"},N.default.createElement("div",{style:{background:"#fff",padding:"16px",marginTop:"-16px",minHeight:680}},N.default.createElement(r.default,{className:"ant-table-outschool",rowKey:function(e){return e.studentId+e.inOutSchoolTime},columns:u,dataSource:this.props.inoutDetailState.outSchoolTable,onChange:this.handleOutSchTableChange,loading:this.state.dataLoading,pagination:{total:a.outTotalCount,showSizeChanger:!0,showQuickJumper:!0,current:a.studentPagination.pagination.current}})))))))}}]),t}(N.default.Component);t.default=(0,F.connect)(function(e){return{inoutDetailState:e.dashboard.inoutDetail,scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId}},function(e){return{inoutDetailActions:(0,R.bindActionCreators)(G,e)}})(V)},780:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(47),a(46)),i=n(l),s=(a(33),a(18)),d=n(s),u=(a(173),a(172)),c=n(u),f=a(13),p=n(f),h=a(1),m=n(h),g=a(9),v=n(g),S=a(3),y=n(S),I=a(2),C=n(I),b=a(0),E=n(b),w=a(233),A=a(40),M=a(17),L=a(21),_=a(379),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_),D=[{title:"姓名",dataIndex:"studentName",key:"studentName",width:70},{title:"学号",dataIndex:"studentId",key:"studentId",width:110},{title:"出入校情况",dataIndex:"inOut",key:"inOut",width:90,render:function(e,t,a){return"出校"==t.inOut?"离校":"入校"}},{title:"时间",dataIndex:"inOutSchoolTime",key:"inOutSchoolTime",width:130}],N=function(e){function t(e){(0,m.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.refresh=function(){var e=a.props,t=e.scenarioId,n=e.currentSchoolId,o=e.inoutSchoolActions;a.setState({dataLoading:!0}),o.getInOutSchoolData(t,n).then(function(){a.setState({dataLoading:!1})}).catch(function(e){a.setState({dataLoading:!1})})},a.state={dataLoading:!0},a}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.currentSchoolId,o=t.inoutSchoolActions;this.interval=0,""!==a&&""!==n&&(o.getInOutSchoolData(a,n).then(function(){e.setState({dataLoading:!1})}).catch(function(t){e.setState({dataLoading:!1})}),this.interval=setInterval(function(){o.getInOutSchoolData(a,n).catch()},15e3))}},{key:"componentWillUnmount",value:function(){this.interval&&(clearInterval(this.interval),this.interval=0)}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&(e.inoutSchoolActions.getInOutSchoolData(e.scenarioId,e.currentSchoolId).then(function(){t.setState({dataLoading:!1})}).catch(function(e){t.setState({dataLoading:!1})}),this.interval||(this.interval=setInterval(function(){e.inoutSchoolActions.getInOutSchoolData(e.scenarioId,e.currentSchoolId).catch()},15e3)))}},{key:"inOutSchoolCli",value:function(){A.browserHistory.push({pathname:"/iot/web/education/school/dashboard/inout-school"})}},{key:"render",value:function(){return E.default.createElement(r.default,{bordered:!1,title:"出入校记录",style:{height:280},bodyStyle:{padding:"0 5px"},extra:E.default.createElement("div",null,E.default.createElement(c.default,{style:{cursor:"pointer"},color:"#1cc09f",onClick:this.inOutSchoolCli},"详情"),E.default.createElement(c.default,{color:"#1cc09f",onClick:this.refresh},E.default.createElement(d.default,{type:"sync"})))},E.default.createElement(w.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!0,autoHeightMin:212},E.default.createElement(i.default,{rowKey:function(e){return e.studentName+e.inOut+e.inOutSchoolTime},columns:D,dataSource:this.props.inoutSchoolState.inoutSchoolTable,size:"middle",loading:this.state.dataLoading,pagination:!1})))}}]),t}(E.default.Component);t.default=(0,L.connect)(function(e){return{inoutSchoolState:e.dashboard.inoutSchool,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{inoutSchoolActions:(0,M.bindActionCreators)(T,e)}})(N)},781:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(47),a(46)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(17),E=a(21),w=a(380),A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(w),M=[],L=[{title:"排名",dataIndex:"rank",key:"rank",width:"12%"},{title:"年级",dataIndex:"grade",key:"grade",width:"29%"},{title:"班号",dataIndex:"classId",key:"classId",width:"10%"},{title:"今日平均数",dataIndex:"todayAveStep",key:"todayAveStep",width:"20%"},{title:"昨日平均数",key:"yesterdayAveStep",dataIndex:"yesterdayAveStep",width:"19%"}],_=[{title:"排名",dataIndex:"rank",key:"rank",width:"10%"},{title:"姓名",dataIndex:"studentName",key:"studentName",width:"20%"},{title:"学号",dataIndex:"studentId",key:"studentId",width:"20%"},{title:"今日步数",dataIndex:"todayStep",key:"todayStep",width:"20%"},{title:"昨日步数",key:"yesterdayStep",dataIndex:"yesterdayStep",width:"19%"}],T=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&(M=L,this.props.setRankingActions.emptyData(),this.props.setRankingActions.getClassAvgStepRank(e.scenarioId,e.currentSchoolId).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})),this.props.config.baseGrade===e.config.baseGrade&&this.props.config.classId===e.config.classId&&this.props.config.years===e.config.years||(this.props.setRankingActions.emptyData(),e.config.classId?(M=_,this.props.setRankingActions.getStudentStepRankByClass(this.props.scenarioId,this.props.currentSchoolId,e.config).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})):void 0!==e.config.baseGrade?(M=L,this.props.setRankingActions.getClassAvgStepRank(this.props.scenarioId,this.props.currentSchoolId,e.config).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})):void 0===e.config.baseGrade&&(M=L,this.props.setRankingActions.getClassAvgStepRank(this.props.scenarioId,this.props.currentSchoolId,e.config).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})))}},{key:"componentDidMount",value:function(){this.props.setRankingActions.emptyData(),""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&(void 0!==this.props.config.classId?(M=_,this.props.setRankingActions.getStudentStepRankByClass(this.props.scenarioId,this.props.currentSchoolId,this.props.config).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})):(M=L,this.props.setRankingActions.getClassAvgStepRank(this.props.scenarioId,this.props.currentSchoolId,this.props.config).catch(function(e){d.default.error("获取步数排名失败:"+e.message)})))}},{key:"render",value:function(){return C.default.createElement(r.default,{bordered:!1,title:"步数排名",style:{height:280}},C.default.createElement(i.default,{scroll:{y:120},loading:this.props.setRankingState.isPending,columns:M,pagination:!1,dataSource:this.props.setRankingState.data,bordered:!0,size:"middle"}))}}]),t}(C.default.Component);t.default=(0,E.connect)(function(e){return{setRankingState:e.healthMonitor.setRanking,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{setRankingActions:(0,b.bindActionCreators)(A,e)}})(T)},782:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.InoutSchool=t.Alert=t.FloorInfo=t.SetRanking=t.HistorySchoolRate=t.HeartRate=t.Attendance=void 0;var o=a(774),r=n(o),l=a(777),i=n(l),s=a(778),d=n(s),u=a(781),c=n(u),f=a(775),p=n(f),h=a(772),m=n(h),g=a(780),v=n(g);t.Attendance=r.default,t.HeartRate=i.default,t.HistorySchoolRate=d.default,t.SetRanking=c.default,t.FloorInfo=p.default,t.Alert=m.default,t.InoutSchool=v.default},783:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(118),a(97)),i=n(l),s=(a(45),a(44)),d=n(s),u=(a(54),a(53)),c=n(u),f=a(13),p=n(f),h=a(1),m=n(h),g=a(9),v=n(g),S=a(3),y=n(S),I=a(2),C=n(I),b=a(0),E=n(b),w=(a(17),a(21)),A=function(e){function t(){return(0,m.default)(this,t),(0,y.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,C.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=[],t=[],a=[],n=[],o=[],l=[],s=0,u=0,f=0,p=0,h=0,m=0,g=0,v=this.props.statureState,S=this.props.weightState,y=v.shortNum+v.normalNum+v.tallNum,I=S.thinNum+S.normalNum+S.fatNum;0!==y&&(s=Math.round(28*v.shortNum/y),u=Math.round(28*v.normalNum/y),f=28-s-u),0!==I&&(p=Math.round(28*S.thinNum/I),h=Math.round(28*S.normalNum/I),m=28-p-h);var C=E.default.createElement("div",{style:{width:"150px"}},E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ffe082"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"身高偏低人数："+v.shortNum+"人"))),E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#3dbdff"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"身高正常人数："+v.normalNum+"人"))),E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ff405b"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"身高偏高人数："+v.tallNum+"人")))),b=E.default.createElement("div",{style:{width:"200px"}},E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ffe082"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"BMI低于18.5的人数："+S.thinNum+"人"))),E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#3dbdff"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"BMI介于18.5至24的人数："+S.normalNum+"人"))),E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ff405b"}})),E.default.createElement(c.default,{span:21},E.default.createElement("p",null,"BMI高于24的人数："+S.fatNum+"人"))));if(0===y)for(g=0;g<28;g++)e.push(E.default.createElement(i.default,{key:g,title:C},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#bdbdbd",float:"left"}})));else{for(g=0;g<s;g++)e.push(E.default.createElement(i.default,{key:g,title:C},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#ffe082",float:"left"}})));for(g=0;g<u;g++)t.push(E.default.createElement(i.default,{key:g,title:C},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#3dbdff",float:"left"}})));for(g=0;g<f;g++)a.push(E.default.createElement(i.default,{key:g,title:C},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#ff405b",float:"left"}})))}if(0===I)for(g=0;g<28;g++)n.push(E.default.createElement(i.default,{key:g,title:b},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#bdbdbd",float:"left"}})));else{for(g=0;g<p;g++)n.push(E.default.createElement(i.default,{key:g,title:b},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#ffe082",float:"left"}})));for(g=0;g<h;g++)o.push(E.default.createElement(i.default,{key:g,title:b},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#3dbdff",float:"left"}})));for(g=0;g<m;g++)l.push(E.default.createElement(i.default,{key:g,title:b},E.default.createElement("div",{style:{marginLeft:"0.4%",marginRight:"0.4%",height:"100%",width:"2.5%",backgroundColor:"#ff405b",float:"left"}})))}return E.default.createElement(r.default,{spinning:this.props.loading},E.default.createElement("div",{style:{marginTop:"25px",marginLeft:"8%"}},E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{width:"32px",height:"48px",backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-138px -148px"}})),E.default.createElement(c.default,{span:21},E.default.createElement(d.default,{type:"flex",align:"middle"},E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ffe082"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"偏低")),E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#3dbdff"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"正常")),E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ff405b"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"偏高"))),E.default.createElement(d.default,null,E.default.createElement("div",{style:{height:"28px",width:"90%"}},e.map(function(e){return e}),t.map(function(e){return e}),a.map(function(e){return e}))))),E.default.createElement("div",{style:{marginTop:"15px"}},E.default.createElement(d.default,{type:"flex",justify:"space-around",align:"middle"},E.default.createElement(c.default,{span:3},E.default.createElement("div",{style:{width:"32px",height:"48px",backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-98px -148px"}})),E.default.createElement(c.default,{span:21},E.default.createElement(d.default,{type:"flex",align:"middle"},E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ffe082"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"BMI < 18.5 ")),E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#3dbdff"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"18.5 < BMI <24")),E.default.createElement(c.default,{span:1},E.default.createElement("div",{style:{borderRadius:"50%",width:"10px",height:"10px",backgroundColor:"#ff405b"}})),E.default.createElement(c.default,{span:6},E.default.createElement("p",{style:{width:"100%",fontFamily:"MicrosoftYaHei",fontSize:"12px",color:"#485667"}},"BMI > 24"))),E.default.createElement(d.default,null,E.default.createElement("div",{style:{height:"28px",width:"90%"}},n.map(function(e){return e}),o.map(function(e){return e}),l.map(function(e){return e}))))))))}}]),t}(E.default.Component);t.default=(0,w.connect)(function(e){return{statureState:e.healthMonitor.overView.statureNum,weightState:e.healthMonitor.overView.weightNum,loading:e.healthMonitor.overView.loading}})(A)},784:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(37),a(35)),i=n(l),s=(a(41),a(48)),d=n(s),u=(a(33),a(18)),c=n(u),f=(a(23),a(22)),p=n(f),h=a(4),m=n(h),g=a(13),v=n(g),S=a(1),y=n(S),I=a(9),C=n(I),b=a(3),E=n(b),w=a(2),A=n(w),M=(a(85),a(74)),L=n(M),_=a(0),T=n(_),D=a(17),N=a(21),x=a(40),k=a(381),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(k),R={display:"block",height:"24px",lineHeight:"24px",marginLeft:8},F=L.default.Group,P=function(e){for(var t in e)return!1;return!0},G=function(e){x.browserHistory.push({pathname:"/iot/web/education/school/health-overview/personal-health-detail/"+e.studentId,state:{studentId:e.studentId}})},H=function(e){function t(e){(0,y.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return a.state={studentNameWeak:"",studentIdWeak:"",sex:"",sexFilterDropdownVisible:!1},a.handleSearch=a.handleSearch.bind(a),a.handleTableChange=a.handleTableChange.bind(a),a}return(0,A.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){if(""!==this.props.scenarioId&&""!==this.props.currentSchoolId){var e=this.props.healthDetail.studentPagination.pagination,t=e.current,a=e.pageSize;this.fetchData(this.props.scenarioId,this.props.currentSchoolId,(t-1)*a,a,this.props.config)}}},{key:"componentWillReceiveProps",value:function(e){if((this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId){var t=this.props.healthDetail.studentPagination.pagination,a=t.current,n=t.pageSize;this.fetchData(e.scenarioId,e.currentSchoolId,(a-1)*n,n)}if(this.props.config.baseGrade!==e.config.baseGrade||this.props.config.classId!==e.config.classId||this.props.config.years!==e.config.years){var o=(0,m.default)({},this.props.healthDetail.studentPagination,{pagination:(0,m.default)({},this.props.healthDetail.studentPagination.pagination,{current:1})});this.props.healthDetailActions.saveStudentFilter(e.config),this.state.sex&&this.setState({sex:""}),this.fetchData(this.props.scenarioId,this.props.currentSchoolId,(o.pagination.current-1)*o.pagination.pageSize,o.pagination.pageSize,e.config)}}},{key:"fetchData",value:function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.props.healthDetailActions.fetchHealthDetailData(e,t,a,n,o).catch(function(e){p.default.error("获取学生健康详情列表失败: "+e.message)})}},{key:"handleSearch",value:function(e,t){var a=this.props.healthDetail.studentPagination,n=a.pagination,o=a.filters;this.handleTableChange(n,o,t,!0,e)}},{key:"handleTableChange",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments[4],r=(e.current,e.pageSize),l=n?{pagination:(0,m.default)({},e,{current:1}),filters:t}:{pagination:e,filters:t},i=P(a)?this.props.healthDetail.studentFilter:a;!0===o&&i.sex&&delete i.sex,this.props.healthDetailActions.saveStudentFilter(i),this.props.healthDetailActions.saveStudentPagination(l),this.fetchData(this.props.scenarioId,this.props.currentSchoolId,(l.pagination.current-1)*r,r,i)}},{key:"componentWillUnmount",value:function(){this.props.healthDetailActions.saveStudentFilter(),this.props.healthDetailActions.saveStudentPagination(),this.props.healthDetailActions.destoryTableData()}},{key:"empty",value:function(e){this[e].focus(),this[e].refs.input.value=""}},{key:"render",value:function(){var e=this,t=this.props,a=t.healthDetail,n=(t.healthDetailActions,a.healthDetailData),o=a.totalCount,l=[{title:"姓名",dataIndex:"studentName",filterDropdown:T.default.createElement("div",{className:"custom-filter-dropdown"},T.default.createElement(d.default,{placeholder:"请输入搜索姓名",ref:function(t){return e.searchStudentName=t},suffix:this.state.studentNameWeak?T.default.createElement(c.default,{type:"close-circle",onClick:function(){return e.empty("searchStudentName")}}):null,onChange:function(t){return e.setState({studentNameWeak:t.target.value})},onPressEnter:function(){var t=a.studentFilter;""===e.searchStudentName.refs.input.value?void 0!==t.studentNameWeak&&delete t.studentNameWeak:t=(0,m.default)({},a.studentFilter,{studentNameWeak:e.searchStudentName.refs.input.value}),e.handleSearch(!1,t)}}),T.default.createElement(i.default,{type:"primary",onClick:function(){var t=a.studentFilter;""===e.searchStudentName.refs.input.value?void 0!==t.studentNameWeak&&delete t.studentNameWeak:t=(0,m.default)({},a.studentFilter,{studentNameWeak:e.searchStudentName.refs.input.value}),e.handleSearch(!1,t)}},"搜索")),filterIcon:T.default.createElement(c.default,{type:"search",style:{color:a.studentFilter.studentNameWeak?"#1cc09f":"#aaa"}})},{title:"学号",dataIndex:"studentId",filterDropdown:T.default.createElement("div",{className:"custom-filter-dropdown"},T.default.createElement(d.default,{placeholder:"请输入搜索学号",ref:function(t){return e.searchStudentId=t},suffix:this.state.studentIdWeak?T.default.createElement(c.default,{type:"close-circle",onClick:function(){return e.empty("searchStudentId")}}):null,onChange:function(t){return e.setState({studentIdWeak:t.target.value})},onPressEnter:function(){var t=a.studentFilter;""===e.searchStudentId.refs.input.value?void 0!==t.studentIdWeak&&delete t.studentIdWeak:t=(0,m.default)({},a.studentFilter,{studentIdWeak:e.searchStudentId.refs.input.value}),e.handleSearch(!1,t)}}),T.default.createElement(i.default,{type:"primary",onClick:function(){var t=a.studentFilter;""===e.searchStudentId.refs.input.value?void 0!==t.studentIdWeak&&delete t.studentIdWeak:t=(0,m.default)({},a.studentFilter,{studentIdWeak:e.searchStudentId.refs.input.value}),e.handleSearch(!1,t)}},"搜索")),filterIcon:T.default.createElement(c.default,{type:"search",style:{color:a.studentFilter.studentIdWeak?"#1cc09f":"#aaa"}})},{title:"年级",key:"grade",render:function(t){return""!==t.grade?t.grade:new Date(t.years).getFullYear()+e.props.gradeConf.length+"届"}},{title:"班级",dataIndex:"classId"},{title:"年龄",dataIndex:"age",render:function(e){return e+"岁"}},{title:"性别",dataIndex:"sex",filterDropdown:T.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},T.default.createElement(F,{style:{padding:8},value:this.state.sex,onChange:function(t){if(void 0!==t.target.value){var a=t.target.value;e.setState({sex:a})}}},T.default.createElement(L.default,{style:R,value:"男"},"男"),T.default.createElement(L.default,{style:R,value:"女"},"女")),T.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},T.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){e.setState({sexFilterDropdownVisible:!1});var t=(0,m.default)({},a.studentFilter,{sex:e.state.sex});e.handleSearch(!1,t)}},"确定"),T.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){e.setState({sexFilterDropdownVisible:!1,sex:""}),e.handleSearch(!0,a.studentFilter)}},"重置"))),filterDropdownVisible:this.state.sexFilterDropdownVisible,onFilterDropdownVisibleChange:function(t){e.setState({sexFilterDropdownVisible:t})},filterIcon:T.default.createElement(c.default,{type:"filter",style:{color:a.studentFilter.sex?"#1cc09f":"#aaa"}})},{title:"心率(次/每分钟)",dataIndex:"heartRate"},{title:"步数",dataIndex:"step"},{title:"身高(cm)",dataIndex:"stature"},{title:"体重(kg)",dataIndex:"weight"},{title:"体温(度)",dataIndex:"temperature"},{title:"操作",key:"operation",render:function(e){return T.default.createElement(x.Link,{style:{color:"#aabac6",fontSize:16},onClick:function(){return G(e)},className:"operation",title:"查看详情"},T.default.createElement("em",{className:"icon-options"}))}}];return T.default.createElement(r.default,{rowKey:"studentId",columns:l,dataSource:n,pagination:{total:o,showSizeChanger:!0,showQuickJumper:!0,current:a.studentPagination.pagination.current},size:"middle",onChange:this.handleTableChange,loading:a.loading})}}]),t}(T.default.Component);t.default=(0,N.connect)(function(e){return{healthDetail:e.healthMonitor.healthDetail,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,gradeConf:e.schoolManage.classTable.gradeType.gradeConfig.gradeConf}},function(e){return{healthDetailActions:(0,D.bindActionCreators)(O,e)}})(H)},785:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(54),a(53)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(197),E=n(b),w=a(17),A=a(21),M=a(382),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),_=function(e){function t(){var e,a,n,o;(0,p.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),n.getEchartsInstance=function(){return E.default.getInstanceByDom(n.refs.OverView_Pie)||E.default.init(n.refs.OverView_Pie)},o=a,(0,v.default)(n,o)}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.getOverViewData(this.props)}},{key:"componentDidUpdate",value:function(){var e=void 0;e=this.getEchartsInstance(),e.setOption(this.getOption()),window.addEventListener("resize",function(){e.resize()})}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.getOverViewData(e),this.props.config.baseGrade===e.config.baseGrade&&this.props.config.classId===e.config.classId&&this.props.config.years===e.config.years||this.getOverViewData(e)}},{key:"getOverViewData",value:function(e){var t=e.scenarioId,a=e.currentSchoolId,n=e.config,o=e.healthOverViewActions,r=o.fetchOverViewData,l=o.loadingData,i=n.years,s=n.baseGrade,d=n.classId;void 0===i&&void 0===s?(l(!0),r(t,a,void 0,void 0,void 0).then(function(){l(!1)}).catch(function(e){l(!1)})):void 0===d?(l(!0),r(t,a,i,s,void 0).then(function(){l(!1)}).catch(function(e){l(!1)})):(l(!0),r(t,a,i,s,d).then(function(){l(!1)}).catch(function(e){l(!1)}))}},{key:"getOption",value:function(){var e=this.props.healthOverViewState;return{tooltip:{trigger:"item",formatter:"{b}: {c}人 ({d}%)",position:"right"},series:[{name:"性别人数",type:"pie",selectedMode:"single",selectedOffset:0,center:["50%","50%"],radius:[0,"30%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{value:e.sexNum.maleNum,name:"男生总人数",itemStyle:{normal:{color:"#3dbdff"}}},{value:e.sexNum.femaleNum,name:"女生总人数",itemStyle:{normal:{color:"#ff405b"}}}]},{name:"性别年龄人数",type:"pie",center:["50%","50%"],radius:["45%","65%"],label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:[{value:e.maleAgeNum[0].ageNum,name:"男生0-6岁",itemStyle:{normal:{color:"#63caff"}}},{value:e.maleAgeNum[1].ageNum,name:"男生7-9岁",itemStyle:{normal:{color:"#8ad7ff"}}},{value:e.maleAgeNum[2].ageNum,name:"男生10-12岁",itemStyle:{normal:{color:"#b1e5ff"}}},{value:e.maleAgeNum[3].ageNum,name:"男生13岁以上",itemStyle:{normal:{color:"#d8f2ff"}}},{value:e.femaleAgeNum[0].ageNum,name:"女生0-6岁",itemStyle:{normal:{color:"#ff667b"}}},{value:e.femaleAgeNum[1].ageNum,name:"女生7-9岁",itemStyle:{normal:{color:"#ff8c9c"}}},{value:e.femaleAgeNum[2].ageNum,name:"女生10-12岁",itemStyle:{normal:{color:"#ffb2bd"}}},{value:e.femaleAgeNum[3].ageNum,name:"女生13岁以上",itemStyle:{normal:{color:"#ffd9de"}}}]}]}}},{key:"render",value:function(){var e=this.props.healthOverViewState;return C.default.createElement(r.default,{spinning:e.loading},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{xs:24,sm:8,lg:8},C.default.createElement("div",{ref:"OverView_Pie",style:{height:170,width:"100%"}})),C.default.createElement(d.default,{xs:24,sm:8,lg:8},C.default.createElement("div",{style:{marginLeft:"5%",marginRight:"5%"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:6},C.default.createElement("div",{style:{width:"34px",height:"34px",backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-10px -155px"}})),C.default.createElement(d.default,{span:18},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"女生人数：",e.sexNum.femaleNum,"名"))),C.default.createElement(i.default,null,C.default.createElement("div",{style:{marginTop:"20px",paddingLeft:"8px"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#ff405b",opacity:.8}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"0-6岁")),C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#ff405b",opacity:.6}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"7-9岁"))),C.default.createElement("div",{style:{marginTop:"10px"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#ff405b",opacity:.4}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"10-12岁")),C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#ff405b",opacity:.2}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"13岁以上")))))))),C.default.createElement(d.default,{xs:24,sm:8,lg:8},C.default.createElement("div",{style:{marginLeft:"5%",marginRight:"5%"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:6},C.default.createElement("div",{style:{width:"34px",height:"34px",backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-54px -155px"}})),C.default.createElement(d.default,{span:18},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"男生人数：",e.sexNum.maleNum,"名"))),C.default.createElement(i.default,null,C.default.createElement("div",{style:{marginTop:"20px",paddingLeft:"8px"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#3dbdff",opacity:.8}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"0-6岁")),C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#3dbdff",opacity:.6}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"7-9岁"))),C.default.createElement("div",{style:{marginTop:"10px"}},C.default.createElement(i.default,{type:"flex",justify:"space-around",align:"middle"},C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#3dbdff",opacity:.4}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"10-12岁")),C.default.createElement(d.default,{span:3},C.default.createElement("div",{style:{borderRadius:"50%",width:"14px",height:"14px",backgroundColor:"#3dbdff",opacity:.2}})),C.default.createElement(d.default,{span:9},C.default.createElement("p",{style:{fontFamily:"MicrosoftYaHei",fontSize:"13px",color:"#485667"}},"13岁以上"))))))))))}}]),t}(C.default.Component);t.default=(0,A.connect)(function(e){return{healthOverViewState:e.healthMonitor.overView,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{healthOverViewActions:(0,w.bindActionCreators)(L,e)}})(_)},786:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(39),a(38)),i=n(l),s=(a(54),a(53)),d=n(s),u=(a(23),a(22)),c=n(u),f=a(13),p=n(f),h=a(1),m=n(h),g=a(9),v=n(g),S=a(3),y=n(S),I=a(2),C=n(I),b=a(0),E=n(b),w=a(17),A=a(21),M=a(197),L=n(M),_=a(383),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_);a(1610);var D=[],N=[],x=function(e){for(var t in e)return!1;return!0},k=function(e){function t(e){(0,m.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.getOption=function(){return{tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"rgb(26, 179, 148)"}}},grid:[{left:60,right:35,top:10,bottom:40}],xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,axisLine:{lineStyle:{color:"#80878C",width:1}},axisLabel:{showMaxLabel:!0,showMinLabel:!0,formatter:function(e){return e.substr(e.indexOf("/")+"/".length)}},data:D,name:"aYear"===a.props.stepCount.activeKey?"月":""},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{formatter:"{value}步"},axisLine:{lineStyle:{color:"#80878C",width:1}},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"步数统计",type:"line",smooth:!0,symbol:"circle",symbolSize:2,showSymbol:!1,data:N,lineStyle:{normal:{color:"#1cc09f",width:1}},areaStyle:{normal:{color:new L.default.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(26, 179, 148, 0.4)"}],!1),shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(26, 179, 148)",borderWidth:1}}}]}},a.getEchartsInstance=function(){return L.default.getInstanceByDom(a.stepCount)||L.default.init(a.stepCount)},a.resize=function(){a.getEchartsInstance().resize()},a}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&(this.fetchChartData(this.props.scenarioId,this.props.currentSchoolId,this.props.config),this.props.stepCountChartActions.fetchAveStepCount(this.props.scenarioId,this.props.currentSchoolId,this.props.config))}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&(this.fetchChartData(e.scenarioId,e.currentSchoolId),this.props.stepCountChartActions.fetchAveStepCount(e.scenarioId,e.currentSchoolId,e.config)),this.props.config.baseGrade===e.config.baseGrade&&this.props.config.classId===e.config.classId&&this.props.config.years===e.config.years||(this.fetchChartData(this.props.scenarioId,this.props.currentSchoolId,e.config,this.props.stepCount.activeKey),this.props.stepCountChartActions.fetchAveStepCount(this.props.scenarioId,this.props.currentSchoolId,e.config))}},{key:"shouldComponentUpdate",value:function(e){return!(e.stepCount.isPending&&!e.stepCount.stepLoading)}},{key:"componentDidUpdate",value:function(){var e=this.props.stepCount.stepCount;if(D.splice(0,D.length),N.splice(0,N.length),!x(e)&&!this.props.stepCount.isPending){for(var t in e)D.push(t),N.push(e[t]||0);var a=this.getEchartsInstance(),n=this.getOption();a.setOption(n)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize),L.default.dispose(this.stepCountChart)}},{key:"fetchChartData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aWeek";this.props.stepCountChartActions.setActiveKey(n),this.props.stepCountChartActions.fetchStepCountChartData(e,t,a,n).catch(function(e){c.default.error("获取步数失败: "+e.message)})}},{key:"render",value:function(){var e=this;return E.default.createElement(r.default,{spinning:this.props.stepCount.stepLoading||this.props.stepCount.aveLoading},E.default.createElement(i.default,{title:"步数",style:{minHeight:280},extra:E.default.createElement("div",{style:{color:"#80878c"},className:"step-count"},E.default.createElement("a",{style:{margin:"0px 6px",color:"aWeek"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,e.props.config,"aWeek")}},"周"),"|",E.default.createElement("a",{style:{margin:"0px 6px",color:"aMonth"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,e.props.config,"aMonth")}},"月"),"|",E.default.createElement("a",{style:{margin:"0px 6px",color:"aYear"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,e.props.config,"aYear")}},"年"))},E.default.createElement(d.default,{lg:18,sm:18,xs:24},E.default.createElement("div",{style:{height:200,width:"100%"},ref:function(t){e.stepCount=t}})),E.default.createElement(d.default,{lg:6,sm:6,xs:24},E.default.createElement("div",{style:{textAlign:"center"}},E.default.createElement("div",{style:{width:"110px",height:"110px",backgroundImage:"url(/iot/web/education/resources/img/icon.png)",backgroundPosition:"-630px -10px",margin:"0 auto"}}),E.default.createElement("p",{style:{margin:10,font:"18px ArialMT",color:"343e4e"}},"今日平均 ",this.props.stepCount.aveStepCount.todayAveStep),E.default.createElement("p",{style:{font:"18px ArialMT",color:"rgba(52, 62, 78, 0.5)"}},"昨日平均 ",this.props.stepCount.aveStepCount.yesterdayAveStep)))))}}]),t}(E.default.Component);t.default=(0,A.connect)(function(e){return{stepCount:e.healthMonitor.stepCount,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{stepCountChartActions:(0,w.bindActionCreators)(T,e)}})(k)},787:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OverViewPie=t.HWTable=t.StepCountChart=t.HealthDetail=void 0;var o=a(784),r=n(o),l=a(786),i=n(l),s=a(783),d=n(s),u=a(785),c=n(u);t.HealthDetail=r.default,t.StepCountChart=i.default,t.HWTable=d.default,t.OverViewPie=c.default},788:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(17),v=a(21),S=(a(40),a(789)),y=n(S),I=a(790),C=(n(I),a(150)),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C),E=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("scenarioId");e?this.props.scenarioAction.local_setScenarioId(e):window.location.href="/oasis/stable/web/frame/index.html"}},{key:"render",value:function(){return m.default.createElement("div",{className:"wrapper"},m.default.createElement(y.default,null),m.default.createElement("section",null,this.props.children))}}]),t}(m.default.Component);t.default=(0,v.connect)(function(e){return{scenario:e.common.scenario}},function(e){return{scenarioAction:(0,g.bindActionCreators)(b,e)}})(E)},789:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(118),a(97)),r=n(o),l=a(13),i=n(l),s=a(1),d=n(s),u=a(9),c=n(u),f=a(3),p=n(f),h=a(2),m=n(h),g=a(0),v=n(g),S=(a(191),a(369)),y=n(S),I=function(e){function t(){return(0,d.default)(this,t),(0,p.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement(y.default,null,v.default.createElement("ul",{className:"nav navbar-nav navbar-right"},v.default.createElement("li",null,v.default.createElement("a",{href:"/oasis/stable/web/frame/index.html",onClick:function(){localStorage.setItem("scenarioId","")}},v.default.createElement(r.default,{placement:"leftBottom",title:"返回场所列表"},v.default.createElement("em",{className:"fa fa-home fa-2x"}))))))}}]),t}(v.default.Component);t.default=I},790:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(11),r=n(o),l=a(13),i=n(l),s=a(1),d=n(s),u=a(9),c=n(u),f=a(3),p=n(f),h=a(2),m=n(h),g=a(0),v=n(g),S=a(40),y=(a(191),a(370)),I=n(y),C=function(e){function t(e,a){(0,d.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return n.state={collapse:{allschools:n.routeActive("/iot/web/education/allschools")}},n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"routeActive",value:function(e){e=Array.isArray(e)?e:[e];for(var t in e)if(this.props.location.pathname.indexOf(e[t])>-1)return!0;return!1}},{key:"toggleItemCollapse",value:function(e){for(var t in this.state.collapse)!0===this.state.collapse[t]&&t!==e&&(this.state.collapse[t]=!1);this.setState({collapse:(0,r.default)({},e,!this.state.collapse[e])})}},{key:"render",value:function(){return v.default.createElement(I.default,null,v.default.createElement("ul",{className:"nav"},v.default.createElement("li",{className:this.routeActive("/iot/web/education/allschools")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/allschools",onClick:this.toggleItemCollapse.bind(this,"allschools")},v.default.createElement("em",{className:"icon-grid"}),v.default.createElement("span",{className:"nav-label"},"学校列表")))))}}]),t}(v.default.Component);t.default=C},791:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(17),v=a(21),S=a(40),y=a(792),I=n(y),C=a(793),b=n(C),E=a(150),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),A=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=localStorage.getItem("scenarioId");if(!t)return void(window.location.href="/oasis/stable/web/frame/index.html");if(this.props.scenarioAction.local_setScenarioId(t),""===this.props.scenario.currentSchoolId){var a=localStorage.getItem("schoolId");a?this.props.scenarioAction.getSchoolList(t).then(function(t){t.value.some(function(e,t,n){return a==e.schoolId})?e.props.scenarioAction.local_setCurrentSchoolId(a):S.browserHistory.push("/iot/web/education/allschools")}).catch(function(e){}):S.browserHistory.push("/iot/web/education/allschools")}}},{key:"render",value:function(){var e=this.props.scenario.currentSchoolId,t=e&&this.props.scenario.schoolList.data[e]?this.props.scenario.schoolList.data[e].schoolName:"";return m.default.createElement("div",{className:"wrapper"},m.default.createElement(I.default,{title:t}),m.default.createElement(b.default,{location:this.props.location}),m.default.createElement("section",null,this.props.children))}}]),t}(m.default.Component);t.default=(0,v.connect)(function(e){return{scenario:e.common.scenario}},function(e){return{scenarioAction:(0,g.bindActionCreators)(w,e)}})(A)},792:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(118),a(97)),r=n(o),l=a(13),i=n(l),s=a(1),d=n(s),u=a(9),c=n(u),f=a(3),p=n(f),h=a(2),m=n(h),g=a(0),v=n(g),S=(a(191),a(40)),y=a(369),I=n(y);a(1603);var C=function(e){function t(){return(0,d.default)(this,t),(0,p.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return v.default.createElement(I.default,null,v.default.createElement("ul",{className:"nav navbar-nav"},v.default.createElement("li",null,v.default.createElement("div",{className:"school-title"},v.default.createElement("span",null,this.props.title)))),v.default.createElement("ul",{className:"nav navbar-nav navbar-right"},v.default.createElement("li",null,v.default.createElement(S.Link,{to:"/iot/web/education/allschools",onClick:function(){localStorage.setItem("schoolId","")}},v.default.createElement(r.default,{placement:"leftBottom",title:"返回学校列表"},v.default.createElement("em",{className:"fa fa-list-ul fa-lg"}))))))}}]),t}(v.default.Component);t.default=C},793:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(11),r=n(o),l=a(13),i=n(l),s=a(1),d=n(s),u=a(9),c=n(u),f=a(3),p=n(f),h=a(2),m=n(h),g=a(0),v=n(g),S=a(40),y=a(191),I=a(370),C=n(I);a(1604);var b=function(e){function t(e,a){(0,d.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return n.toggleSidebar=function(){n.state.sidebarVisible?n.setState({sidebarVisible:!1}):n.setState({sidebarVisible:!0})},n.state={sidebarVisible:!0,collapse:{dashboard:n.routeActive("/iot/web/education/school/dashboard"),health:n.routeActive("/iot/web/education/school/health-overview"),schoolmanage:n.routeActive(["/iot/web/education/school/class-manage","/iot/web/education/school/student-manage","/iot/web/education/school/classLiveManage"]),schoolsetting:n.routeActive(["/iot/web/education/school/maps-manage","/iot/web/education/school/area-setting","/iot/web/education/school/app-manage","/iot/web/education/school/device-manage"])}},n}return(0,m.default)(t,e),(0,c.default)(t,[{key:"routeActive",value:function(e){e=Array.isArray(e)?e:[e];for(var t in e)if(this.props.location.pathname.indexOf(e[t])>-1)return!0;return!1}},{key:"toggleItemCollapse",value:function(e){for(var t in this.state.collapse)!0===this.state.collapse[t]&&t!==e&&(this.state.collapse[t]=!1);this.setState({collapse:(0,r.default)({},e,!this.state.collapse[e])})}},{key:"render",value:function(){var e=this.state.sidebarVisible?{marginLeft:0}:{};return v.default.createElement(C.default,{style:e},v.default.createElement("div",{className:"nav-ctrl",onClick:this.toggleSidebar},v.default.createElement("em",{className:"fa "+(this.state.sidebarVisible?"fa-chevron-left":"fa-chevron-right")})),v.default.createElement("ul",{className:"nav"},v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/dashboard")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/dashboard",onClick:this.toggleItemCollapse.bind(this,"dashboard")},v.default.createElement("em",{className:"icon-grid"}),v.default.createElement("span",{className:"nav-label"},"校园概览"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/health-overview")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/health-overview",title:"health-overview",onClick:this.toggleItemCollapse.bind(this,"health")},v.default.createElement("em",{className:"icon-speedometer"}),v.default.createElement("span",{className:"nav-label"},"健康监测"))),v.default.createElement("li",{className:this.routeActive(["/iot/web/education/school/class-manage","/iot/web/education/school/student-manage","/iot/web/education/school/classLiveManage"])?"active":""},v.default.createElement("div",{className:"nav-item",title:"",onClick:this.toggleItemCollapse.bind(this,"schoolmanage")},v.default.createElement("em",{className:"icon-people"}),v.default.createElement("span",{className:"nav-label"},"校园管理")),v.default.createElement(y.Collapse,{in:this.state.collapse.schoolmanage},v.default.createElement("ul",{id:"#",className:"nav sidebar-subnav collapse nav-second-level"},v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/class-manage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/class-manage"},v.default.createElement("span",null,"班级管理"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/student-manage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/student-manage"},v.default.createElement("span",null,"学生管理"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/classLiveManage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/classLiveManage"},v.default.createElement("span",null,"课堂管理")))))),v.default.createElement("li",{className:this.routeActive(["/iot/web/education/school/map-manage","/iot/web/education/school/area-setting","/iot/web/education/school/app-manage","/iot/web/education/school/device-manage"])?"active":""},v.default.createElement("div",{className:"nav-item",title:"",onClick:this.toggleItemCollapse.bind(this,"schoolsetting")},v.default.createElement("em",{className:"icon-settings"}),v.default.createElement("span",{className:"nav-label"},"校园部署")),v.default.createElement(y.Collapse,{in:this.state.collapse.schoolsetting},v.default.createElement("ul",{id:"#",className:"nav sidebar-subnav collapse nav-second-level"},v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/map-manage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/map-manage"},v.default.createElement("span",null,"地图管理"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/area-setting")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/area-setting"},v.default.createElement("span",null,"区域设置"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/app-manage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/app-manage"},v.default.createElement("span",null,"应用接入"))),v.default.createElement("li",{className:this.routeActive("/iot/web/education/school/device-manage")?"active":""},v.default.createElement(S.Link,{to:"/iot/web/education/school/device-manage"},v.default.createElement("span",null,"设备接入"))))))))}}]),t}(v.default.Component);t.default=b},794:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(54),a(53)),d=n(s),u=a(0),c=n(u),f=function(e){return c.default.createElement(r.default,{spinning:e.loading},c.default.createElement(i.default,{gutter:18},c.default.createElement(d.default,{span:8,style:{padding:"0px 20px 10px"}},c.default.createElement("p",{style:{fontSize:21,color:"#80878C",marginLeft:10}},"身高"),c.default.createElement("div",{style:{color:"#1CC09F",textAlign:"center",fontSize:50,marginTop:10}},c.default.createElement("span",{style:{marginLeft:10}},e.student.stature),c.default.createElement("span",{style:{fontSize:20,color:"#80878C"}},"cm"))),c.default.createElement(d.default,{span:8,style:{padding:"0px 20px 10px"}},c.default.createElement("p",{style:{fontSize:21,color:"#80878C",marginLeft:10}},"体重"),c.default.createElement("div",{style:{color:"#1CC09F",textAlign:"center",fontSize:50,marginTop:10}},c.default.createElement("span",{style:{marginLeft:10}},e.student.weight),c.default.createElement("span",{style:{fontSize:20,color:"#80878C"}},"kg"))),c.default.createElement(d.default,{span:8,style:{padding:"0px 20px 10px"}},c.default.createElement("p",{style:{fontSize:21,color:"#80878C",marginLeft:10}},"体温"),c.default.createElement("div",{style:{color:"#1CC09F",textAlign:"center",fontSize:50,marginTop:10}},c.default.createElement("span",{style:{marginLeft:10}},e.student.temperature),c.default.createElement("span",{style:{fontSize:20,color:"#80878C"}},"°C")))))};t.default=f},795:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(54),a(53)),d=n(s),u=a(0),c=n(u),f=function(e){return c.default.createElement(r.default,{spinning:e.loading},c.default.createElement(i.default,null,c.default.createElement(d.default,{lg:4,md:8,sm:8,xs:12},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"150px",height:"150px",margin:"0 auto",backgroundPosition:"-90px -60px",backgroundImage:"url(/iot/web/education/resources/img/motion.png)"}}),c.default.createElement("p",{style:{margin:"10px 0px",font:"18px ArialMT",color:"#80878c"}},"步数: ",c.default.createElement("span",{style:{fontSize:32,color:"#1CC09F"}},e.student.step),"步"))),c.default.createElement(d.default,{lg:1,md:0,xs:0}),c.default.createElement(d.default,{lg:4,md:8,sm:8,xs:12},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"150px",height:"150px",margin:"0 auto",backgroundPosition:"-300px -60px",backgroundImage:"url(/iot/web/education/resources/img/motion.png)"}}),c.default.createElement("p",{style:{margin:"10px 0px",font:"18px ArialMT",color:"#80878c"}},"距离: ",c.default.createElement("span",{style:{fontSize:32,color:"#1CC09F"}},e.student.distance),"米"))),c.default.createElement(d.default,{lg:1,md:0,xs:0}),c.default.createElement(d.default,{lg:4,md:8,sm:8,xs:12},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"150px",height:"150px",margin:"0 auto",backgroundPosition:"-510px -60px",backgroundImage:"url(/iot/web/education/resources/img/motion.png)"}}),c.default.createElement("p",{style:{margin:"10px 0px",font:"18px ArialMT",color:"#80878c"}},"卡路里：",c.default.createElement("span",{style:{fontSize:32,color:"#1CC09F"}},e.student.calorie),"焦"))),c.default.createElement(d.default,{lg:1,md:0,xs:0}),c.default.createElement(d.default,{lg:4,md:8,sm:8,xs:12},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"150px",height:"150px",margin:"0 auto",backgroundPosition:"-720px -60px",backgroundImage:"url(/iot/web/education/resources/img/motion.png)"}}),c.default.createElement("p",{style:{margin:"10px 0px",font:"18px ArialMT",color:"#80878c"}},"跳绳：",c.default.createElement("span",{style:{fontSize:32,color:"#1CC09F"}},e.student.ropeSkipping),"次"))),c.default.createElement(d.default,{lg:1,md:0,xs:0}),c.default.createElement(d.default,{lg:4,md:8,sm:8,xs:12},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"150px",height:"150px",margin:"0 auto",backgroundPosition:"-930px -60px",backgroundImage:"url(/iot/web/education/resources/img/motion.png)"}}),c.default.createElement("p",{style:{margin:"10px 0px",font:"18px ArialMT",color:"#80878c"}},"仰卧起坐：",c.default.createElement("span",{style:{fontSize:32,color:"#1CC09F"}},e.student.situp),"次")))))};t.default=f},796:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(39),a(38)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(17),E=a(21),w=a(197),A=n(w),M=a(384),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),_=[],T=[],D=function(e){for(var t in e)return!1;return!0},N=function(e){function t(){var e,a,n,o;(0,p.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),n.getOption=function(){return{tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"rgb(26, 179, 148)"}}},grid:[{left:60,right:35,top:10,bottom:20}],xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,axisLine:{lineStyle:{color:"#80878C",width:1}},data:_},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{formatter:"{value}次"},axisLine:{lineStyle:{color:"#80878C",width:1}},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"心率统计",type:"line",smooth:!0,symbol:"circle",symbolSize:2,showSymbol:!1,data:T,lineStyle:{normal:{color:"#1cc09f",width:1}},areaStyle:{normal:{color:new A.default.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(26, 179, 148, 0.4)"}],!1),shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(26, 179, 148)",borderWidth:1}}}]}},n.getEchartsInstance=function(){return A.default.getInstanceByDom(n.personalHealthRate)||A.default.init(n.personalHealthRate)},n.resize=function(){n.getEchartsInstance().resize()},o=a,(0,v.default)(n,o)}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.resize),""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&(this.fetchChartData(this.props.scenarioId,this.props.currentSchoolId),this.interval=setInterval(function(){e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,e.props.heartRate.activeKey)},3e4))}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&(this.fetchChartData(e.scenarioId,e.currentSchoolId),void 0===this.interval&&(this.interval=setInterval(function(){t.fetchChartData(e.scenarioId,e.currentSchoolId,e.heartRate.activeKey)},3e4))),!D(this.props.heartRate.heartRate)&&D(e.heartRate.heartRate)&&A.default.dispose(this.personalHealthRate),this.props.heartRate.activeKey!==e.heartRate.activeKey&&this.interval&&(clearInterval(this.interval),this.interval=setInterval(function(){t.fetchChartData(e.scenarioId,e.currentSchoolId,e.heartRate.activeKey)},3e4))}},{key:"shouldComponentUpdate",value:function(e){return!(e.heartRate.isPending&&!e.heartRate.loading)}},{key:"componentDidUpdate",value:function(){var e=this.props.heartRate.heartRate;if(_.splice(0,_.length),T.splice(0,T.length),!D(this.props.heartRate.heartRate)&&!this.props.heartRate.isPending){for(var t in e)_.push(t),T.push(e[t]||0);var a=this.getEchartsInstance(),n=this.getOption();a.setOption(n)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize),A.default.dispose(this.personalHealthRate),void 0!==this.interval&&clearInterval(this.interval)}},{key:"fetchChartData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hour";this.props.personalHeartRateChartActions.setActiveKey(a),this.props.personalHeartRateChartActions.fetchPersonalHeartRateChartData(e,t,this.props.studentId,a).catch(function(e){d.default.error("获取心率失败: "+e.message)})}},{key:"render",value:function(){var e=this;return C.default.createElement("div",{style:{width:"100%"}},C.default.createElement(r.default,{spinning:this.props.heartRate.loading},C.default.createElement(i.default,{title:"历史心率",style:{minHeight:270,position:"relative"},extra:C.default.createElement("div",{style:{color:"#80878c"},className:"step-count"},C.default.createElement("a",{style:{margin:"0px 6px",color:"hour"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"hour")}},"最近一小时"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"today"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"today")}},"今天"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"yesterday"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"yesterday")}},"昨天"))},C.default.createElement("div",{style:{height:200},ref:function(t){e.personalHealthRate=t}})),C.default.createElement("div",{className:"ant-col-xs-24 ant-col-sm-24 ant-col-lg-12",style:{width:"100%",paddingRight:9,height:0,float:"left",display:D(this.props.heartRate.heartRate)&&!this.props.heartRate.loading?"block":"none"}},C.default.createElement(i.default,{title:"历史心率",style:{minHeight:270,float:"left",position:"absolute",width:"100%",top:-298,display:D(this.props.heartRate.heartRate)&&!this.props.heartRate.loading?"block":"none"},extra:C.default.createElement("div",{style:{color:"#80878c"},className:"step-count"},C.default.createElement("a",{style:{margin:"0px 6px",color:"hour"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"hour")}},"最近一小时"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"today"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"today")}},"今天"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"yesterday"===this.props.heartRate.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"yesterday")}},"昨天"))},C.default.createElement("div",{style:{height:200,padding:"20px 20px 50px 20px",background:"#fff",textAlign:"center"}},C.default.createElement("div",{style:{height:160,borderTop:"2px solid",borderBottom:"2px solid",borderColor:"#C3C3C3",color:"#C3C3C3",lineHeight:8,fontSize:20}},"无数据"))))))}}]),t}(C.default.Component),x={heartRate:I.PropTypes.object.isRequired,scenarioId:I.PropTypes.string.isRequired,currentSchoolId:I.PropTypes.string.isRequired,studentId:I.PropTypes.string.isRequired,personalHeartRateChartActions:I.PropTypes.object.isRequired};N.propTypes=x,t.default=(0,E.connect)(function(e){return{heartRate:e.personalHealth.personalHeartRate,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{personalHeartRateChartActions:(0,b.bindActionCreators)(L,e)}})(N)},797:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(39),a(38)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(17),E=a(21),w=a(197),A=n(w),M=a(385),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),_=[],T=[],D=function(e){for(var t in e)return!1;return!0},N=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.getOption=function(){return{tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"rgb(26, 179, 148)"}}},grid:[{left:60,right:35,top:10,bottom:20}],xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,axisLine:{lineStyle:{color:"#80878C",width:1}},axisLabel:{showMaxLabel:!0,showMinLabel:!0,formatter:function(e){return e.substr(e.indexOf("/")+"/".length)}},data:_,name:"aYear"===a.props.stepCount.activeKey?"月":""},yAxis:{type:"value",min:0,minInterval:1,axisTick:{show:!1},axisLabel:{formatter:"{value}步"},axisLine:{lineStyle:{color:"#80878C",width:1}},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"步数统计",type:"line",smooth:!0,symbol:"circle",symbolSize:2,showSymbol:!1,data:T,lineStyle:{normal:{color:"#1cc09f",width:1}},areaStyle:{normal:{color:new A.default.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(26, 179, 148, 0.4)"}],!1),shadowColor:"rgba(0, 0, 0, 0)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(26, 179, 148)",borderWidth:1}}}]}},a.getEchartsInstance=function(){return A.default.getInstanceByDom(a.personalStepCount)||A.default.init(a.personalStepCount)},a.resize=function(){a.getEchartsInstance().resize()},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchChartData(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchChartData(e.scenarioId,e.currentSchoolId)}},{key:"shouldComponentUpdate",value:function(e){return!(e.stepCount.isPending&&!e.stepCount.loading)}},{key:"componentDidUpdate",value:function(){var e=this.props.stepCount.stepCount;if(_.splice(0,_.length),T.splice(0,T.length),!D(e)&&!this.props.stepCount.isPending){for(var t in e)_.push(t),T.push(e[t]||0);var a=this.getEchartsInstance(),n=this.getOption();a.setOption(n)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize),A.default.dispose(this.personalStepCount)}},{key:"fetchChartData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"aWeek";this.props.personalStepCountChartActions.setActiveKey(a),this.props.personalStepCountChartActions.fetchPersonalStepCountChartData(e,t,this.props.studentId,a).catch(function(){d.default.error("获取步数失败: "+error.message)})}},{key:"render",value:function(){var e=this;return C.default.createElement(r.default,{spinning:this.props.stepCount.loading},C.default.createElement(i.default,{title:"历史步数",style:{minHeight:270},extra:C.default.createElement("div",{style:{color:"#80878c"},className:"step-count"},C.default.createElement("a",{style:{margin:"0px 6px",color:"aWeek"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"aWeek")}},"周"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"aMonth"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"aMonth")}},"月"),"|",C.default.createElement("a",{style:{margin:"0px 6px",color:"aYear"===this.props.stepCount.activeKey?"#49a9ee":"#80878c"},onClick:function(){return e.fetchChartData(e.props.scenarioId,e.props.currentSchoolId,"aYear")}},"年"))},C.default.createElement("div",{style:{height:200,width:"100%"},ref:function(t){e.personalStepCount=t}})))}}]),t}(C.default.Component);t.default=(0,E.connect)(function(e){return{stepCount:e.personalHealth.personalStepCount,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{personalStepCountChartActions:(0,b.bindActionCreators)(L,e)}})(N)},798:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(29),a(28)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(54),a(53)),d=n(s),u=a(0),c=n(u),f=function(e){return c.default.createElement(r.default,{spinning:e.loading},c.default.createElement(i.default,null,c.default.createElement(d.default,{lg:8,sm:24},c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("div",{style:{width:"140px",height:"130px",margin:"0 auto",backgroundImage:"url(/iot/web/education/resources/img/heartRate.png)"}}))),c.default.createElement(d.default,{lg:16,sm:24},c.default.createElement("p",{style:{fontSize:14,color:"#343e4e",marginTop:10,marginLeft:40}},c.default.createElement("span",{style:{fontSize:50,color:"#1CC09F"}},e.student.heartRate),"(次/每分钟)"),c.default.createElement("p",{style:{fontSize:14,color:"rgba(52, 62, 78, 0.5)",marginTop:10,marginLeft:40}},"小于60属于心率过缓，大于100属于心率过速"))))};f.propTypes={loading:u.PropTypes.bool.isRequired,student:u.PropTypes.object.isRequired},t.default=f},799:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalHeartRateChart=t.PersonalStepCountChart=t.RealTimeHeartRate=t.BaseData=t.MotionData=void 0;var o=a(795),r=n(o),l=a(794),i=n(l),s=a(798),d=n(s),u=a(797),c=n(u),f=a(796),p=n(f);t.MotionData=r.default,t.BaseData=i.default,t.RealTimeHeartRate=d.default,t.PersonalStepCountChart=c.default,t.PersonalHeartRateChart=p.default},800:function(e,t,a){"use strict";function n(){return{type:u}}function o(e,t,a,n,o,r){return function(l){return l({type:c,payload:s.getCollectSta(e,t,a,n,o,r)})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case u:return(0,l.default)({},e);case f(c):return(0,l.default)({},e,{isPending:!0});case p(c):if("0"==n.errCode){var o=n.result,r=o.averageHandUpCnt,i=o.averageParticipantCnt,s=o.averageActiveCnt;return(0,l.default)({},e,{handNum:r,participationDegree:i,activeDegree:s,isPending:!1})}return(0,l.default)({},e,{isPending:!1});case h(c):return(0,l.default)({},e,{isPending:!1});default:return e}},t.clickDetail=n,t.getCollectSta=o;var i=a(31),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(i),d={handNum:"--",participationDegree:"--",activeDegree:"--"},u="schoolManage/ClassMannagement/AverageStatistics",c="schoolManage/ClassManagement/AverageStatistics/fetch",f=function(e){return e+"_PENDING"},p=function(e){return e+"_FULFILLED"},h=function(e){return e+"_REJECTED"}},801:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(45),a(44)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(54),a(53)),d=n(s),u=(a(39),a(38)),c=n(u),f=(a(23),a(22)),p=n(f),h=a(13),m=n(h),g=a(1),v=n(g),S=a(9),y=n(S),I=a(3),C=n(I),b=a(2),E=n(b),w=a(0),A=n(w),M=function(e){function t(){return(0,v.default)(this,t),(0,C.default)(this,(t.__proto__||(0,m.default)(t)).apply(this,arguments))}return(0,E.default)(t,e),(0,y.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.ScreenModalState;t.gradeSelect,t.timeRadio;if(!0===e.isConfimBtnClicked){this.props.confimBtnIsClicked();var a=e.scenarioId,n=e.currentSchoolId,o=e.ScreenModalState.message,r=o.baseGrade,l=o.years,i=o.classId,s=e.ScreenModalState.timeRadio;this.props.getCollectSta(a,n,l,r,i,s).catch(function(e){p.default.error("获取课堂汇总数据失败:"+e.message)})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.currentSchoolId,n=e.baseGrade,o=e.classId,r=e.years,l=e.timeRadio;n=n||"",o=o||"",r=r||"",l=l||"aDay",this.props.getCollectSta(t,a,r,n,o,l).catch(function(e){p.default.error("获取课堂汇总数据失败:"+e.message)})}},{key:"render",value:function(){var e=this.props,t=e.handNum,a=e.participationDegree,n=e.activeDegree;return A.default.createElement(r.default,{gutter:16},A.default.createElement(i.default,{spinning:this.props.isPending},A.default.createElement(d.default,{span:8},A.default.createElement(c.default,null,A.default.createElement("div",{style:{margin:"0 auto",height:"100%",textAlign:"center"}},A.default.createElement("label",{style:{fontSize:"14px"}},"平均课堂举手次数"),A.default.createElement("br",null),A.default.createElement("span",{style:{fontSize:"30px"}},t),A.default.createElement("span",{style:{fontSize:"14px"}},"次")))),A.default.createElement(d.default,{span:8},A.default.createElement(c.default,null,A.default.createElement("div",{style:{margin:"0 auto",height:"100%",textAlign:"center"}},A.default.createElement("label",{style:{fontSize:"14px"}},"平均课堂参与度"),A.default.createElement("br",null),A.default.createElement("span",{style:{fontSize:"30px"}},a),A.default.createElement("span",{style:{fontSize:"14px"}},"%")))),A.default.createElement(d.default,{span:8},A.default.createElement(c.default,null,A.default.createElement("div",{style:{margin:"0 auto",height:"100%",textAlign:"center"}},A.default.createElement("label",{style:{fontSize:"14px"}},"平均课堂活跃度"),A.default.createElement("br",null),A.default.createElement("span",{style:{fontSize:"30px"}},n),A.default.createElement("span",{style:{fontSize:"14px"}},"%"))))))}}]),t}(A.default.Component);t.default=M},802:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case h(p):return(0,i.default)({},e,{isPending:!0});case m(p):if("0"==n.errCode&&0!=n.result.length){f.data=[];var o=n.result,r="",l=[];for(var s in o){var d={};if(0==s)r=parseInt(s)+1,l.push(r);else{var u=o[parseInt(s)].activeCnt==o[parseInt(s)-1].activeCnt?r:r+1;l.push(u),r=u}for(var v in o[s]){if(o[s].hasOwnProperty(v)){var S=o[s][v];switch(d.key=s,v){case"participantCnt":d.participantCnt=S;break;case"activeCnt":d.activeCnt=S;break;case"grade":d.grade=S;break;case"classId":d.classId=S}}if(s<=5){var y=l[parseInt(s)],I="/iot/web/education/resources/img/top"+y+".svg";d.ranking=c.default.createElement("img",{src:I,width:"40px",height:"40px"})}}f.data.push(d)}}else f.data=[];return(0,i.default)({},e,{data:f.data,isPending:!1});case g(p):return(0,i.default)({},e,{isPending:!1});default:return e}}function r(e,t,a,n,o,r){return function(l){return l({type:p,payload:d.getClassSta(e,t,a,n,o,r)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=n(l);t.default=o,t.getClassSta=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u=a(0),c=n(u),f={data:[]},p="SchoolManage/ClassActivityRankin/fetch",h=function(e){return e+"_PENDING"},m=function(e){return e+"_FULFILLED"},g=function(e){return e+"_REJECTED"}},803:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(23),a(22)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S);a(1611);var I=[{title:"排名",dataIndex:"ranking",key:"ranking",className:"ranking"},{title:"年级",dataIndex:"grade",key:"grade"},{title:"班级",dataIndex:"classId",key:"classId"},{title:"课堂活跃度",dataIndex:"activeCnt",key:"activeCnt",className:"ClassroomActivity"}],C=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(!0===e.isConfimBtnClicked){this.props.confimBtnIsClicked();var t=e.scenarioId,a=e.currentSchoolId,n=e.ScreenModalState.message,o=n.baseGrade,r=n.years,l=n.classId,s=e.ScreenModalState.timeRadio;this.props.getClassSta(t,a,o,l,r,s).catch(function(e){i.default.error("获取班级活跃度排名失败:"+e.message)})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.currentSchoolId,n=e.baseGrade,o=e.classId,r=e.years,l=e.timeRadio;n=n||"",o=o||"",r=r||"",l=l||"aDay",this.props.getClassSta(t,a,n,o,r,l).catch(function(e){i.default.error("获取班级活跃度排名失败:"+e.message)})}},{key:"render",value:function(){var e=this.props.data;return y.default.createElement(r.default,{columns:I,dataSource:e,pagination:!1,size:"middle"})}}]),t}(y.default.Component);t.default=C},804:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case A:return(0,S.default)({},e,{basicMessage:{}});case M:return(0,S.default)({},e,{onsiteStudentMessage:{totalCount:0,studentArr:[]},studentRaiseMessage:{studentRaiseArr:[]},selectGrade:"",selectClassId:"",dataStatistics:{activeCnt:"0",onsiteStudentNum:"0",participantCnt:"0"},rasieRankArr:[]});case L:return(0,S.default)({},e,{showModal:n});case _:return(0,S.default)({},e,{isConfimBtnClicked:n});case T:return(0,S.default)({},e,{selectGrade:n.value,basicMessage:n.basicMessage});case D:return(0,S.default)({},e,{selectClassId:n});case N:return(0,S.default)({},e,{defaultGrade:n.defaultGrade,defaultClass:n.defaultClass});case x(b):return(0,S.default)({},e,{StatisticsIsPending:!0});case k(b):if("0"==n.errCode){var o=n.result,r=o.activeCnt,l=o.onsiteStudentNum,i=o.participantCnt;C.dataStatistics.activeCnt=r,C.dataStatistics.onsiteStudentNum=l,C.dataStatistics.participantCnt=i}return(0,S.default)({},e,{dataStatistics:C.dataStatistics,StatisticsIsPending:!1});case O(b):return(0,S.default)({},e,{StatisticsIsPending:!1});case x(E):return(0,S.default)({},e,{OnsiteIsPending:!0});case k(E):var s="",d="";return"0"==n.errCode?(s=n.result.totalCount,d=n.result.studentArr):(s=0,d=[]),(0,S.default)({},e,{onsiteStudentMessage:{totalCount:s,studentArr:d},OnsiteIsPending:!1});case O(E):return(0,S.default)({},e,{OnsiteIsPending:!1});case x(w):return(0,S.default)({},e,{RasieIsPending:!0});case k(w):var u=[];return"0"==n.errCode&&function(){var e=[];e=(0,g.default)([],n.result);for(var t="",a="",o=e.length>=5?5:e.length,r=0;r<o;r++)e.map(function(n,o){if(0==o)t=n.raiseCount,a=o;else{var r=o-1;t=n.raiseCount>=e[r].raiseCount?n.raiseCount:e[r].raiseCount,a=o}}),u.push(e[a]),0!==a&&e.splice(a,1)}(),(0,S.default)({},e,{studentRaiseMessage:{studentRaiseArr:n.result},rasieRankArr:u,RasieIsPending:!1});case O(w):return(0,S.default)({},e,{RasieIsPending:!1});default:return e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:L,payload:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:_,payload:e}}function i(e){return{type:T,payload:e}}function s(e){return{type:N,payload:e}}function d(e){return{type:D,payload:e}}function u(e,t,a,n,o,r){return function(l){return l({type:b,payload:I.getRealTimeClassRoomSta(e,t,a,n,o,r)})}}function c(e,t,a,n,o){return function(r){return r({type:E,payload:I.getOnsiteInfo(e,t,a,n,o)})}}function f(e,t,a,n,o){return function(r){return r({type:w,payload:I.getRaiseInfo(e,t,a,n,o)})}}function p(){return{type:A}}function h(){return{type:M}}Object.defineProperty(t,"__esModule",{value:!0});var m=a(177),g=n(m),v=a(4),S=n(v);t.default=o,t.showClassSwitchModal=r,t.configureConfimBtnIsClicked=l,t.setExportSelectGrade=i,t.initialSelect=s,t.setSelectClassId=d,t.getRealTimeClassRoomSta=u,t.getOnsiteInfo=c,t.getRaiseInfo=f,t.destoryBasicMessage=p,t.destoryClassroomStatistics=h;var y=a(31),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),C={dataStatistics:{activeCnt:"--",onsiteStudentNum:"--",participantCnt:"--"},onsiteStudentMessage:{totalCount:0,studentArr:[]},studentRaiseMessage:{studentRaiseArr:[]},showModal:!1,isConfimBtnClicked:!1,selectGrade:"",selectClassId:"",defaultGrade:"",defaultClass:"",RasieIsPending:!1,StatisticsIsPending:!1,OnsiteIsPending:!1},b="SchoolManage/ClassroomStatistics/realTimeClassRoomStaFetch",E="SchoolManage/ClassroomStatistics/getOnsiteInfo",w="SchoolManage/ClassroomStatistics/getRaiseInfo",A="SchoolManage/ClassroomStatistics/destoryBasicMessage",M="SchoolManage/ClassroomStatistics/destoryClassroomStatistics",L="SchoolManage/ClassroomStatistics/showClassSwitchModal",_="SchoolManage/ClassroomStatistics/confimBtnIsClicked",T="SchoolManage/ClassroomStatistics/setExportSelectGrade",D="SchoolManage/ClassroomStatistics/setSelectClassId",N="SchoolManage/ClassroomStatistics/InitialSelect",x=function(e){return e+"_PENDING"},k=function(e){return e+"_FULFILLED"},O=function(e){return e+"_REJECTED"}},805:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(254),a(253)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(39),a(38)),d=n(s),u=(a(50),a(49)),c=n(u),f=(a(45),a(44)),p=n(f),h=(a(54),a(53)),m=n(h),g=(a(23),a(22)),v=n(g),S=a(13),y=n(S),I=a(1),C=n(I),b=a(9),E=n(b),w=a(3),A=n(w),M=a(2),L=n(M),_=(a(91),a(86)),T=n(_),D=a(0),N=n(D);a(1612);var x=T.default.Option,k="",O=function(e){function t(){var e,a,n,o;(0,C.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,A.default)(this,(e=t.__proto__||(0,y.default)(t)).call.apply(e,[this].concat(l))),R.call(n),o=a,(0,A.default)(n,o)}return(0,L.default)(t,e),(0,E.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!0===e.isConfimBtnClicked)if(this.props.configureConfimBtnIsClicked(),void 0===e.basicMessage){if(this.isNotEmptyObject(e.classOption)&&e.classOption.hasOwnProperty(e.gradeOption[0])){var a=e.classOption[e.gradeOption[0]][0],n=e.scenarioId,o=e.currentSchoolId;this.props.getRealTimeClassRoomSta(n,o,a.baseGrade,a.classId,a.years,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),this.props.getOnsiteInfo(n,o,a.baseGrade,a.classId,a.years).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),this.props.getRaiseInfo(n,o,a.baseGrade,a.classId,a.years).catch(function(e){v.default.error("获取举手信息失败:"+e.message)})}}else{var r=e.basicMessage,l=r.baseGrade,i=r.years,s=e.scenarioId,d=e.currentSchoolId;this.props.getRealTimeClassRoomSta(s,d,l,e.selectClassId,i,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),this.props.getOnsiteInfo(s,d,l,e.selectClassId,i).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),this.props.getRaiseInfo(s,d,l,e.selectClassId,i).catch(function(e){v.default.error("获取举手信息失败:"+e.message)}),window.clearInterval(k),k=window.setInterval(function(){t.props.getRealTimeClassRoomSta(s,d,l,e.selectClassId,i,"aDay"),t.props.getOnsiteInfo(s,d,l,e.selectClassId,i),t.props.getRaiseInfo(s,d,l,e.selectClassId,i)},1e4)}else if(this.props.classOption!==e.classOption)if(void 0===e.basicMessage&&this.isNotEmptyObject(e.classOption)&&e.classOption.hasOwnProperty(e.gradeOption[0])){var u=e.classOption[e.gradeOption[0]][0],c=e.scenarioId,f=e.currentSchoolId;this.props.setExportSelectGrade({value:e.gradeOption[0]}),this.props.setSelectClassId(u.classId),this.props.initialSelect({defaultGrade:e.gradeOption[0],defaultClass:u.classId}),this.props.getRealTimeClassRoomSta(c,f,u.baseGrade,u.classId,u.years,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),this.props.getOnsiteInfo(c,f,u.baseGrade,u.classId,u.years).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),this.props.getRaiseInfo(c,f,u.baseGrade,u.classId,u.years).catch(function(e){v.default.error("获取举手信息失败:"+e.message)}),window.clearInterval(k),k=window.setInterval(function(){t.props.getRealTimeClassRoomSta(c,f,u.baseGrade,u.classId,u.years,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),t.props.getOnsiteInfo(c,f,u.baseGrade,u.classId,u.years).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),t.props.getRaiseInfo(c,f,u.baseGrade,u.classId,u.years).catch(function(e){v.default.error("获取举手信息失败:"+e.message)})},1e4)}else if(void 0!==e.basicMessage){var p=e.basicMessage,h=p.baseGrade,m=p.years,g=e.scenarioId,S=e.currentSchoolId,y=e.selectGrade,I=e.selectClassId,C=e.classOption,b=!0;if(C[y].map(function(e){e.classId===I&&(b=!1)}),b){var E=e.classOption[e.gradeOption[0]][0],w=E.baseGrade,A=e.gradeOption[0],M=E.classId,L=E.years;return this.props.initialSelect({defaultGrade:A,defaultClass:M}),this.props.getRealTimeClassRoomSta(g,S,w,M,L,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),this.props.getOnsiteInfo(g,S,w,M,L).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),this.props.getRaiseInfo(g,S,w,M,L).catch(function(e){v.default.error("获取举手信息失败:"+e.message)}),window.clearInterval(k),void(k=window.setInterval(function(){t.props.getRealTimeClassRoomSta(g,S,w,M,L,"aDay"),t.props.getOnsiteInfo(g,S,w,M,L),t.props.getRaiseInfo(g,S,w,M,L)},1e4))}this.props.initialSelect({defaultGrade:e.selectGrade,defaultClass:e.selectClassId}),this.props.getRealTimeClassRoomSta(g,S,h,e.selectClassId,m,"aDay").catch(function(e){v.default.error("获取课堂统计数据失败:"+e.message)}),this.props.getOnsiteInfo(g,S,h,e.selectClassId,m).catch(function(e){v.default.error("获取班级在位学生失败:"+e.message)}),this.props.getRaiseInfo(g,S,h,e.selectClassId,m).catch(function(e){v.default.error("获取举手信息失败:"+e.message)}),window.clearInterval(k),k=window.setInterval(function(){t.props.getRealTimeClassRoomSta(g,S,h,e.selectClassId,m,"aDay"),t.props.getOnsiteInfo(g,S,h,e.selectClassId,m),t.props.getRaiseInfo(g,S,h,e.selectClassId,m)},1e4)}else v.default.error("该学校下没有班级"),this.props.destoryClassroomStatistics()}},{key:"componentWillUnmount",value:function(){this.props.showClassSwitchModal(),window.clearInterval(k)}},{key:"render",value:function(){var e=this,t=this.props,a=t.showModal,n=t.gradeOption,o=t.classOption,r=t.selectGrade,l=t.selectClassId,s=this.props.dataStatistics,u=s.activeCnt,f=s.onsiteStudentNum,h=s.participantCnt,g=void 0===o?[]:o[r];return N.default.createElement(d.default,{title:"课堂统计",extra:N.default.createElement("div",null,N.default.createElement("span",null,"当前班级:"),N.default.createElement("a",{style:{margin:"0px 6px",color:"#1cc09f"},onClick:function(){e.props.showClassSwitchModal(!0)}},this.currentClass()))},N.default.createElement(c.default,{title:"班级切换",visible:a,onOk:this.handleOk,onCancel:this.handleCancel},N.default.createElement(p.default,null,N.default.createElement(m.default,{span:12},N.default.createElement("lable",null,"年级："),N.default.createElement(T.default,{value:r,defaultValue:r,size:"large",style:{width:"70%",margin:"0px 5px"},onChange:function(t){var a="";a=void 0===o?"":o[t][0],e.props.setExportSelectGrade({value:t,basicMessage:a}),e.props.setSelectClassId("")}},n.map(function(e){return N.default.createElement(x,{key:""+e,value:""+e},e)}))),N.default.createElement(m.default,{span:12},N.default.createElement("lable",null,"班级："),N.default.createElement(T.default,{value:l,size:"large",style:{width:"70%",margin:"0px 5px"},onChange:function(t){var a="";a=void 0===o?"":o[r][0],e.props.setExportSelectGrade({value:r,basicMessage:a}),e.props.setSelectClassId(t)}},""===r?null:g&&g.map(function(e){return N.default.createElement(x,{key:e.classId+"班",value:e.classId},e.classId)}))))),N.default.createElement(p.default,{gutter:32},N.default.createElement(i.default,{spinning:this.props.StatisticsIsPending},N.default.createElement(m.default,{span:8,xs:{span:8},sm:{span:8},lg:{span:8}},N.default.createElement(d.default,null,N.default.createElement("div",{style:{textAlign:"center",margin:"10px 0"}},N.default.createElement("label",{style:{fontSize:"14px",color:"#80878c"}},"到课人数"),N.default.createElement("br",null),N.default.createElement("span",{style:{fontSize:"30px",color:"#333e4e"}},f)))),N.default.createElement(m.default,{span:8,xs:{span:8},sm:{span:8},lg:{span:8}},N.default.createElement(d.default,null,N.default.createElement("div",{style:{textAlign:"center",margin:"10px 0"}},N.default.createElement("label",{style:{fontSize:"14px",color:"#80878c"}},"实时课堂参与度"),N.default.createElement("br",null),N.default.createElement("span",{style:{fontSize:"30px",color:"#333e4e"}},h),N.default.createElement("span",{style:{fontSize:"14px"}},"%")))),N.default.createElement(m.default,{span:8,xs:{span:8},sm:{span:8},lg:{span:8}},N.default.createElement(d.default,null,N.default.createElement("div",{style:{textAlign:"center",margin:"10px 0"}},N.default.createElement("label",{style:{fontSize:"14px",color:"#80878c"}},"实时课堂活跃度"),N.default.createElement("br",null),N.default.createElement("span",{style:{fontSize:"30px",color:"#333e4e"}},u),N.default.createElement("span",{style:{fontSize:"14px"}},"%")))))),N.default.createElement(p.default,{style:{marginTop:"10px"}},N.default.createElement(m.default,{style:{borderRight:"1px solid #e7e7e9",minHeight:300},span:6,xs:{span:9},sm:{span:9},lg:{span:6}},N.default.createElement(i.default,{spinning:this.props.RasieIsPending},N.default.createElement("div",{title:"今日举手排名"},N.default.createElement("div",{style:{height:"30px",lineHeight:"30px",marginBottom:"20px"}},N.default.createElement("span",{className:"divTitle"},"今日举手排名")),this.generativeHandRank()))),N.default.createElement(m.default,{span:18,xs:{span:15},sm:{span:15},lg:{span:18}},N.default.createElement(i.default,{spinning:this.props.OnsiteIsPending},N.default.createElement("div",{style:{height:"30px",lineHeight:"30px",marginBottom:"30px"}},N.default.createElement("span",{className:"divTitle"},"课堂实况")),N.default.createElement("div",{style:{marginLeft:"50px"}},this.generativeClassroom())))))}}]),t}(N.default.Component),R=function(){var e=this;this.isNotEmptyObject=function(e){for(var t in e)return!0;return!1},this.openNotification=function(){var e={message:"提示",description:"该班级不存在，请重新选择",duration:0};r.default.open(e)},this.generativeClassroom=function(){var t=e.props,a=t.onsiteStudentMessage,n=t.studentRaiseMessage;return N.default.createElement("div",null,N.default.createElement(p.default,null,function(e){for(var t=[],o="",r="down",l="",i=0;i<e;i++)l="男"===a.studentArr[i].sex?"male":"famale",o="0"==a.studentArr[i].leaveStatus?"onSchool":"outSchool",0!==n.studentRaiseArr.length&&(r=void 0===n.studentRaiseArr[i]?"down":"0"==n.studentRaiseArr[i].raiseCount?"down":"up",t.push(N.default.createElement("div",{key:i,style:{width:"58px",minHeight:"70px",margin:"0px 18px 20px 0px",position:"relative",float:"left",verticalAlign:"top"}},N.default.createElement("span",{className:o+" "+l},N.default.createElement("img",{className:r,alt:" ",src:"/iot/web/education/resources/img/handsup.png",width:"20px",height:"20px"})),N.default.createElement("label",{style:{textAlign:"center",width:"45px",overflow:"hidden",textOverflow:"ellipsis"}},a.studentArr[i].studentName))));return t}(a.totalCount)))},this.generativeHandRank=function(){var t=e.props.rasieRankArr,a=[],n=0,o="",r="";if(void 0!==t)for(var l=0;l<t.length;l+=1)n=l+1,o="topRanking L"+n,r="男"==t[l].sex?"topIconMale":"topIconFelMale",a.push(N.default.createElement("div",{key:l,className:"handTop"},N.default.createElement("div",{className:"topItemContainer"},N.default.createElement(m.default,{span:12,style:{display:"block"}},N.default.createElement("span",{className:o,span:4},n),N.default.createElement("span",{className:r,span:4}),N.default.createElement("span",{className:"topName",span:4},t[l].studentName)),N.default.createElement(m.default,{className:"topInfo",span:12},N.default.createElement("span",{className:"topCount"},t[l].raiseCount,"次")))));return a},this.handleOk=function(){e.props.selectClassId?(e.props.configureConfimBtnIsClicked(!0),e.props.showClassSwitchModal(),e.props.initialSelect({defaultGrade:e.props.selectGrade,defaultClass:e.props.selectClassId})):v.default.warning("未选择班级")},this.handleCancel=function(){e.props.setExportSelectGrade({value:e.props.defaultGrade}),e.props.setSelectClassId(e.props.defaultClass),e.props.configureConfimBtnIsClicked(),e.props.showClassSwitchModal()},this.currentClass=function(){var t=e.props.defaultGrade+" "+e.props.defaultClass+" 班";return""==e.props.selectGrade&&(t="无班级"),t}};t.default=O},806:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=a(13),i=n(l),s=a(1),d=n(s),u=a(9),c=n(u),f=a(3),p=n(f),h=a(2),m=n(h),g=(a(85),a(74)),v=n(g),S=(a(91),a(86)),y=n(S),I=(a(65),a(64)),C=n(I),b=a(0),E=n(b),w=C.default.Item,A=y.default.Option,M=v.default.Group,L={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},_=function(e){function t(){var e,a,n,o;(0,d.default)(this,t);for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];return a=n=(0,p.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.state={value:"aDay"},n.radioOnChange=function(e){n.setState({value:e.target.value}),n.props.radioSelect(e.target.value)},o=a,(0,p.default)(n,o)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.props.radioSelect("aDay")}},{key:"handleChange",value:function(e){var t="";if("all"==e)return void this.props.gradeSelect({select:e,message:t});t=this.props.classOption?this.props.classOption[e][0]:{},this.props.gradeSelect({select:e,message:t})}},{key:"generateSelectOption",value:function(){var e=[];return this.props.gradeOption.map(function(t,a){var n=E.default.createElement(t,{value:a,key:a},t);e.push(n)}),e}},{key:"render",value:function(){return E.default.createElement(C.default,null,E.default.createElement(w,(0,r.default)({label:"年级"},L,{hasFeedback:!0}),E.default.createElement(y.default,{defaultValue:"all",style:{width:120},onChange:this.handleChange.bind(this)},E.default.createElement(A,{key:"all",value:"all"},"全校"),this.props.gradeOption.map(function(e){return E.default.createElement(A,{key:""+e,value:""+e},e)}))),E.default.createElement(w,(0,r.default)({label:"时间"},L),E.default.createElement(M,{defaultValue:"aDay",onChange:this.radioOnChange,value:this.state.value},E.default.createElement(v.default,{defaultChecked:!0,value:"aDay"},"一天"),E.default.createElement(v.default,{value:"aWeek"},"一周"),E.default.createElement(v.default,{value:"aMonth"},"一个月"))))}}]),t}(E.default.Component);t.default=C.default.create()(_)},807:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case h(p):return(0,i.default)({},e,{isPending:!0});case m(p):if("0"==n.errCode&&0!=n.result.length){f.data=[];var o=n.result,r="",l=[];for(var s in o){var d={};if(0==s)r=parseInt(s)+1,l.push(r);else{var u=o[parseInt(s)].activeCnt==o[parseInt(s)-1].activeCnt?r:r+1;l.push(u),r=u}for(var v in o[s]){if(o[s].hasOwnProperty(v)){var S=o[s][v];switch(d.key=s,v){case"raiseCnt":d.raiseCnt=S;break;case"studentName":d.studentName=S;break;case"grade":d.grade=S;break;case"classId":d.classId=S}}if(s<=5){var y=l[parseInt(s)],I="/iot/web/education/resources/img/top"+y+".svg";d.ranking=c.default.createElement("img",{src:I,width:"40px",height:"40px"})}}f.data.push(d)}}else f.data=[];return(0,i.default)({},e,{data:f.data,isPending:!1});case g(p):return(0,i.default)({},e,{isPending:!1});default:return e}}function r(e,t,a,n,o,r){return function(l){return l({type:p,payload:d.getStudentSta(e,t,a,n,o,r)})}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(4),i=n(l);t.default=o,t.getStudentSta=r;var s=a(31),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s),u=a(0),c=n(u),f={data:[]},p="SchoolManage/StudentActivityRanking/fetch",h=function(e){return e+"_PENDING"},m=function(e){return e+"_FULFILLED"},g=function(e){return e+"_REJECTED"}},808:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(23),a(22)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S);a(1613);var I=[{title:"排名",dataIndex:"ranking",key:"ranking",className:"ranking"},{title:"姓名",dataIndex:"studentName",key:"studentName"},{title:"年级",dataIndex:"grade",key:"grade"},{title:"班号",dataIndex:"classId",key:"classId"},{title:"举手次数",dataIndex:"raiseCnt",key:"raiseCnt",className:"Dailyhand"}],C=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(!0===e.isConfimBtnClicked){this.props.confimBtnIsClicked();var t=e.scenarioId,a=e.currentSchoolId,n=e.ScreenModalState.message,o=n.baseGrade,r=n.years,l=n.classId,s=e.ScreenModalState.timeRadio;this.props.getStudentSta(t,a,o,l,r,s).catch(function(e){i.default.error("获取学生活跃度排名失败:"+e.message)})}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scenarioId,a=e.currentSchoolId,n=e.baseGrade,o=e.classId,r=e.years,l=e.timeRadio;n=n||"",o=o||"",r=r||"",l=l||"aDay",this.props.getStudentSta(t,a,n,o,r,l).catch(function(e){i.default.error("获取学生活跃度排名失败:"+e.message)})}},{key:"render",value:function(){var e=this.props.data;return y.default.createElement(r.default,{columns:I,dataSource:e,pagination:!1,size:"middle"})}}]),t}(y.default.Component);t.default=C},809:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenModal=t.ClassroomStatistics=t.StudentActive=t.ClassActive=t.AverageStatistics=void 0;var o=a(801),r=n(o),l=a(803),i=n(l),s=a(808),d=n(s),u=a(805),c=n(u),f=a(806),p=n(f);t.AverageStatistics=r.default,t.ClassActive=i.default,t.StudentActive=d.default,t.ClassroomStatistics=c.default,t.ScreenModal=p.default},810:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(41),a(48)),r=n(o),l=(a(129),a(128)),i=n(l),s=a(4),d=n(s),u=(a(91),a(86)),c=n(u),f=(a(65),a(64)),p=n(f),h=a(0),m=n(h),g=a(99),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(g),S=p.default.Item,y=c.default.Option,I=p.default.create()(function(e){var t=e.form,a=e.klass,n=e.gradeConf,o=e.isModify,l=t.getFieldDecorator,s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},u=void 0!==a.years?a:{};return l("years",{initialValue:void 0===u.years?"":u.years}),m.default.createElement(p.default,null,m.default.createElement("div",{id:"classCreateForm"},m.default.createElement(S,(0,d.default)({label:"年级"},s),l("initialGrade",{initialValue:o?""+u.grade:"",rules:[{type:"string",required:!0,message:"请选择年级!"}]})(m.default.createElement(c.default,{style:{width:120},disabled:o,getPopupContainer:function(){return document.getElementById("classCreateForm")},onChange:function(e){n.some(function(a){return e===""+a.gradeSequence&&t.setFieldsValue({years:a.years}),e===a.gradeSequence})}},n.map(function(e){return m.default.createElement(y,{key:e.gradeSequence,value:""+e.gradeSequence},e.gradeString)}))))),m.default.createElement(S,(0,d.default)({label:"班级"},s,{hasFeedback:!0}),l("classId",{initialValue:void 0===u.classId?"":parseInt(u.classId,10),rules:[{required:!0,validator:function(e,t,a){if("number"!=typeof t||t>65535||t<=0)return void a("输入值须为1-65535的数字");a()}}]})(m.default.createElement(i.default,{disabled:o,min:1,max:65535}))),m.default.createElement(S,(0,d.default)({label:"班主任"},s,{hasFeedback:!0}),l("teacher",{initialValue:u.teacher,rules:[{required:!0,message:"请输入班主任姓名!"},{pattern:/^[\u4e00-\u9fa5]+$|^[A-Za-z]+( [A-Za-z]+)*$/,message:"仅支持中文名或者英文名, 最长不能超过16个汉字或32个字符"},{validator:function(e,t,a){v.getStringByteLength(t)>32?a("姓名不能超过16个汉字或32个字符"):a()}}]})(m.default.createElement(r.default,{maxLength:"32"}))),m.default.createElement(S,(0,d.default)({label:"联系方式"},s,{hasFeedback:!0}),l("teacherTel",{initialValue:u.teacherTel,rules:[{required:!0,message:"请输入联系方式!"},{pattern:/^[0-9-]+$/,message:"仅支持数字和-"}]})(m.default.createElement(r.default,{maxLength:"16"}))))});t.default=I},811:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(47),a(46)),d=n(s),u=(a(254),a(253)),c=n(u),f=(a(117),a(130)),p=n(f),h=(a(50),a(49)),m=n(h),g=a(4),v=n(g),S=(a(73),a(72)),y=n(S),I=(a(37),a(35)),C=n(I),b=(a(41),a(48)),E=n(b),w=(a(33),a(18)),A=n(w),M=a(13),L=n(M),_=a(1),T=n(_),D=a(9),N=n(D),x=a(3),k=n(x),O=a(2),R=n(O),F=(a(91),a(86)),P=n(F),G=(a(85),a(74)),H=n(G),V=(a(23),a(22)),B=n(V),W=(a(149),a(106)),z=n(W),U=a(0),j=n(U),K=a(17),q=a(21),Y=a(389),J=n(Y),$=a(810),Z=n($),Q=a(131),X=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(Q);a(1614);var ee=z.default.Group;B.default.config({top:150,duration:2});var te={display:"block",height:"24px",lineHeight:"24px",marginLeft:8},ae=H.default.Group,ne=P.default.Option,oe=j.default.createElement("div",{style:{width:250,color:"#80878c"}},j.default.createElement("img",{src:"/iot/web/education/resources/img/demo.png"})),re=function(e){return e.map(function(e){return e.gradeString}).join("，")},le=function(e){switch(e){case 1:return"六年制小学";case 2:return"三年制初中";case 3:return"三年制高中";case 4:return"综合中学";case 5:return"幼儿园";case 6:return"自定义";default:return""}},ie=function(e){switch(e){case 1:return[{gradeString:"一年级",gradeSequence:0},{gradeString:"二年级",gradeSequence:1},{gradeString:"三年级",gradeSequence:2},{gradeString:"四年级",gradeSequence:3},{gradeString:"五年级",gradeSequence:4},{gradeString:"六年级",gradeSequence:5}];case 2:return[{gradeString:"初中一年级",gradeSequence:0},{gradeString:"初中二年级",gradeSequence:1},{gradeString:"初中三年级",gradeSequence:2}];case 3:return[{gradeString:"高中一年级",gradeSequence:0},{gradeString:"高中二年级",gradeSequence:1},{gradeString:"高中三年级",gradeSequence:2}];case 4:return[{gradeString:"初中一年级",gradeSequence:0},{gradeString:"初中二年级",gradeSequence:1},{gradeString:"初中三年级",gradeSequence:2},{gradeString:"高中一年级",gradeSequence:3},{gradeString:"高中二年级",gradeSequence:4},{gradeString:"高中三年级",gradeSequence:5}];case 5:return[{gradeString:"小小班",gradeSequence:0},{gradeString:"小班",gradeSequence:1},{gradeString:"中班",gradeSequence:2},{gradeString:"大班",gradeSequence:3}];default:return}},se=function(e){function t(e){(0,T.default)(this,t);var a=(0,k.default)(this,(t.__proto__||(0,L.default)(t)).call(this,e));return a.state={filterDropdownVisible:!1,grade:[],searchGrade:[]},a.handleCreateClass=function(){a.classForm.validateFields(function(e,t){if(!e){var n={baseGrade:a.props.classTable.classCreateForm.klass&&a.props.classTable.classCreateForm.klass.baseGrade||0,classId:""+t.classId,teacher:t.teacher,teacherTel:t.teacherTel,years:t.years};if(n.classId===a.props.classTable.classCreateForm.klass.classId&&n.teacher===a.props.classTable.classCreateForm.klass.teacher&&n.teacherTel===a.props.classTable.classCreateForm.klass.teacherTel&&n.years===a.props.classTable.classCreateForm.klass.years)return void B.default.info("当前班级信息无改动");a.handleAddAndModify(n)}})},a.handleGradeTypeOk=a.handleGradeTypeOk.bind(a),a}return(0,R.default)(t,e),(0,N.default)(t,[{key:"componentWillMount",value:function(){this.props.classTableActions.destoryTableData()}},{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchDataAfterGetSchoolId(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchDataAfterGetSchoolId(e.scenarioId,e.currentSchoolId)}},{key:"componentWillUnmount",value:function(){this.props.classTableActions.setGradeTypeString(),this.props.classTableActions.setSearchClassId(),this.props.classTableActions.saveSelectRowKeys(),this.props.classTableActions.setBatchClassList(),this.props.classTable.classCreateForm.visible&&this.props.classTableActions.hideCreateModal(),this.props.classTable.gradeType.visible&&this.props.classTableActions.handleGradeTypeCancel(),this.props.classTable.studentInfo.visible&&this.props.classTableActions.showStudentInfoModel(),this.props.classTable.classroomModel.visible&&this.props.classTableActions.handleClassroomCancel()}},{key:"fetchDataAfterGetSchoolId",value:function(e,t){var a=this;this.props.classTableActions.fetchGradeConfig(e,t).then(function(e){if(0===e.value.gradeConf.length)return void a.props.classTableActions.showGradeTypeModel();var t=le(e.value.gradeType);a.props.classTableActions.setGradeTypeString(t)}).catch(function(e){B.default.error("获取年级类型失败: "+e.message)}),this.fetchData(e,t)}},{key:"handleAddAndModify",value:function(e){var t=this;this.props.classTable.classCreateForm.isModify?this.props.classTableActions.modifyClassToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?B.default.success("修改班级成功"):B.default.error("修改班级失败："+e.value.result),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.props.classTableActions.hideCreateModal(),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(e){B.default.error("修改班级失败："+e.message),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.props.classTableActions.hideCreateModal(),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}):this.props.classTableActions.addClassToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?B.default.success("添加班级成功"):B.default.error("添加班级失败："+e.value.result),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.props.classTableActions.hideCreateModal(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(e){B.default.error("添加班级失败："+e.message),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.props.classTableActions.hideCreateModal(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"handleDelete",value:function(e){var t=this,a=[{years:e.years,baseGrade:e.baseGrade,classId:e.classId}];this.props.classTableActions.deleteClassToServer(this.props.scenarioId,this.props.currentSchoolId,a).then(function(e){0===e.value.errCode?B.default.success("删除班级成功"):B.default.error("删除班级失败: "+e.value.result),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(e){B.default.error("删除班级失败: "+e.message),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"handleBatchDelete",value:function(e){var t=this;this.props.classTableActions.batchDeleteClassToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(a){0===a.value.errCode?1===e.length?B.default.success("删除班级成功"):B.default.success("批量删除班级成功"):1===e.length?B.default.error("删除班级失败："+a.value.result):B.default.error("批量删除班级失败："+a.value.result),t.props.classTableActions.disableDelete(),t.props.classTableActions.setBatchClassList(),t.props.classTableActions.saveSelectRowKeys(),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(a){1===e.length?B.default.error("删除班级失败："+data.value.result):B.default.error("批量删除班级失败："+data.value.result),t.props.classTableActions.disableDelete(),t.props.classTableActions.setBatchClassList(),t.props.classTableActions.saveSelectRowKeys(),(t.state.grade.length||t.state.searchGrade.length)&&t.setState({grade:[],searchGrade:[]}),t.props.classTable.searchClassId&&t.props.classTable.searchClassId&&t.props.classTableActions.setSearchClassId(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"fetchData",value:function(e,t){this.props.classTableActions.fetchClassTableData(e,t).catch(function(e){B.default.error("获取班级列表失败: "+e.message)})}},{key:"handleGradeTypeOk",value:function(){var e=this,t=[],a="",n=this.props.classTable.gradeType.newGradeType;if(0!==this.props.classTable.gradeType.count)for(var o=0;o<this.props.classTable.gradeType.count;o++)""!==(a=this["diyGradeType"+o].refs.input.value)&&t.push({gradeSequence:o,gradeString:a});else t=ie(n);var r={gradeType:n,gradeConf:t,gradeMonth:9};this.props.classTableActions.handleGradeTypeOk(this.props.scenarioId,this.props.currentSchoolId,r).then(function(t){e.props.classTableActions.handleGradeTypeValue(),0===t.value.errCode?(B.default.success("设置年级类型成功"),e.props.classTableActions.handleGradeTypeCancel(),e.props.classTableActions.setGradeTypeCount(),e.props.classTableActions.fetchGradeConfig(e.props.scenarioId,e.props.currentSchoolId).then(function(t){var a=le(t.value.gradeType);e.props.classTableActions.setGradeTypeString(a)}).catch(function(e){B.default.error("获取年级类型失败: "+e.message)}),e.fetchData(e.props.scenarioId,e.props.currentSchoolId)):B.default.error("设置年级类型失败: "+t.value.result)}).catch(function(t){B.default.error("设置年级类型失败: "+t.message),e.props.classTableActions.handleGradeTypeCancel()})}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.classTable,n=t.classTableActions,o=a.classTableData,l=a.classCreateForm,s=a.gradeType,u=a.studentInfo,f=a.classroomModel,h=a.selectedRowKeys,g={selectedRowKeys:h,onChange:function(e,t){if(n.saveSelectRowKeys(e),0===e.length)n.disableDelete(),n.setBatchClassList();else{var o=t.map(function(e){return{years:e.years,baseGrade:e.baseGrade,classId:e.classId}});n.setBatchClassList(o),a.deleteDisabled&&n.enableDelete()}}},S={display:"block",height:"30px",lineHeight:"30px"},I=[],b=0;b<s.count;b++)!function(t){I.push(j.default.createElement("div",{key:t,style:{marginBottom:10},className:"operation"},j.default.createElement(E.default,{defaultValue:"",style:{width:170,marginLeft:22},ref:function(a){e["diyGradeType"+t]=a}}),t===s.count-1?j.default.createElement("a",{style:{color:"#555"},onClick:function(){n.setGradeTypeCount(s.count+1)}},j.default.createElement(A.default,{style:{fontSize:18,marginLeft:10,lineHeight:"30px"},type:"plus"})):j.default.createElement("a",{style:{color:"#555"},onClick:function(){n.setGradeTypeCount(s.count-1)}},j.default.createElement(A.default,{style:{fontSize:18,marginLeft:10,lineHeight:"30px"},type:"minus"}))))}(b);var w=[];o.map(function(e){var t=!0,a=e.grade;w.some(function(e){return e===a&&(t=!1),e===a}),t&&w.push(a)});var M=[{title:"年级",dataIndex:"grade",filters:w.map(function(e){return{text:e,value:e}}),onFilter:function(e,t){return e===t.grade},filterDropdown:j.default.createElement("div",{className:"custom-filter-dropdown",style:{padding:0}},j.default.createElement(ee,{style:{padding:8},value:this.state.grade,onChange:function(t){e.setState({grade:t})}},w.map(function(e){return j.default.createElement(z.default,{style:te,key:e,value:e},e)})),j.default.createElement("div",{className:"ant-table-filter-dropdown-btns"},j.default.createElement("a",{className:"ant-table-filter-dropdown-link confirm",onClick:function(){e.setState({filterDropdownVisible:!1,searchGrade:e.state.grade})}},"确定"),j.default.createElement("a",{className:"ant-table-filter-dropdown-link clear",onClick:function(){e.setState({filterDropdownVisible:!1,grade:[],searchGrade:[]})}},"重置"))),filterDropdownVisible:this.state.filterDropdownVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterDropdownVisible:t})},filterIcon:j.default.createElement(A.default,{type:"filter",style:{color:this.state.searchGrade.length?"#1cc09f":"#aaa"}})},{title:"班级",dataIndex:"classId",render:function(e){return e+"班"},filterDropdown:j.default.createElement("div",{className:"custom-filter-dropdown"},j.default.createElement(E.default,{ref:function(t){e.searchClassId=t},placeholder:"请输入搜索班级",onPressEnter:function(){return n.setSearchClassId(e.searchClassId.refs.input.value)}}),j.default.createElement(C.default,{type:"primary",onClick:function(){return n.setSearchClassId(e.searchClassId.refs.input.value)}},"搜索")),filterIcon:j.default.createElement(A.default,{type:"search",style:{color:a.searchClassId?"#1cc09f":"#aaa"}})},{title:"教室",key:"classroom",render:function(t){return""===t.classroom?j.default.createElement("a",{onClick:function(){n.fetchUnbindClassRoom(e.props.scenarioId,e.props.currentSchoolId).then(function(){n.showClassroomModal(),n.setClassRoomConfig({baseGrade:t.baseGrade,years:t.years,classId:t.classId})}).catch(function(e){B.default.error("获取未绑定班级失败: "+e.message)})},style:{color:"#1cc09f",fontWeight:600}},"未关联"):j.default.createElement(y.default,{title:"确定解除与该教室的绑定?",onConfirm:function(){n.handleUnbindClassroom(e.props.scenarioId,e.props.currentSchoolId,t.classroom).then(function(){B.default.success("解绑教室成功"),e.fetchData(e.props.scenarioId,e.props.currentSchoolId)}).catch(function(e){B.default.error("解绑教室失败: "+e.message)})}},j.default.createElement("a",{style:{color:"#1cc09f",fontWeight:600}},t.classroom))}},{title:"学生数",key:"studentCount",render:function(e){return j.default.createElement("a",{onClick:function(){return n.showStudentInfoModel(!0,{grade:e.grade,baseGrade:e.baseGrade,classId:e.classId,years:e.years})},style:{color:"#1cc09f",fontWeight:600}},e.studentCount)}},{title:"班主任",dataIndex:"teacher"},{title:"班主任联系方式",dataIndex:"teacherTel"},{title:"操作",key:"operation",render:function(t){return j.default.createElement("div",{style:{fontSize:16},className:"operation"},j.default.createElement("a",{title:"修改",onClick:function(){n.showCreateModal(t,"修改"+t.grade+t.classId+"班的信息",!0)},style:{marginRight:8,color:"#b3b7dd"}},j.default.createElement(A.default,{type:"edit"})),j.default.createElement(y.default,{title:"删除班级会同时删除班级下的学生,确定删除该班级?",onConfirm:function(){e.handleDelete(t)}},j.default.createElement("a",{title:"删除",style:{color:"#b3b7dd"}},j.default.createElement(A.default,{type:"delete"}))))}}],L=o.filter(function(t){return!e.state.searchGrade.length||e.state.searchGrade.includes(t.grade)}),_=[];return f.unbindClassRoom.map(function(e){_.push(j.default.createElement(ne,{key:e.classRoomName,value:e.classRoomName},e.classRoomName))}),j.default.createElement(r.default,{title:"班级管理",style:{minHeight:646},extra:j.default.createElement("p",{style:{fontSize:15}},"当前年级类型   ：",j.default.createElement("strong",{style:{color:"#1cc09f"}},a.gradeTypeString)),className:"class-manage"},j.default.createElement(m.default,{title:"选择绑定教室",visible:f.visible,confirmLoading:f.confirmLoading,onCancel:n.handleClassroomCancel,footer:[j.default.createElement(C.default,{key:"back",onClick:n.handleClassroomCancel},"取消"),j.default.createElement(C.default,{key:"submit",type:"primary",onClick:function(){n.handleClassroomCreate(e.props.scenarioId,e.props.currentSchoolId,f.classRoomConfig).then(function(t){0===t.value.errCode?(B.default.success("绑定教室成功"),n.hideClassroomModal(),e.fetchData(e.props.scenarioId,e.props.currentSchoolId)):(B.default.error("绑定教室失败："+t.value.result),n.hideClassroomModal())}).catch(function(e){B.default.error("绑定教室失败: "+e.message),n.hideClassroomModal()})},loading:l.confirmLoading},"确定")]},f.visible?j.default.createElement("div",null,j.default.createElement("span",{style:{fontSize:14,fontWeight:600}},"选择教室"),j.default.createElement(P.default,{style:{width:120,marginLeft:20},onChange:function(e){""!==e&&n.setClassRoomConfig((0,v.default)({},f.classRoomConfig,{classRoomName:e}))}},_)):null),j.default.createElement(m.default,{title:"请选择年级类型",visible:s.visible,onCancel:n.handleGradeTypeCancel,width:650,footer:[j.default.createElement(C.default,{key:"back",onClick:n.handleGradeTypeCancel},"取消"),j.default.createElement(C.default,{key:"submit",type:"primary",onClick:this.handleGradeTypeOk,loading:s.confirmLoading},"确定")]},j.default.createElement("div",null,j.default.createElement("div",{style:(0,v.default)({},S,{fontSize:14,fontWeight:600,color:"#F4364C"})},"请谨慎配置年级类型，一旦配置，无法修改，如果操作失误，请重新创建学校！"),j.default.createElement("div",{style:(0,v.default)({},S,{fontWeight:600,float:"left",marginRight:20})},"年级类型"),j.default.createElement("div",{style:{float:"left"}},j.default.createElement(ae,{defaultValue:s.gradeConfig.gradeType,onChange:function(e){n.handleGradeTypeValue(e.target.value),6===e.target.value?n.setGradeTypeCount(1):0!==s.count&&n.setGradeTypeCount()}},j.default.createElement(H.default,{style:S,value:1},"六年制小学 （一年级，二年级，三年级，四年级，五年级，六年级）"),j.default.createElement(H.default,{style:S,value:2},"三年制初中 （初中一年级，初中二年级，初中三年级）"),j.default.createElement(H.default,{style:S,value:3},"三年制高中 （高中一年级，高中二年级，高中三年级）"),j.default.createElement(H.default,{style:S,value:4},"综合中学 （初中一年级，初中二年级，初中三年级，高中一年级，高中二年级，高中三年级）"),j.default.createElement(H.default,{style:S,value:5},"幼儿园 （小小班，小班，中班，大班）"),j.default.createElement(H.default,{style:S,value:6},"自定义","（"+(6===s.gradeConfig.gradeType?re(s.gradeConfig.gradeConf):"请自定义您的年级名称")+"）",6===s.newGradeType?I:null,6===s.gradeConfig.gradeType&&6!==s.newGradeType?j.default.createElement(C.default,{type:"primary",style:{marginLeft:10},onClick:function(){n.handleGradeTypeValue(6),n.setGradeTypeCount(1)}},"重新自定义"):null,6===s.newGradeType?j.default.createElement("div",{style:(0,v.default)({},S,{marginLeft:22,color:"#F4364C"})},"自定义年级类型时必须从低年级到高年级依次填写,如有疑惑，",j.default.createElement(p.default,{content:oe,title:"示例",trigger:"click"},j.default.createElement("a",{style:{color:"#1cc09f"}},"点击查看示例"))):null)))),j.default.createElement("br",{style:{clear:"both"}})),j.default.createElement(m.default,{visible:l.visible,title:l.title,onCancel:n.handleCancel,confirmLoading:l.confirmLoading,footer:[j.default.createElement(C.default,{key:"back",onClick:n.handleCancel},"取消"),j.default.createElement(C.default,{key:"submit",type:"primary",onClick:this.handleCreateClass,loading:l.confirmLoading},"确定")]},l.visible?j.default.createElement(Z.default,{ref:function(t){e.classForm=t},klass:l.klass,gradeConf:s.gradeConfig.gradeConf,isModify:l.isModify}):null),j.default.createElement(m.default,{title:""+u.classInfo.grade+u.classInfo.classId+"班学生信息",visible:u.visible,onCancel:function(){return n.showStudentInfoModel()},footer:null,width:800},u.visible?j.default.createElement(J.default,{size:"middle",isModel:!0,classInfo:{baseGrade:u.classInfo.baseGrade,classId:u.classInfo.classId,years:u.classInfo.years}}):null),j.default.createElement(i.default,{spinning:a.loading},j.default.createElement("div",{style:{width:"100%",height:30,margin:"5px 0px 15px 0px"}},j.default.createElement(y.default,{title:"删除班级会同时删除班级下的学生,确定删除该班级?",onConfirm:function(){return e.handleBatchDelete(a.classList)}},j.default.createElement(C.default,{type:"primary",icon:"delete",style:{height:30,width:74,float:"right",fontWeight:600,fontSize:14},disabled:a.deleteDisabled},"删除")),j.default.createElement(C.default,{type:"primary",icon:"plus",style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14},onClick:0!==s.gradeConfig.gradeConf.length?n.showCreateModal:function(){c.default.warning({message:"提示",description:"未设置年级类型，请先配置年级类型"}),n.showGradeTypeModel()}},"添加"),j.default.createElement(C.default,{type:"primary",icon:"setting",style:{marginRight:20,height:30,float:"right",fontWeight:600,fontSize:14},onClick:n.showGradeTypeModel},"设置年级类型(模拟毕业生)测试使用")),j.default.createElement(d.default,{rowKey:function(e){return""+e.grade+e.classId+e.years},rowSelection:g,columns:M,dataSource:L,pagination:{total:L.length,showSizeChanger:!0,showQuickJumper:!0}})))}}]),t}(j.default.Component),de=function(e,t){return e.filter(function(e){return-1!==e.classId.indexOf(t)})},ue={classTable:U.PropTypes.object.isRequired,scenarioId:U.PropTypes.string.isRequired,currentSchoolId:U.PropTypes.string.isRequired,classTableActions:U.PropTypes.object.isRequired};se.propTypes=ue,t.default=(0,q.connect)(function(e){return{classTable:(0,v.default)({},e.schoolManage.classTable,{classTableData:de(e.schoolManage.classTable.classTableData,e.schoolManage.classTable.searchClassId)}),scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{classTableActions:(0,K.bindActionCreators)(X,e)}})(se)},812:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=(a(23),a(22)),i=n(l),s=(a(33),a(18)),d=n(s),u=(a(41),a(48)),c=n(u),f=a(177),p=n(f),h=(a(91),a(86)),m=n(h),g=(a(65),a(64)),v=n(g),S=a(0),y=n(S),I=a(7);n(I);a(682);var C=a(99),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C),E=v.default.Item,w=m.default.Option,A=!1,M=v.default.create()(function(e){for(var t=(e.setEditingIndex,e.form),a=e.student,n=(e.editingIndex,e.isAdd),o=e.addNewHouseholder,l=e.gradeOption,s=e.classOption,u=e.selectGrade,f=e.setSelectGrade,h=e.isModify,g=e.selectYear,S=e.setSelectYear,I=e.selectMonth,C=e.setSelectMonth,M=t.getFieldDecorator,L={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},_=[],T=new Date,D=T.getFullYear();D>T.getFullYear()-100;D--)_.push(y.default.createElement(w,{key:D,value:""+D},D));for(var N=[],x=0;x<12;x++)N.push(y.default.createElement(w,{key:x+1,value:""+(x+1),disabled:g===T.getFullYear().toString()&&x>T.getMonth()},x+1));for(var k=[],O=0;O<b.getMaxDateDay(g,I);O++)k.push(y.default.createElement(w,{key:O+1,value:""+(O+1),disabled:g===T.getFullYear().toString()&&I===(T.getMonth()+1).toString()&&O>=T.getDate()},O+1));var R=void 0!==a.householder?a.householder.slice():[],F=void 0!==a.studentId?(0,p.default)({},a):{householder:R};M("householders",{initialValue:R}),M("years",{initialValue:F.years}),M("baseGrade",{initialValue:F.baseGrade});var P=t.getFieldValue("householders"),G=[];P.length&&P.map(function(e,a){G.push(y.default.createElement(E,{label:0===a?"添加家长":"    ",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},key:a,colon:0===a,style:{marginBottom:10,marginTop:1===a?40:0}},M("houseHolder",{rules:[{message:"请输入家长信息"}]})(y.default.createElement("div",{style:{width:"100%"},className:"operation"},y.default.createElement(E,{label:0===a?"家长姓名":"",colon:!1,style:{float:"left",width:"25%",marginRight:5},hasFeedback:!0},M("name"+a,{initialValue:e.name,rules:[{required:!0,validator:function(a,n,o){if(""===n)return void o("请输入家长姓名");b.getStringByteLength(n)>32&&o("家长姓名不能超过16个汉字或32个字符"),t.getFieldValue("householders").map(function(t){if(t.name===n&&e.name!==n)return void o("存在相同的家长姓名")}),o()}},{pattern:/^[\u4e00-\u9fa5]+$|^[A-Za-z]+( [A-Za-z]+)*$/,message:"仅支持中文名或者英文名, 最长不能超过16个汉字或32个字符"}]})(y.default.createElement(c.default,{placeholder:"王XX",maxLength:"32"}))),y.default.createElement(E,{label:0===a?"亲缘关系":"",colon:!1,style:{float:"left",width:"25%",marginRight:5},hasFeedback:!0},M("relationship"+a,{initialValue:e.relationship,rules:[{required:!0,message:"请输入亲缘关系"},{pattern:/^[\u4e00-\u9fa5a-zA-Z]+$/,message:"仅支持中文和英文"},{validator:function(e,t,a){b.getStringByteLength(t)>32?a("亲缘关系不能超过16个汉字或32个字符"):a()}}]})(y.default.createElement(c.default,{placeholder:"父亲",maxLength:"32"}))),y.default.createElement(E,{label:0===a?"联系方式":"",colon:!1,style:{float:"left",width:"35%",position:"relative"},hasFeedback:!0},M("tel"+a,{initialValue:e.tel,rules:[{required:!0,message:"请输入联系方式!"},{pattern:/^[0-9-]+$/,message:"只能包含数字和-"}]})(y.default.createElement(c.default,{placeholder:"157****5655",maxLength:"16"}))))),y.default.createElement("div",{className:"operation"},y.default.createElement("a",{style:{position:"absolute",top:0===a?40:2,right:10,color:"#3F4041"},onClick:function(){var e=t.getFieldsValue(["name"+a,"relationship"+a,"tel"+a]),n={name:e["name"+a],relationship:e["relationship"+a],tel:e["tel"+a]},o=t.getFieldValue("householders"),r=o.filter(function(e){return e.name!==n.name||e.relationship!==n.relationship||e.tel!==n.tel});t.setFieldsValue({householders:r});for(var l=a;l<3;l++)t.resetFields(["name"+l,"relationship"+l,"tel"+l])}},y.default.createElement(d.default,{type:"delete",style:{fontSize:18}})))))}),G.length<3&&G.push(y.default.createElement(E,{label:0===G.length?"添加家长":"    ",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}},key:G.length,colon:!1,style:{marginTop:1===G.length?40:0}},M("houseHolder",{rules:[{message:"请输入家长信息"}]})(y.default.createElement("div",{style:{width:"100%"},className:"operation"},y.default.createElement(E,{label:0===G.length?"家长姓名":"",colon:!1,style:{float:"left",width:"25%",marginRight:5},hasFeedback:!0},M("name"+G.length,{initialValue:"",rules:[{required:n,validator:function(e,a,o){if(""===a&&n)return void o("请输入家长姓名");b.getStringByteLength(a)>32&&o("家长姓名不能超过16个汉字或32个字符"),t.getFieldValue("householders").map(function(e){if(e.name===a)return void o("存在相同的家长姓名")}),o()}},{pattern:/^[\u4e00-\u9fa5]+$|^[A-Za-z]+( [A-Za-z]+)*$/,message:"仅支持中文名或者英文名, 最长不能超过16个汉字或32个字符"}]})(y.default.createElement(c.default,{placeholder:"王XX",maxLength:"32",id:"name"+G.length,onChange:function(e){var a=t.getFieldsValue(["relationship"+(G.length-1),"tel"+(G.length-1)]);""===e.target.value&&""===a["relationship"+(G.length-1)]&&""===a["tel"+(G.length-1)]?(o(),A=!0):n||o(!0)}}))),y.default.createElement(E,{label:0===G.length?"亲缘关系":"",colon:!1,style:{float:"left",width:"25%",marginRight:5},hasFeedback:!0},M("relationship"+G.length,{initialValue:"",rules:[{required:n,message:"请输入亲缘关系!"},{pattern:/^[\u4e00-\u9fa5a-zA-Z]+$/,message:"仅支持中文和英文"},{validator:function(e,t,a){b.getStringByteLength(t)>32?a("亲缘关系不能超过16个汉字或32个字符"):a()}}]})(y.default.createElement(c.default,{placeholder:"父亲",maxLength:"32",id:"relationship"+G.length,onChange:function(e){var a=t.getFieldsValue(["name"+(G.length-1),"tel"+(G.length-1)]);""===e.target.value&&""===a["name"+(G.length-1)]&&""===a["tel"+(G.length-1)]?(o(),A=!0):n||o(!0)}}))),y.default.createElement(E,{label:0===G.length?"联系方式":"",colon:!1,style:{float:"left",width:"35%",position:"relative"},hasFeedback:!0},M("tel"+G.length,{initialValue:"",rules:[{required:n,message:"请输入联系方式!"},{pattern:/^[0-9-]+$/,message:"只能包含数字和-"}]})(y.default.createElement(c.default,{placeholder:"157****5655",maxLength:"16",id:"tel"+G.length,onChange:function(e){var a=t.getFieldsValue(["name"+(G.length-1),"relationship"+(G.length-1)]);""===e.target.value&&""===a["name"+(G.length-1)]&&""===a["relationship"+(G.length-1)]?(o(),A=!0):n||o(!0)}}))))),y.default.createElement("div",{className:"operation"},y.default.createElement("a",{style:{position:"absolute",top:0===G.length?38:0,right:10,color:"#3F4041"},onClick:n?function(){t.validateFields(["name"+(G.length-1),"relationship"+(G.length-1),"tel"+(G.length-1)],function(e,a){if(!e){var n={name:a["name"+(G.length-1)],relationship:a["relationship"+(G.length-1)],tel:a["tel"+(G.length-1)]},o=t.getFieldValue("householders"),r=o.concat(n);t.setFieldsValue({householders:r})}}),o()}:function(){i.default.error("请先输入家长信息")}},y.default.createElement(d.default,{type:"plus",style:{fontSize:18}})))));var H=[];return l.map(function(e){-1===e.indexOf("届")&&H.push(y.default.createElement(w,{key:""+e,value:""+e},e))}),A&&(t.resetFields(["name"+(G.length-1),"relationship"+(G.length-1),"tel"+(G.length-1)]),A=!1),y.default.createElement(v.default,null,y.default.createElement(E,(0,r.default)({label:"姓名"},L,{hasFeedback:!0}),M("studentName",{initialValue:F.studentName,rules:[{required:!0,message:"请输入姓名!(1-32字符)"},{pattern:/^[\u4e00-\u9fa5]+$|^[A-Za-z]+( [A-Za-z]+)*$/,message:"仅支持中文名或者英文名, 最长不能超过16个汉字或32个字符"},{validator:function(e,t,a){b.getStringByteLength(t)>32?a("姓名不能超过16个汉字或32个字符"):a()}}]})(y.default.createElement(c.default,{maxLength:"32",placeholder:"(1-32字符)"}))),y.default.createElement(E,(0,r.default)({label:"学号"},L,{hasFeedback:!0}),M("studentId",{initialValue:F.studentId,rules:[{required:!0,validator:function(e,t,a){return void 0===t?void a("请输入学号!"):/^[1-9a-zA-Z]+[\da-zA-Z]+$|^[1-9a-zA-Z]$/.test(t)?void a():void a("学号由数字和英文组成且不能以0开头!")}}]})(y.default.createElement(c.default,{maxLength:"32",disabled:h,placeholder:"(1-32字符)"}))),y.default.createElement("div",{id:"gradeSelectForm"},y.default.createElement(E,(0,r.default)({label:"年级"},L),M("grade",{initialValue:void 0===F.grade?"":""+F.grade,rules:[{type:"string",required:!0,message:"请选择年级!"}]})(y.default.createElement(m.default,{getPopupContainer:function(){return document.getElementById("gradeSelectForm")},style:{width:120},onChange:function(e){f(e),e?t.setFieldsValue({classId:s[e][0].classId,years:s[e][0].years,baseGrade:s[e][0].baseGrade}):t.setFieldsValue({classId:"",years:"",baseGrade:""})}},H)))),y.default.createElement("div",{id:"classSelectForm"},y.default.createElement(E,(0,r.default)({label:"班级"},L),M("classId",{initialValue:F.classId,rules:[{required:!0,message:"请选择班级!"}]})(y.default.createElement(m.default,{getPopupContainer:function(){return document.getElementById("classSelectForm")},style:{width:120},onChange:function(e){""===u||void 0===u||s[u].some(function(a){return e===a.classId&&t.setFieldsValue({years:a.years,baseGrade:a.baseGrade}),e===a.classId})}},""===u||void 0===u?[]:s[u].map(function(e){return y.default.createElement(w,{key:e.classId+"班",value:e.classId},e.classId)}))))),y.default.createElement("div",{id:"birthdaySelectForm"},y.default.createElement(E,(0,r.default)({label:"出生日期"},L),M("selectYear",{initialValue:g,rules:[{type:"string",required:!0,message:"请选择生日年份!"}]})(y.default.createElement(m.default,{getPopupContainer:function(){return document.getElementById("birthdaySelectForm")},style:{width:60},onChange:function(e){e&&S(e);var a=t.getFieldValue("selectMonth"),n=t.getFieldValue("selectDay");e===T.getFullYear().toString()&&a>T.getMonth()+1&&(a=(T.getMonth()+1).toString(),C(a),t.setFieldsValue({selectMonth:a})),n>b.getMaxDateDay(e,a)&&(n=b.getMaxDateDay(e,a)),a===(T.getMonth()+1).toString()&&n>T.getDate()&&(n=T.getDate().toString()),t.setFieldsValue({selectDay:n})}},_)),y.default.createElement("span",{className:"ant-form-text",style:{margin:"0px 8px 0px 5px"}},"年"),M("selectMonth",{initialValue:I,rules:[{type:"string",required:!0,message:"请选择生日月份!"}]})(y.default.createElement(m.default,{getPopupContainer:function(){return document.getElementById("birthdaySelectForm")},style:{width:60},onChange:function(e){e&&C(e);var a=(t.getFieldValue("selectYear"),t.getFieldValue("selectDay"));a>b.getMaxDateDay(e,I)&&(a=b.getMaxDateDay(e,I)),I===(T.getMonth()+1).toString()&&a>T.getDate()&&(a=T.getDate().toString())}},N)),y.default.createElement("span",{className:"ant-form-text",style:{margin:"0px 8px 0px 5px"}},"月"),M("selectDay",{initialValue:F.birthday?F.birthday.split("-")[2]:"",rules:[{type:"string",required:!0,message:"请选择生日日期!"}]})(y.default.createElement(m.default,{getPopupContainer:function(){return document.getElementById("birthdaySelectForm")},style:{width:60}},k)),y.default.createElement("span",{className:"ant-form-text",style:{margin:"0px 8px 0px 5px"}},"日"))),y.default.createElement(E,(0,r.default)({label:"性别"},L),M("sex",{initialValue:F.sex,rules:[{required:!0,message:"请选择性别!"}]})(y.default.createElement(m.default,{style:{width:120}},y.default.createElement(w,{value:"男"},"男"),y.default.createElement(w,{value:"女"},"女")))),y.default.createElement(E,(0,r.default)({label:"手环ID"},L,{hasFeedback:!0}),M("INSn",{initialValue:F.INSn,rules:[{required:!0,message:"请输入手环ID!"},{pattern:/^[0-9A-Za-z]+$/,message:"只能包含字母和数字"}]})(y.default.createElement(c.default,{maxLength:"32"}))),G)});t.default=M},813:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(705),a(703)),r=n(o),l=a(4),i=n(l),s=(a(41),a(48)),d=n(s),u=(a(91),a(86)),c=n(u),f=(a(65),a(64)),p=n(f),h=a(0),m=n(h),g=a(7),v=n(g),S=p.default.Item,y=c.default.Option,I=function(e,t){var a=t;return!(!e||!a)&&e.valueOf()>a.valueOf()},C=function(e,t){var a=t;return!(!e||!a)&&e.valueOf()<=a.valueOf()},b=p.default.create()(function(e){var t=e.leaveInfo,a=e.toBeLeave,n=e.unLeave,o=e.disableStartTime,l=e.disableEndTime,s=e.form,u=e.handleStudentToBeLeave,f=e.handleStudentToUnLeave,h=e.setDisableStartTimeAndEndTime,g=t.studentName,b=t.leaveStatus,E=t.leaveStartTime,w=t.leaveEndTime,A=t.leaveDays,M=t.leaveReason,L=s.getFieldDecorator,_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return m.default.createElement(p.default,null,m.default.createElement(S,(0,i.default)({label:"学生姓名"},_,{hasFeedback:!0}),L("studentName",{initialValue:g,rules:[{required:!0}]})(m.default.createElement(d.default,{style:{width:120},disabled:!0}))),m.default.createElement("div",{id:"leaveStatus"},m.default.createElement(S,(0,i.default)({label:"是否请假"},_),L("leaveStatus",{initialValue:2===b?"1":"0",rules:[{type:"string",required:!0,message:"请选择状态!"}]})(m.default.createElement(c.default,{getPopupContainer:function(){return document.getElementById("leaveStatus")},style:{width:120},onChange:function(e){2!==b&&("1"===e?u(!0):u()),2===b&&("0"===e?f(!0):f())}},m.default.createElement(y,{value:"0"},"否"),m.default.createElement(y,{value:"1"},"是"))))),2===b||a?m.default.createElement("div",null,void 0===E?m.default.createElement("div",{id:"leaveTime"},m.default.createElement(S,{label:"请假时间",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},L("leaveStartTime",{rules:[{required:!0,message:"请选择请假时间!"}]})(m.default.createElement(r.default,{getCalendarContainer:function(){return document.getElementById("leaveTime")},disabledDate:function(e){return I(e,l)},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间",allowClear:!1,onChange:function(e){h(e,l);var t=s.getFieldValue("leaveEndTime");if(t){var a=new Date(t).getTime(),n=new Date(e).getTime(),o=Math.ceil((a-n)/864e5);s.setFieldsValue({leaveDays:o})}}})),L("leaveEndTime",{rules:[{required:!0,message:"请选择请假时间!"}]})(m.default.createElement(r.default,{getCalendarContainer:function(){return document.getElementById("leaveTime")},disabledDate:function(e){return C(e,o)},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",style:{marginLeft:10},allowClear:!1,onChange:function(e){h(o,e);var t=s.getFieldValue("leaveStartTime");if(t){var a=new Date(t).getTime(),n=new Date(e).getTime(),r=Math.ceil((n-a)/864e5);s.setFieldsValue({leaveDays:r})}}})))):m.default.createElement("div",{id:"leaveTime"},m.default.createElement(S,{label:"请假时间",labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},L("leaveStartTime",{initialValue:(0,v.default)(E),rules:[{required:!0,message:"请选择请假开始时间!"}]})(m.default.createElement(r.default,{getCalendarContainer:function(){return document.getElementById("leaveTime")},disabledDate:function(e){return I(e,l)},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"开始时间",allowClear:!1,disabled:n,onChange:function(e){h(e,l);var t=s.getFieldValue("leaveEndTime");if(t){var a=new Date(t).getTime(),n=new Date(e).getTime(),o=Math.ceil((a-n)/864e5);s.setFieldsValue({leaveDays:o})}}})),L("leaveEndTime",{initialValue:(0,v.default)(w),rules:[{required:!0,message:"请选择请假结束时间!"}]})(m.default.createElement(r.default,{getCalendarContainer:function(){return document.getElementById("leaveTime")},disabledDate:function(e){return C(e,o)},showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"结束时间",style:{marginLeft:10},allowClear:!1,disabled:n,onChange:function(e){h(o,e);var t=s.getFieldValue("leaveStartTime");if(t){var a=new Date(t).getTime(),n=new Date(e).getTime(),r=Math.ceil((n-a)/864e5);s.setFieldsValue({leaveDays:r})}}})))),m.default.createElement(S,(0,i.default)({label:"请假天数"},_,{hasFeedback:!0,style:{clear:"both"}}),L("leaveDays",{initialValue:A,rules:[{required:!0,message:"请输入请假天数!"}]})(m.default.createElement(d.default,{style:{width:120},disabled:!0}))),m.default.createElement("div",{id:"leaveReason"},m.default.createElement(S,(0,i.default)({label:"请假事由"},_),L("leaveReason",{initialValue:void 0!==M?""+M:"0",rules:[{type:"string",required:!0,message:"请选择请假事由!"}]})(m.default.createElement(c.default,{getPopupContainer:function(){return document.getElementById("leaveReason")},style:{width:120},allowClear:!0,disabled:n},m.default.createElement(y,{value:"0"},"事假"),m.default.createElement(y,{value:"1"},"病假")))))):null)});t.default=b},814:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenModal=t.ClassroomStatistics=t.StudentActive=t.ClassActive=t.AverageStatistics=t.StudentTable=t.ClassTable=void 0;var o=a(811),r=n(o),l=a(389),i=n(l),s=a(809);t.ClassTable=r.default,t.StudentTable=i.default,t.AverageStatistics=s.AverageStatistics,t.ClassActive=s.ClassActive,t.StudentActive=s.StudentActive,t.ClassroomStatistics=s.ClassroomStatistics,t.ScreenModal=s.ScreenModal},815:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=(a(41),a(48)),i=n(l),s=a(119),d=n(s),u=(a(85),a(74)),c=n(u),f=(a(65),a(64)),p=n(f),h=a(0),m=n(h),g=a(99),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(g),S=p.default.Item,y=(c.default.Button,c.default.Group,p.default.create()(function(e){var t=e.form,a=e.classRoomName,n=t.getFieldDecorator,o={labelCol:{span:6},wrapperCol:{span:14}};return m.default.createElement(p.default,null,m.default.createElement(S,(0,r.default)({},o,{label:"教室名称",hasFeedback:!0}),n("classRoomName",{initialValue:"object"===(void 0===a?"undefined":(0,d.default)(a))?"":a,rules:[{required:!0,message:"请输入教室名称!"},{message:"仅支持中英文，数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:function(e,t,a){v.getStringByteLength(t)>32?a("教室名称不能超过16个汉字或32个字符"):a()}}]})(m.default.createElement(i.default,{maxLength:"32"}))))}));t.default=y},816:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(47),a(46)),d=n(s),u=(a(37),a(35)),c=n(u),f=(a(50),a(49)),p=n(f),h=(a(73),a(72)),m=n(h),g=(a(33),a(18)),v=n(g),S=(a(23),a(22)),y=n(S),I=a(13),C=n(I),b=a(1),E=n(b),w=a(9),A=n(w),M=a(3),L=n(M),_=a(2),T=n(_),D=a(0),N=n(D),x=a(17),k=a(21),O=a(260),R=n(O),F=a(815),P=n(F),G=a(391),H=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(G),V=function(e){function t(e){(0,E.default)(this,t);var a=(0,L.default)(this,(t.__proto__||(0,C.default)(t)).call(this,e));return a.showBindModule=function(e){a.setState({bindModuleVisible:!0,classRoomName:e.classRoomName})},a.handleBindModuleCancel=function(){a.props.classroomActions.fetchClassroomTableData(a.props.scenarioId,a.props.currentSchoolId).then(function(e){}).catch(function(){}),a.setState({bindModuleVisible:!1})},a.handleCreateClassroom=function(){a.classroomForm.validateFields(function(e,t){e||a.handleAdd(t.classRoomName)})},a.getUnbindClassRoomCGMList=function(e,t){return e.filter(function(e){return!t.some(function(t){return t.IC_SN+t.IG_SN+t.IM_SN===e.IC_SN+e.IG_SN+e.IM_SN})})},a.state={bindModuleVisible:!1,classRoomName:""},a}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchData(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchData(e.scenarioId,e.currentSchoolId)}},{key:"componentWillUnmount",value:function(){this.props.classroomActions.destoryTableData(),this.props.classroomActions.saveSelectRowKeys(),this.props.classroomActions.setBatchClassRoomList(),this.props.classroom.classroomCreateForm.visible&&this.props.classroomActions.hideCreateModal()}},{key:"fetchData",value:function(e,t){this.props.classroomActions.fetchClassroomTableData(e,t).catch(function(e){y.default.error("获取教室列表失败: "+e.message)}),this.props.classroomActions.getAllClassRoomCGM(e,t).catch(function(e){})}},{key:"handleAdd",value:function(e){var t=this;this.props.classroomActions.addClassroomToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(y.default.success("添加教室成功"),t.props.classroomActions.hideCreateModal(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)):(y.default.error("添加教室失败"+e.value.result),t.props.classroomActions.hideCreateModal())}).catch(function(e){y.default.error("添加教室失败："+e.message),t.props.classroomActions.hideCreateModal()})}},{key:"handleDelete",value:function(e){var t=this;this.props.classroomActions.deleteClassroomToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(a){0===a.value.errCode?1===e.length?y.default.success("删除教室成功"):y.default.success("批量删除教室成功"):1===e.length?y.default.error("删除教室失败: "+error.message):y.default.error("批量删除教室失败: "+error.message),t.props.classroomActions.saveSelectRowKeys(),t.props.classroomActions.setBatchClassRoomList(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(a){1===e.length?y.default.error("删除教室失败: "+a.message):y.default.error("批量删除教室失败: "+a.message),t.props.classroomActions.saveSelectRowKeys(),t.props.classroomActions.setBatchClassRoomList(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classroom,n=t.classroomActions,o=t.scenarioId,l=t.currentSchoolId,s=a.classroomData,u=a.classroomCreateForm,f=a.selectedRowKeys,h=this.getUnbindClassRoomCGMList(this.props.moduleList,this.props.classroom.allClassRoomCGMList),g=[{title:"教室名称",dataIndex:"classRoomName"},{title:"是否绑定",dataIndex:"isBindClass",render:function(e){return e?"是":"否"}},{title:"定位模块数量",dataIndex:"CGMNum",render:function(t,a){return N.default.createElement("a",{style:{color:"#4ec1b2"},onClick:function(){return e.showBindModule(a)}},a.CGMNum)}},{title:"操作",key:"operation",render:function(t){return N.default.createElement("div",{className:"operation"},N.default.createElement(m.default,{title:"确定删除?",onConfirm:function(){return e.handleDelete([{classRoomName:t.classRoomName}])}},N.default.createElement("a",{title:"删除",style:{color:"#b3b7dd"}},N.default.createElement(v.default,{type:"delete"}))))}}],S={selectedRowKeys:f,onChange:function(e,t){if(n.saveSelectRowKeys(e),0===t.length)n.setBatchClassRoomList();else{var a=t.map(function(e){return{classRoomName:e.classRoomName}});n.setBatchClassRoomList(a)}}};return N.default.createElement(r.default,{title:"教室",className:"area-setting",style:{width:"100%",minHeight:468},bodyStyle:{paddingTop:20,paddingBottom:0}},this.state.bindModuleVisible?N.default.createElement(p.default,{title:"模块绑定",visible:!0,onCancel:this.handleBindModuleCancel,width:650,footer:null},N.default.createElement(R.default,{classRoomName:this.state.classRoomName,scenarioId:o,schoolId:l,unbindClassRoomCGMList:h,fetchClassroomTableData:this.props.classroomActions.fetchClassroomTableData,classRoomCGMList:this.props.classroom.classRoomCGMList,getAllClassRoomCGM:this.props.classroomActions.getAllClassRoomCGM,getCGMListByClassRoomName:this.props.classroomActions.getCGMListByClassRoomName,bindCGMToClassRoom:this.props.classroomActions.bindCGMToClassRoom,unbindCGMFromClassRoom:this.props.classroomActions.unbindCGMFromClassRoom,areaType:"classRoom"})):null,N.default.createElement(p.default,{title:u.title,visible:u.visible,onCancel:n.handleCancel,footer:[N.default.createElement(c.default,{key:"back",onClick:n.handleCancel},"取消"),N.default.createElement(c.default,{key:"submit",type:"primary",onClick:this.handleCreateClassroom,loading:u.confirmLoading},"确定")]},u.visible?N.default.createElement(P.default,{ref:function(t){e.classroomForm=t},classRoomName:u.classRoomName}):null),N.default.createElement(i.default,{spinning:a.loading},N.default.createElement(c.default,{type:"primary",icon:"plus",style:{height:30,width:74,fontSize:20},onClick:n.showCreateModal},"添加"),N.default.createElement(m.default,{title:"确定删除选中教室?",onConfirm:function(){return e.handleDelete(a.classRoomList)}},N.default.createElement(c.default,{type:"primary",icon:"delete",style:{marginLeft:15,height:30,width:74,fontSize:20},disabled:!f.length},"删除")),N.default.createElement(d.default,{rowKey:"classRoomName",size:"middle",rowSelection:S,columns:g,dataSource:s,pagination:{total:s.length,defaultPageSize:5,size:"large"},style:{marginTop:20}})))}}]),t}(N.default.Component);t.default=(0,k.connect)(function(e){return{classroom:e.settings.classroom,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{classroomActions:(0,x.bindActionCreators)(H,e)}})(V)},817:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(39),a(38)),l=o(r),i=(a(47),a(46)),s=o(i),d=(a(29),a(28)),u=o(d),c=(a(37),a(35)),f=o(c),p=(a(50),a(49)),h=o(p),m=(a(73),a(72)),g=o(m),v=(a(33),a(18)),S=o(v),y=(a(23),a(22)),I=o(y),C=a(13),b=o(C),E=a(1),w=o(E),A=a(9),M=o(A),L=a(3),_=o(L),T=a(2),D=o(T),N=(a(129),a(128)),x=o(N),k=a(4),O=o(k),R=(a(41),a(48)),F=o(R),P=(a(65),a(64)),G=o(P),H=a(0),V=o(H),B=a(17),W=a(21),z=a(390),U=o(z),j=a(260),K=o(j),q=a(820),Y=o(q),J=a(99),$=n(J);a(1615);var Z=a(392),Q=n(Z),X=G.default.Item,ee=function(e){var t=function(t,a,n){var o=e.form,r=o.getFieldValue("upperLimit");"number"!=typeof a||a>65535||a<=0?n("输入值须为1-65535的数字"):a&&r&&a>=r?n("轻度拥挤告警人数必须小于严重拥挤告警人数"):(o.getFieldError("upperLimit")&&o.validateFields(["upperLimit"],{force:!0}),n())},a=function(t,a,n){var o=e.form,r=o.getFieldValue("lowerLimit");"number"!=typeof a||a>65535||a<=0?n("输入值须为1-65535的数字"):a&&r&&a<=r?n("严重拥挤告警人数必须大于轻度拥挤告警人数"):(o.getFieldError("lowerLimit")&&o.validateFields(["lowerLimit"],{force:!0}),n())},n=e.form.getFieldDecorator,o={labelCol:{span:6},wrapperCol:{span:14}},r=e.initialAreaInfo;return V.default.createElement(G.default,null,V.default.createElement(X,(0,O.default)({},o,{label:"区域名称",hasFeedback:!0}),n("areaName",{initialValue:r.areaName,rules:[{required:!0,message:"请输入区域名称!",whitespace:!0},{message:"仅支持中英文，数字和下划线",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:function(e,t,a){$.getStringByteLength(t)>32?a("区域名称不能超过16个汉字或32个字符"):a()}}]})(V.default.createElement(F.default,{type:"text",maxLength:"32",disabled:e.isModify}))),V.default.createElement(X,(0,O.default)({},o,{label:"轻度拥挤告警人数",hasFeedback:!0}),n("lowerLimit",{initialValue:r.lowerLimit,rules:[{required:!0,message:"请输入轻度拥挤告警人数"},{validator:t}]})(V.default.createElement(x.default,{min:1,max:65535}))),V.default.createElement(X,(0,O.default)({},o,{label:"严重拥挤告警人数",hasFeedback:!0}),n("upperLimit",{initialValue:r.upperLimit,rules:[{required:!0,message:"请输入严重拥挤告警人数"},{validator:a}]})(V.default.createElement(x.default,{min:1,max:65535}))))};ee.propTypes={form:V.default.PropTypes.object.isRequired};var te=G.default.create()(ee),ae=function(e){function t(e){(0,w.default)(this,t);var a=(0,_.default)(this,(t.__proto__||(0,b.default)(t)).call(this,e));return a.showAddModal=function(){a.setState({modalVisible:!0,isModify:!1,initialAreaInfo:{areaName:"",lowerLimit:"",upperLimit:""}})},a.showModifyModal=function(e){a.setState({modalVisible:!0,isModify:!0,initialAreaInfo:{areaName:e.areaName,lowerLimit:e.lowerLimit,upperLimit:e.upperLimit}})},a.handleOk=function(){a.form.validateFields(function(e,t){if(!e){var n={areaName:t.areaName,crowdThreshold:t.lowerLimit,crowdThresholdMax:t.upperLimit};a.state.isModify?(a.setState({formLoading:!0,addLoading:!0}),a.props.crowdeAreaActions.modifyArea(a.props.scenarioId,a.props.schoolId,n).then(function(e){I.default.success("修改拥挤区成功!"),a.setState({formLoading:!1,addLoading:!1,modalVisible:!1})}).catch(function(e){a.setState({formLoading:!1,addLoading:!1}),I.default.error("修改拥挤区失败: "+e.message)})):(a.setState({formLoading:!0,addLoading:!0}),a.props.crowdeAreaActions.addArea(a.props.scenarioId,a.props.schoolId,n).then(function(e){I.default.success("添加拥挤区成功!"),a.setState({formLoading:!1,addLoading:!1,modalVisible:!1})}).catch(function(e){a.setState({formLoading:!1,addLoading:!1}),I.default.error("添加拥挤区失败: "+e.message)}))}})},a.showBindModule=function(e){a.setState({bindModuleVisible:!0,areaName:e.areaName})},a.handleBindModuleCancel=function(){a.props.crowdeAreaActions.getAreaList(a.props.scenarioId,a.props.schoolId).then(function(e){}).catch(function(){}),a.setState({bindModuleVisible:!1})},a.showBindCamera=function(e){a.setState({bindCameraVisible:!0,areaName:e.areaName})},a.handleBindCameraCancel=function(){a.props.crowdeAreaActions.getAreaList(a.props.scenarioId,a.props.schoolId).then(function(e){}).catch(function(){}),a.setState({bindCameraVisible:!1})},a.handleCancel=function(){a.setState({modalVisible:!1})},a.handleBatchDelete=function(){a.setState({tableLoading:!0});var e=a.state.selectedRows,t=[];if(e.length>0){for(var n=e.length-1;n>=0;n--){var o=e[n];t.push({areaName:o.areaName})}a.props.crowdeAreaActions.deleteArea(a.props.scenarioId,a.props.schoolId,t).then(function(e){I.default.success("删除拥挤区成功!"),a.setState({tableLoading:!1,selectedRowKeys:[],selectedRows:[]}),a.props.crowdeAreaActions.getAllAreaModuleList(a.props.scenarioId,a.props.schoolId).catch(function(e){})}).catch(function(e){I.default.error("删除拥挤区失败: "+e.message),a.setState({tableLoading:!1})})}},a.handleDeleteArea=function(e,t){a.setState({tableLoading:!0}),a.props.crowdeAreaActions.deleteArea(a.props.scenarioId,a.props.schoolId,[{areaName:e.areaName}]).then(function(e){a.setState({tableLoading:!1,selectedRowKeys:[],selectedRows:[]}),I.default.success("删除拥挤区成功"),a.props.crowdeAreaActions.getAllAreaModuleList(a.props.scenarioId,a.props.schoolId).catch(function(e){})}).catch(function(e){a.setState({tableLoading:!1}),I.default.error("删除拥挤区失败: "+e.message)})},a.afterAddModalClose=function(){a.form&&a.form.resetFields()},a.getUnbindModuleList=function(e,t){return e.filter(function(e){return!t.some(function(t){return t.IC_SN+t.IG_SN+t.IM_SN===e.IC_SN+e.IG_SN+e.IM_SN})})},a.state={modalVisible:!1,isModify:!1,initialAreaInfo:{areaName:"",lowerLimit:"",upperLimit:""},areaName:"",bindModuleVisible:!1,bindCameraVisible:!1,formLoading:!1,addLoading:!1,tableLoading:!1,selectedRowKeys:[],selectedRows:[]},a}return(0,D.default)(t,e),(0,M.default)(t,[{key:"componentDidMount",value:function(){var e=this;""!==this.props.scenarioId&&""!==this.props.schoolId&&(this.setState({tableLoading:!0}),this.props.crowdeAreaActions.getAreaList(this.props.scenarioId,this.props.schoolId).then(function(t){e.setState({tableLoading:!1})}).catch(function(t){e.setState({tableLoading:!1}),I.default.error("获取拥挤区列表失败: "+t.message)}),this.props.crowdeAreaActions.getAllAreaModuleList(this.props.scenarioId,this.props.schoolId).catch(function(e){}),this.props.moduleActions.fetchModuleListData(this.props.scenarioId,this.props.schoolId).catch(function(e){}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenarioId!==e.scenarioId||this.props.schoolId!==e.schoolId)&&e.scenarioId&&e.schoolId&&(this.setState({tableLoading:!0}),this.props.crowdeAreaActions.getAreaList(e.scenarioId,e.schoolId).then(function(e){t.setState({tableLoading:!1})}).catch(function(e){t.setState({tableLoading:!1}),I.default.error("获取拥挤区列表失败: "+e.message)}),this.props.crowdeAreaActions.getAllAreaModuleList(e.scenarioId,e.schoolId).catch(function(e){}),this.props.moduleActions.fetchModuleListData(e.scenarioId,e.schoolId).catch(function(e){}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.schoolId,o=this.props.crowdeAreaActions,r=o.addArea,i=(o.getAreaList,o.modifyArea),d=this.state,c=d.isModify,p=d.initialAreaInfo,m=d.selectedRowKeys,v=this.getUnbindModuleList(this.props.moduleList,this.props.crowdeArea.allAreaModuleList),y=[{title:"区域名称",dataIndex:"areaName"},{title:"定位模块数量",dataIndex:"IM_Num",render:function(t,a){return V.default.createElement("a",{style:{color:"#4ec1b2"},onClick:function(){return e.showBindModule(a)}},a.IM_Num)}},{title:"轻度拥挤告警人数",dataIndex:"lowerLimit"},{title:"严重拥挤告警人数",dataIndex:"upperLimit"},{title:"摄像头数量",dataIndex:"cameraNum",render:function(t,a){return V.default.createElement("a",{style:{color:"#4ec1b2"},onClick:function(){return e.showBindCamera(a)}},a.cameraNum)}},{title:"传感器数量",dataIndex:"sensorNum",render:function(e){return V.default.createElement(Y.default,null)}},{title:"操作",dataIndex:"operation",render:function(t,a,n){return V.default.createElement("div",{className:"operation"},V.default.createElement("a",{title:"修改",style:{marginRight:4,color:"#b3b7dd"},onClick:function(){return e.showModifyModal(a)}},V.default.createElement(S.default,{type:"edit"})),V.default.createElement(g.default,{title:"确定删除?",onConfirm:function(){return e.handleDeleteArea(a,n)}},V.default.createElement("a",{title:"删除",style:{marginLeft:4,color:"#b3b7dd"}},V.default.createElement(S.default,{type:"delete"}))))}}],I=[],C=this.props.crowdeArea.areaList.data;for(var b in C)if(C.hasOwnProperty(b)){var E=C[b];I.push({key:E.areaName,areaName:E.areaName,IM_Num:E.IM_Num||0,lowerLimit:E.crowdThreshold||0,upperLimit:E.crowdThresholdMax||0,cameraNum:E.cameraNum||0,sensorNum:E.sensorNum||0})}for(var w=0;w<this.props.crowdeArea.areaList.length;w++)this.props.areaSeting[w];var A={selectedRowKeys:m,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name}}},M=this.state.selectedRowKeys.length>0;return V.default.createElement(l.default,{className:"area-setting",title:"拥挤监控区域",style:{width:"100%",minHeight:468},bodyStyle:{paddingTop:20,paddingBottom:0}},this.state.bindModuleVisible?V.default.createElement(h.default,{title:"绑定模块",visible:!0,onCancel:this.handleBindModuleCancel,width:650,footer:null},V.default.createElement(K.default,{areaName:this.state.areaName,scenarioId:a,schoolId:n,unbindModuleList:v,getAreaList:this.props.crowdeAreaActions.getAreaList,getAllAreaModuleList:this.props.crowdeAreaActions.getAllAreaModuleList,areaModuleList:this.props.crowdeArea.areaModuleList,getAreaModuleList:this.props.crowdeAreaActions.getAreaModuleList,addCGMToArea:this.props.crowdeAreaActions.addCGMToArea,delCGMFromArea:this.props.crowdeAreaActions.delCGMFromArea,areaType:"crowde"})):null,this.state.bindCameraVisible?V.default.createElement(h.default,{title:"绑定摄像头",visible:!0,onCancel:this.handleBindCameraCancel,width:650,footer:null},V.default.createElement(U.default,{areaName:this.state.areaName,scenarioId:a,schoolId:n,unbindCameraList:this.props.unbindCameraList,getAreaList:this.props.crowdeAreaActions.getAreaList,areaCameraList:this.props.crowdeArea.areaCameraList,bindCameraToArea:this.props.crowdeAreaActions.bindCameraToArea,unbindCameraFromArea:this.props.crowdeAreaActions.unbindCameraFromArea,getAreaCameraList:this.props.crowdeAreaActions.getAreaCameraList,fetchUnbindCameraList:this.props.cameraActions.fetchUnbindCameraList,areaType:"crowde"})):null,V.default.createElement(h.default,{title:c?"修改区域设置":"添加拥挤监控区域",visible:this.state.modalVisible,onCancel:this.handleCancel,afterClose:this.afterAddModalClose,footer:[V.default.createElement(f.default,{key:"back",onClick:this.handleCancel},"取消"),V.default.createElement(f.default,{key:"submit",type:"primary",disabled:this.state.addLoading,onClick:this.handleOk},"确定")]},V.default.createElement(u.default,{spinning:this.state.formLoading},V.default.createElement(te,{scenarioId:a,schoolId:n,isModify:c,addArea:r,modifyArea:i,initialAreaInfo:p,ref:function(t){e.form=t}}))),V.default.createElement(u.default,{spinning:this.state.tableLoading},V.default.createElement(f.default,{type:"primary",icon:"plus",style:{height:30,width:74,fontSize:20},onClick:this.showAddModal},"添加"),V.default.createElement(g.default,{title:"确定删除选中区域?",onConfirm:this.handleBatchDelete},V.default.createElement(f.default,{type:"primary",icon:"delete",disabled:!M,style:{marginLeft:15,height:30,width:74,fontSize:20}},"删除")),V.default.createElement(s.default,{size:"middle",rowSelection:A,columns:y,dataSource:I,pagination:{defaultPageSize:5,size:"large"},style:{marginTop:20}})))}}]),t}(H.Component);t.default=(0,W.connect)(function(e){return{scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId,crowdeArea:e.settings.crowdeArea}},function(e){return{crowdeAreaActions:(0,B.bindActionCreators)(Q,e)}})(ae)},818:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(129),a(128)),r=n(o),l=a(4),i=n(l),s=(a(41),a(48)),d=n(s),u=(a(85),a(74)),c=n(u),f=(a(65),a(64)),p=n(f),h=a(0),m=n(h),g=a(99),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(g),S=p.default.Item,y=c.default.Group,I=p.default.create()(function(e){var t=e.form,a=e.selectDoorType,n=e.schoolGateInfo,o=e.isModify,l=e.setSelectDoorType,s=t.getFieldDecorator,u={labelCol:{span:6},wrapperCol:{span:14}},f=void 0!==n.doorName?n:{};return m.default.createElement(p.default,null,m.default.createElement(S,(0,i.default)({},u,{label:"校门名称",hasFeedback:!0}),s("doorName",{initialValue:f.doorName,rules:[{required:!0,message:"请输入校门名称!"},{message:"只支持中英文，数字和下划线",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:function(e,t,a){v.getStringByteLength(t)>32?a("校门名称不能超过16个汉字或32个字符"):a()}}]})(m.default.createElement(d.default,{maxLength:"32",disabled:o}))),m.default.createElement(S,(0,i.default)({},u,{label:"校门管理员",hasFeedback:!0}),s("administrators",{initialValue:f.administrators,rules:[{required:!0,message:"请输入校门管理员!"},{pattern:/^[\u4e00-\u9fa5]+$|^[A-Za-z]+( [A-Za-z]+)*$/,message:"仅支持中文名或者英文名, 最长不能超过16个汉字或32个字符"},{validator:function(e,t,a){v.getStringByteLength(t)>32?a("姓名不能超过16个汉字或32个字符"):a()}}]})(m.default.createElement(d.default,{maxLength:"32"}))),m.default.createElement(S,(0,i.default)({},u,{label:"覆盖类型"}),s("doorType",{initialValue:f.doorType,rules:[{required:!0,message:"请选择覆盖类型!"}]})(m.default.createElement(y,{onChange:function(e){return l(e.target.value)}},m.default.createElement(c.default,{value:"0"},"有重叠区"),m.default.createElement(c.default,{value:"1"},"无重叠区")))),"0"===a||"0"===f.doorType&&"1"!==a?m.default.createElement(S,(0,i.default)({},u,{label:"判定离校等待时长"}),s("timeInterval",{initialValue:f.timeInterval,rules:[{required:!0,validator:function(e,t,a){if("number"!=typeof t||t>65535||t<10)return void a("输入值须为10-65535的数字");a()}}]})(m.default.createElement(r.default,{min:10,max:65535})),m.default.createElement("span",{className:"ant-form-text"}," 秒  (不小于10秒)")):null)});t.default=I},819:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(251),a(250)),d=n(s),u=(a(47),a(46)),c=n(u),f=(a(37),a(35)),p=n(f),h=(a(50),a(49)),m=n(h),g=(a(73),a(72)),v=n(g),S=(a(33),a(18)),y=n(S),I=(a(23),a(22)),C=n(I),b=a(13),E=n(b),w=a(1),A=n(w),M=a(9),L=n(M),_=a(3),T=n(_),D=a(2),N=n(D),x=a(0),k=n(x),O=a(17),R=a(21),F=a(390),P=n(F),G=a(260),H=n(G),V=a(818),B=n(V),W=a(393),z=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(W),U=function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t[a]!==e[a])return!1;return!0},j=function(e){function t(e){(0,A.default)(this,t);var a=(0,T.default)(this,(t.__proto__||(0,E.default)(t)).call(this,e));return a.showBindModule=function(e){a.setState({bindModuleVisible:!0,record:{doorName:e.doorName,doorType:e.doorType,timeInterval:e.timeInterval}})},a.handleBindModuleCancel=function(){a.props.schoolGateActions.fetchSchoolGateTableData(a.props.scenarioId,a.props.currentSchoolId).then(function(e){}).catch(function(){}),a.setState({bindModuleVisible:!1})},a.showBindCamera=function(e){a.setState({bindCameraVisible:!0,record:{doorName:e.doorName}})},a.handleBindCameraCancel=function(){a.props.schoolGateActions.fetchSchoolGateTableData(a.props.scenarioId,a.props.currentSchoolId).then(function(e){}).catch(function(){}),a.setState({bindCameraVisible:!1})},a.handleCreateSchoolGate=function(){a.schoolGateForm.validateFields(function(e,t){if(!e)return U(t,a.props.schoolGate.schoolGateCreateForm.schoolGateInfo)?void C.default.info("当前校门信息无改动"):void a.handleAddAndModify(t)})},a.getUnbindDoorModuleList=function(e,t){return e.filter(function(e){return!t.some(function(t){return t.IC_SN+t.IG_SN+t.IM_SN===e.IC_SN+e.IG_SN+e.IM_SN})})},a.state={bindModuleVisible:!1,bindCameraVisible:!1,record:{doorName:"",doorType:"",timeInterval:""}},a}return(0,N.default)(t,e),(0,L.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchData(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchData(e.scenarioId,e.currentSchoolId)}},{key:"componentWillUnmount",value:function(){this.props.schoolGateActions.destoryTableData(),this.props.schoolGateActions.saveSelectRowKeys(),this.props.schoolGateActions.setBatchDoorNameList(),this.props.schoolGate.schoolGateCreateForm.visible&&this.props.schoolGateActions.hideCreateModal()}},{key:"fetchData",value:function(e,t){this.props.schoolGateActions.fetchSchoolGateTableData(e,t).catch(function(e){C.default.error("获取校门列表失败: "+e.message)}),this.props.schoolGateActions.getAllDoorModuleList(e,t).catch(function(e){C.default.error("获取校门绑定的定位模块失败: "+error.message)}),this.props.cameraActions.fetchUnbindCameraList(e,t).catch(function(e){C.default.error("获取校门绑定的摄像头失败: "+error.message)})}},{key:"handleAddAndModify",value:function(e){var t=this;this.props.schoolGate.schoolGateCreateForm.isModify?this.props.schoolGateActions.modifySchoolGateToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(C.default.success("修改校门成功"),t.props.schoolGateActions.hideCreateModal(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)):(C.default.error("修改校门失败："+e.value.result),t.props.schoolGateActions.hideCreateModal())}).catch(function(e){C.default.error("修改校门失败："+e.message),t.props.schoolGateActions.hideCreateModal()}):this.props.schoolGateActions.addSchoolGateToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?(C.default.success("添加校门成功"),t.props.schoolGateActions.hideCreateModal(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)):(C.default.error("添加校门失败："+e.value.result),t.props.schoolGateActions.hideCreateModal())}).catch(function(e){C.default.error("添加校门失败："+e.message),t.props.schoolGateActions.hideCreateModal()})}},{key:"handleDelete",value:function(e){var t=this;this.props.schoolGateActions.deleteSchoolGateToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(e){0===e.value.errCode?C.default.success("删除校门成功"):C.default.error("删除校门失败："+e.value.result),t.props.schoolGateActions.saveSelectRowKeys(),t.props.schoolGateActions.setBatchDoorNameList(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(e){C.default.error("删除校门失败: "+e.message),t.props.schoolGateActions.saveSelectRowKeys(),t.props.schoolGateActions.setBatchDoorNameList(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"handleBatchDelete",value:function(e){var t=this;this.props.schoolGateActions.deleteSchoolGateToServer(this.props.scenarioId,this.props.currentSchoolId,e).then(function(a){0===a.value.errCode?1===e.length?C.default.success("删除校门成功"):C.default.success("批量删除校门成功"):1===e.length?C.default.error("删除校门失败："+a.value.result):C.default.error("批量删除校门失败："+a.value.result),t.props.schoolGateActions.setBatchDoorNameList(),t.props.schoolGateActions.saveSelectRowKeys(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)}).catch(function(a){1===e.length?C.default.error("删除校门失败："+data.value.result):C.default.error("批量删除校门失败："+data.value.result),t.props.schoolGateActions.setBatchDoorNameList(),t.props.schoolGateActions.saveSelectRowKeys(),t.fetchData(t.props.scenarioId,t.props.currentSchoolId)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.schoolGate,n=t.schoolGateActions,o=t.scenarioId,l=t.currentSchoolId,s=a.schoolGateData,u=a.schoolGateCreateForm,f=a.selectedRowKeys,h=this.getUnbindDoorModuleList(this.props.moduleList,this.props.schoolGate.allDoorModuleList),g=[{title:"校门名称",dataIndex:"doorName"},{title:"校门管理员",dataIndex:"administrators"},{title:"定位模块数量",dataIndex:"readerNum",render:function(t,a){return k.default.createElement("a",{style:{color:"#4ec1b2"},onClick:function(){return e.showBindModule(a)}},a.readerNum)}},{title:"判定离校等待时长(秒)",dataIndex:"timeInterval",render:function(e){return e||"--"}},{title:"摄像头数量",dataIndex:"cameraNum",render:function(t,a){return k.default.createElement("a",{style:{color:"#4ec1b2"},onClick:function(){return e.showBindCamera(a)}},a.cameraNum)}},{title:"覆盖类型",dataIndex:"doorType",render:function(e){return"0"===e?"重叠型":"非重叠型"}},{title:"操作",key:"operation",render:function(t){return k.default.createElement("div",{className:"operation"},k.default.createElement("a",{title:"修改",onClick:function(){n.showCreateModal(t,"修改"+t.doorName+"信息",!0)},style:{marginRight:8,color:"#b3b7dd"}},k.default.createElement(y.default,{type:"edit"})),k.default.createElement(v.default,{title:"确定删除?",onConfirm:function(){return e.handleDelete([t.doorName])}},k.default.createElement("a",{title:"删除",style:{color:"#b3b7dd"}},k.default.createElement(y.default,{type:"delete"}))))}}],S={selectedRowKeys:f,onChange:function(e,t){if(n.saveSelectRowKeys(e),0===e.length)n.setBatchDoorNameList();else{var a=t.map(function(e){return e.doorName});n.setBatchDoorNameList(a)}}};return k.default.createElement(r.default,{title:"校门",className:"area-setting",style:{width:"100%",minHeight:468},bodyStyle:{paddingTop:20,paddingBottom:0}},this.state.bindModuleVisible?k.default.createElement(m.default,{title:"模块绑定",visible:!0,onCancel:this.handleBindModuleCancel,width:650,footer:null},k.default.createElement(H.default,{doorName:this.state.record.doorName,doorType:this.state.record.doorType,timeInterval:this.state.record.timeInterval,scenarioId:o,schoolId:l,unbindDoorModuleList:h,fetchSchoolGateTableData:this.props.schoolGateActions.fetchSchoolGateTableData,doorModuleList:this.props.schoolGate.doorModuleList,getAllDoorModuleList:this.props.schoolGateActions.getAllDoorModuleList,getDoorModuleList:this.props.schoolGateActions.getDoorModuleList,addReadersToDoor:this.props.schoolGateActions.addReadersToDoor,delReadersFromDoor:this.props.schoolGateActions.delReadersFromDoor,areaType:"door"})):null,this.state.bindCameraVisible?k.default.createElement(m.default,{title:"绑定摄像头",visible:!0,onCancel:this.handleBindCameraCancel,width:650,footer:null},k.default.createElement(P.default,{doorName:this.state.record.doorName,scenarioId:o,schoolId:l,unbindCameraList:this.props.unbindCameraList,doorCameraList:this.props.schoolGate.doorCameraList,getDoorCameraList:this.props.schoolGateActions.getDoorCameraList,bindCameraToDoor:this.props.schoolGateActions.bindCameraToDoor,unbindCameraFromDoor:this.props.schoolGateActions.unbindCameraFromDoor,fetchUnbindCameraList:this.props.cameraActions.fetchUnbindCameraList,fetchSchoolGateTableData:this.props.schoolGateActions.fetchSchoolGateTableData,areaType:"door"})):null,k.default.createElement(m.default,{title:u.title,visible:u.visible,onCancel:n.handleCancel,footer:[k.default.createElement(p.default,{key:"back",onClick:n.handleCancel},"取消"),k.default.createElement(p.default,{key:"submit",type:"primary",onClick:this.handleCreateSchoolGate,loading:u.confirmLoading},"确定")]},u.visible?k.default.createElement(B.default,{ref:function(t){e.schoolGateForm=t},schoolGateInfo:u.schoolGateInfo,isModify:u.isModify,selectDoorType:u.selectDoorType,setSelectDoorType:n.setSelectDoorType}):null),k.default.createElement(i.default,{spinning:a.loading},k.default.createElement(p.default,{type:"primary",icon:"plus",style:{height:30,width:74,fontSize:20},onClick:n.showCreateModal},"添加"),k.default.createElement(v.default,{title:"确定删除选中校门?",onConfirm:function(){return e.handleBatchDelete(a.doorNameList)}},k.default.createElement(p.default,{type:"primary",icon:"delete",style:{marginLeft:15,height:30,width:74,fontSize:20},disabled:!f.length},"删除")),k.default.createElement(c.default,{rowKey:"doorName",size:"middle",rowSelection:S,columns:g,dataSource:s,pagination:{total:s.length,defaultPageSize:5,size:"large"},style:{marginTop:20}}),k.default.createElement(d.default,{message:"判定离校等待时长：接收到离校信号后，在指定的时间内没有再接收到该信号则判定该学生离校。",type:"info",showIcon:!0})))}}]),t}(k.default.Component),K={schoolGate:x.PropTypes.object.isRequired,scenarioId:x.PropTypes.string.isRequired,currentSchoolId:x.PropTypes.string.isRequired,unbindCameraList:x.PropTypes.array.isRequired,moduleList:x.PropTypes.array.isRequired,schoolGateActions:x.PropTypes.object.isRequired,cameraActions:x.PropTypes.object.isRequired};j.propTypes=K,t.default=(0,R.connect)(function(e){return{schoolGate:e.settings.schoolGate,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{schoolGateActions:(0,O.bindActionCreators)(z,e)}})(j)},820:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(50),a(49)),r=n(o),l=(a(204),a(203)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S),I=function(e){function t(){var e,a,n,o;(0,c.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,m.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(l))),n.state={visible:!1,mockData:[],targetKeys:[]},n.showModal=function(){n.setState({visible:!0})},n.handleOk=function(){n.setState({visible:!1})},n.handleCancel=function(){n.setState({visible:!1})},n.getMock=function(){for(var e=[],t=[],a=0;a<0;a++){var o={key:a.toString(),title:"大门摄像头-BC1D7908",description:"description of content"+(a+1),chosen:2*Math.random()>1};o.chosen&&e.push(o.key),t.push(o)}n.setState({mockData:t,targetKeys:e})},n.filterOption=function(e,t){return t.description.indexOf(e)>-1},n.handleChange=function(e){n.setState({targetKeys:e})},o=a,(0,m.default)(n,o)}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.getMock()}},{key:"render",value:function(){return y.default.createElement("div",null,y.default.createElement("a",{style:{color:"#4ec1b2"},onClick:this.showModal},"0"),y.default.createElement(r.default,{title:"绑定传感器",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,width:620},y.default.createElement(i.default,{dataSource:this.state.mockData,showSearch:!0,listStyle:{width:260,height:300},titles:["传感器名称-传感器MAC","传感器名称-传感器MAC"],operations:["绑定","解绑"],filterOption:this.filterOption,targetKeys:this.state.targetKeys,onChange:this.handleChange,render:function(e){return e.title}})))}}]),t}(S.Component);t.default=I},821:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Classroom=t.SchoolGate=t.CrowdedArea=void 0;var o=a(817),r=n(o),l=a(819),i=n(l),s=a(816),d=n(s);t.CrowdedArea=r.default,t.SchoolGate=i.default,t.Classroom=d.default},822:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(39),a(38)),l=o(r),i=(a(29),a(28)),s=o(i),d=(a(47),a(46)),u=o(d),c=(a(50),a(49)),f=o(c),p=(a(73),a(72)),h=o(p),m=(a(37),a(35)),g=o(m),v=(a(33),a(18)),S=o(v),y=(a(23),a(22)),I=o(y),C=a(13),b=o(C),E=a(1),w=o(E),A=a(9),M=o(A),L=a(3),_=o(L),T=a(2),D=o(T),N=(a(129),a(128)),x=o(N),k=a(4),O=o(k),R=(a(41),a(48)),F=o(R),P=(a(65),a(64)),G=o(P),H=a(0),V=o(H),B=a(40),W=a(21),z=a(17),U=a(99),j=n(U),K=a(394),q=n(K),Y=a(176),J=n(Y);a(683);var $=G.default.Item,Z=function(e){var t=e.form.getFieldDecorator,a={labelCol:{span:6},wrapperCol:{span:14}},n=e.initialCameraInfo;return V.default.createElement(G.default,null,V.default.createElement($,(0,O.default)({},a,{label:"摄像头名称",hasFeedback:!0}),t("cameraName",{initialValue:n.cameraName,rules:[{required:!0,message:"请输入摄像头名称!",whitespace:!0},{message:"仅支持中英文，数字和下划线",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:function(e,t,a){j.getStringByteLength(t)>32?a("摄像头名称不能超过16个汉字或32个字符"):a()}}]})(V.default.createElement(F.default,{type:"text",maxLength:"32",disabled:e.isModify}))),V.default.createElement($,(0,O.default)({},a,{label:"IP地址",hasFeedback:!0}),t("cameraIp",{initialValue:n.cameraIp,rules:[{required:!0,message:"请输入IP地址!",whitespace:!0},{message:"IP地址格式不正确!",pattern:/^(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])$/}]})(V.default.createElement(F.default,{onKeyUp:function(e){e.target.value=e.target.value.replace(/\s+/g,"")}}))),V.default.createElement($,(0,O.default)({},a,{label:"端口号",hasFeedback:!0}),t("cameraPort",{initialValue:n.cameraPort,rules:[{required:!0,message:"请输入端口号!"},{type:"number",message:"输入值须为0~65535的数字"}]})(V.default.createElement(x.default,{min:0,max:65535}))),V.default.createElement($,(0,O.default)({},a,{label:"用户名",hasFeedback:!0}),t("userName",{initialValue:n.userName,rules:[{required:!0,message:"请输入用户名!",whitespace:!0},{message:"仅支持中英文，数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/}]})(V.default.createElement(F.default,{maxLength:"32"}))),V.default.createElement($,(0,O.default)({},a,{label:"密码",hasFeedback:!0}),t("password",{initialValue:n.password,rules:[{required:!0,message:"请输入密码!",whitespace:!0}]})(V.default.createElement(F.default,{type:"password",maxLength:"32",onKeyUp:function(e){e.target.value=e.target.value.replace(/\s+/g,"")}}))))};Z.propTypes={form:V.default.PropTypes.object.isRequired};var Q=G.default.create()(Z),X=function(e){function t(e){(0,w.default)(this,t);var a=(0,_.default)(this,(t.__proto__||(0,b.default)(t)).call(this,e));return a.onInputCameraName=function(e){var t=e.target.value;(/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/.test(t)||""===t)&&a.setState({cameraNameSearchText:t})},a.onInputCameraIp=function(e){var t=e.target.value;(/^[0-9\.]+$/.test(t)||""===t)&&a.setState({cameraIpSearchText:t})},a.onSearch=function(){var e=a.state,t=e.cameraNameSearchText,n=e.cameraIpSearchText,o=new RegExp(t,"gi"),r=new RegExp(n,"gi");a.setState({filterCameraNameVisible:!1,filterCameraIpVisible:!1,cameraNameFiltered:!!t,cameraIpFiltered:!!n,data:a.props.cameraList.map(function(e){var t=e.cameraName.match(o),a=e.cameraIp.match(r);return t&&a?(0,O.default)({},e):null}).filter(function(e){return!!e})})},a.emitEmpty=function(e){"cameraName"===e?(a.cameraNameSearch.focus(),a.setState({cameraNameSearchText:""})):"cameraIp"===e&&(a.cameraIpSearch.focus(),a.setState({cameraIpSearchText:""}))},a.showAddModal=function(){a.props.cameraListActions.showAddCamera(),a.setState({isModify:!1,initialCameraInfo:{cameraName:"",cameraIp:"",cameraPort:"",userName:"",password:""}})},a.showModifyModal=function(e){a.props.cameraListActions.showAddCamera(),a.setState({isModify:!0,initialCameraInfo:{cameraName:e.cameraName,cameraIp:e.cameraIp,cameraPort:e.cameraPort,userName:e.userName,password:e.password}})},a.handleOk=function(){a.form.validateFields(function(e,t){if(!e){var n={scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId,cameraName:t.cameraName,cameraIp:t.cameraIp,cameraPort:t.cameraPort,userName:t.userName,password:t.password};a.state.isModify?a.props.cameraActions.modifyCameraFromServer(n).then(function(e){I.default.success("修改摄像头成功!"),a.fetchTableData(),a.props.cameraListActions.hideAddCamera()}).catch(function(e){a.props.cameraListActions.hideAddCamera(),I.default.error("修改摄像头失败: "+e.message),a.fetchTableData()}):(a.setState({addLoading:!0}),a.props.cameraActions.addCameraToServer(n).then(function(e){a.fetchTableData(),a.props.cameraListActions.hideAddCamera(),I.default.success("添加摄像头成功!"),a.setState({addLoading:!1})}).catch(function(e){a.props.cameraListActions.hideAddCamera(),a.setState({addLoading:!1}),I.default.error("添加摄像头失败: "+e.message),a.fetchTableData()}))}})},a.onDelete=function(e){var t=[{cameraName:e.cameraName}];a.props.cameraActions.deleteCameraFromServer(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId,t).then(function(e){I.default.success("删除摄像头成功!"),a.setState({selectedRowKeys:[],selectedRows:[]}),a.fetchTableData()}).catch(function(e){I.default.error("删除摄像头失败: "+e.message),a.fetchTableData()})},a.handleBatchDelete=function(){a.setState({batchDelLoading:!0});var e=a.state.selectedRows,t=[];if(e.length>0){for(var n=0;n<e.length;n++){var o=e[n];t.push({cameraName:o.cameraName})}a.props.cameraActions.deleteCameraFromServer(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId,t).then(function(e){a.fetchTableData(),a.setState({batchDelLoading:!1,selectedRowKeys:[],selectedRows:[]}),I.default.success("删除摄像头成功!")}).catch(function(e){a.setState({batchDelLoading:!1}),I.default.error("删除摄像头失败: "+e.message),a.fetchTableData()})}},a.showModal=function(){a.props.cameraListActions.showAddCamera()},a.handleCancel=function(){a.props.cameraListActions.hideAddCamera()},a.afterAddModalClose=function(){a.form&&a.form.resetFields()},a.fetchTableData=function(){a.props.cameraActions.fetchCameraListData(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId).then(function(){var e=a.props.cameraList;a.setState({data:e,filterCameraNameVisible:!1,cameraNameSearchText:"",cameraNameFiltered:!1,filterCameraIpVisible:!1,cameraIpSearchText:"",cameraIpFiltered:!1})}).catch(function(e){I.default.error("获取摄像头列表失败: "+e.message)})},a.state={isModify:!1,initialCameraInfo:{cameraName:"",cameraIp:"",cameraPort:"",userName:"",password:""},addLoading:!1,batchDelLoading:!1,selectedRowKeys:[],selectedRows:[],filterCameraNameVisible:!1,cameraNameSearchText:"",cameraNameFiltered:!1,filterCameraIpVisible:!1,cameraIpSearchText:"",cameraIpFiltered:!1,data:[]},a}return(0,D.default)(t,e),(0,M.default)(t,[{key:"componentWillMount",value:function(){this.props.cameraActions.local_clearCameraList()}},{key:"componentDidMount",value:function(){""!==this.props.scenario.scenarioId&&""!==this.props.scenario.currentSchoolId&&this.fetchTableData()}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenario.scenarioId!==e.scenario.scenarioId||this.props.scenario.currentSchoolId!==e.scenario.currentSchoolId)&&e.scenario.scenarioId&&e.scenario.currentSchoolId&&this.props.cameraActions.fetchCameraListData(e.scenario.scenarioId,e.scenario.currentSchoolId).then(function(){var e=t.props.cameraList;t.setState({data:e,filterCameraNameVisible:!1,cameraNameSearchText:"",cameraNameFiltered:!1,filterCameraIpVisible:!1,cameraIpSearchText:"",cameraIpFiltered:!1})}).catch(function(e){I.default.error("获取摄像头列表失败: "+e.message)})}},{key:"componentWillUnmount",value:function(){this.props.cameraListState.isVisible&&this.props.cameraListActions.hideAddCamera()}},{key:"render",value:function(){var e=this,t=this.props.scenario,a=t.scenarioId,n=t.currentSchoolId,o=this.props.cameraActions,r=o.addCameraToServer,i=o.modifyCameraFromServer,d=(o.fetchCameraListData,this.state),c=d.isModify,p=d.selectedRowKeys,m=d.initialCameraInfo,v={selectedRowKeys:p,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},y=this.state.cameraNameSearchText?V.default.createElement(S.default,{type:"close-circle",onClick:function(){return e.emitEmpty("cameraName")}}):null,I=this.state.cameraIpSearchText?V.default.createElement(S.default,{type:"close-circle",onClick:function(){return e.emitEmpty("cameraIp")}}):null,C=[{title:"摄像头名称",dataIndex:"cameraName",filterDropdown:V.default.createElement("div",{className:"custom-filter-dropdown"},V.default.createElement(F.default,{ref:function(t){return e.cameraNameSearch=t},placeholder:"搜索摄像头名称",value:this.state.cameraNameSearchText,onChange:this.onInputCameraName,onPressEnter:this.onSearch,suffix:y,maxLength:"32"}),V.default.createElement(g.default,{type:"primary",onClick:this.onSearch},"搜索")),filterIcon:V.default.createElement(S.default,{type:"search",style:{color:this.state.cameraNameFiltered?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterCameraNameVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterCameraNameVisible:t},function(){return e.cameraNameSearch.focus()})}},{title:"IP地址",dataIndex:"cameraIp",filterDropdown:V.default.createElement("div",{className:"custom-filter-dropdown"},V.default.createElement(F.default,{ref:function(t){return e.cameraIpSearch=t},placeholder:"搜索IP地址",value:this.state.cameraIpSearchText,onChange:this.onInputCameraIp,onPressEnter:this.onSearch,suffix:I,maxLength:"15"}),V.default.createElement(g.default,{type:"primary",onClick:this.onSearch},"搜索")),filterIcon:V.default.createElement(S.default,{type:"search",style:{color:this.state.cameraIpFiltered?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterCameraIpVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterCameraIpVisible:t},function(){return e.cameraIpSearch.focus()})}},{title:"端口号",dataIndex:"cameraPort"},{title:"用户名",dataIndex:"userName"},{title:"密码",dataIndex:"password",render:function(e){return"********"}},{title:"操作",key:"operation",render:function(t,a,n){return V.default.createElement("div",{style:{fontSize:14},className:"operation"},V.default.createElement("a",{title:"修改",style:{marginRight:8,color:"#b3b7dd"},onClick:function(){return e.showModifyModal(a)}},V.default.createElement("i",{className:"fa fa-edit fa-lg"})),V.default.createElement(h.default,{title:"确定删除?(会删除相关区域绑定的摄像头)",onConfirm:function(){return e.onDelete(a)}},V.default.createElement("a",{title:"删除",style:{marginRight:8,color:"#b3b7dd"}},V.default.createElement("i",{className:"fa fa-trash-o fa-lg"}))))}}],b=this.state.selectedRowKeys.length>0;return V.default.createElement(l.default,{title:"摄像头管理",style:{minHeight:784},extra:V.default.createElement(B.Link,{to:"/iot/web/education/school/device-manage"},"返回")},V.default.createElement(f.default,{title:c?"修改摄像头":"添加摄像头",visible:this.props.cameraListState.isVisible,onCancel:this.handleCancel,onOk:this.handleOk,afterClose:this.afterAddModalClose},V.default.createElement(Q,{ref:function(t){e.form=t},scenarioId:a,currentSchoolId:n,isModify:c,addCameraToServer:r,modifyCameraFromServer:i,initialCameraInfo:m})),V.default.createElement(s.default,{spinning:this.props.cameraListLoading},V.default.createElement("div",{style:{width:"100%",height:30,margin:"5px 0px 15px 0px",fontWeight:800}},V.default.createElement(h.default,{title:"确定删除?(会删除相关区域绑定的摄像头)",onConfirm:this.handleBatchDelete},V.default.createElement(g.default,{type:"primary",icon:"delete",disabled:!b,loading:this.state.batchDelLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"删除")),V.default.createElement(g.default,{type:"primary",icon:"plus",onClick:this.showAddModal,loading:this.state.addLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"添加")),V.default.createElement(u.default,{rowSelection:v,columns:C,dataSource:this.state.data,rowKey:function(e){return e.cameraIp+e.cameraPort},pagination:{total:this.state.data.length,showSizeChanger:!0,showQuickJumper:!0}})))}}]),t}(V.default.Component);t.default=(0,W.connect)(function(e){return{cameraListLoading:e.common.camera.loading,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,cameraList:e.common.camera.cameraList,cameraListState:e.settings.cameraList}},function(e){return{cameraActions:(0,z.bindActionCreators)(J,e),cameraListActions:(0,z.bindActionCreators)(q,e)}})(X)},823:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(40),v=a(191),S=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return m.default.createElement("div",null,m.default.createElement(v.Row,null,m.default.createElement(v.Col,{lg:3,sm:6},m.default.createElement(g.Link,{to:"/iot/web/education/school/device-manage/module-list"},m.default.createElement("div",{className:"panel widget bg-primary"},m.default.createElement(v.Row,{className:"row-table"},m.default.createElement(v.Col,{xs:4,className:"text-center bg-primary-dark pv-lg"},m.default.createElement("em",{className:"icon-puzzle fa-3x"})),m.default.createElement(v.Col,{xs:8,className:"pv-lg"},m.default.createElement("div",{className:"h2 mt0"},this.props.moduleList.length||0),m.default.createElement("div",{className:"text-uppercase"},"定位模块")))))),m.default.createElement(v.Col,{lg:3,sm:6},m.default.createElement(g.Link,{to:"/iot/web/education/school/device-manage/camera-list"},m.default.createElement("div",{className:"panel widget bg-purple"},m.default.createElement(v.Row,{className:"row-table"},m.default.createElement(v.Col,{xs:4,className:"text-center bg-purple-dark pv-lg"},m.default.createElement("em",{className:"icon-camrecorder fa-3x"})),m.default.createElement(v.Col,{xs:8,className:"pv-lg"},m.default.createElement("div",{className:"h2 mt0"},this.props.cameraList.length||0),m.default.createElement("div",{className:"text-uppercase"},"摄像头")))))),m.default.createElement(v.Col,{lg:3,sm:6,xs:12},m.default.createElement(g.Link,{to:"/iot/web/education/school/device-manage/sensor-list"},m.default.createElement("div",{className:"panel widget bg-green"},m.default.createElement(v.Row,{className:"row-table"},m.default.createElement(v.Col,{xs:4,className:"text-center bg-green-dark pv-lg"},m.default.createElement("em",{className:"icon-speedometer fa-3x"})),m.default.createElement(v.Col,{xs:8,className:"pv-lg"},m.default.createElement("div",{className:"h2 mt0"},this.props.sensorList.length||0),m.default.createElement("div",{className:"text-uppercase"},"传感器")))))),m.default.createElement(v.Col,{lg:3,sm:6,xs:12},m.default.createElement(g.Link,{to:"/iot/web/education/school/device-manage/gateway-list"},m.default.createElement("div",{className:"panel widget bg-yellow"},m.default.createElement(v.Row,{className:"row-table"},m.default.createElement(v.Col,{xs:4,className:"text-center bg-yellow-dark pv-lg"},m.default.createElement("em",{className:"icon-size-fullscreen fa-3x"})),m.default.createElement(v.Col,{xs:8,className:"pv-lg"},m.default.createElement("div",{className:"h2 mt0"},this.props.gatewayList.length||0),m.default.createElement("div",{className:"text-uppercase"},"智能网关"))))))))}}]),t}(m.default.Component);t.default=S},824:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(39),a(38)),l=o(r),i=(a(47),a(46)),s=o(i),d=(a(175),a(174)),u=o(d),c=(a(257),a(256)),f=o(c),p=(a(50),a(49)),h=o(p),m=(a(29),a(28)),g=o(m),v=(a(73),a(72)),S=o(v),y=(a(37),a(35)),I=o(y),C=(a(33),a(18)),b=o(C),E=(a(23),a(22)),w=o(E),A=a(13),M=o(A),L=a(1),_=o(L),T=a(9),D=o(T),N=a(3),x=o(N),k=a(2),O=o(k),R=(a(129),a(128)),F=o(R),P=a(4),G=o(P),H=(a(41),a(48)),V=o(H),B=(a(91),a(86)),W=o(B),z=(a(65),a(64)),U=o(z),j=a(0),K=o(j),q=a(40),Y=a(21),J=a(17),$=a(99),Z=n($),Q=a(395),X=n(Q),ee=a(132),te=n(ee),ae=a(150),ne=n(ae);a(683);var oe=U.default.Item,re=W.default.Option,le=function(e){for(var t=e.form.getFieldDecorator,a={labelCol:{span:6},wrapperCol:{span:8}},n={labelCol:{span:6},wrapperCol:{span:17}},o=[],r=e.deviceList,l=0;l<r.length;l+=1)o.push(K.default.createElement(re,{key:r[l].IC_SN+"/"+r[l].IG_SN},r[l].IC_SN+" / "+r[l].IG_SN));for(var i=[],s=1;s<33;s+=1)i.push(K.default.createElement(re,{key:s},s));var d=e.initialModuleInfo;return K.default.createElement(U.default,null,K.default.createElement(oe,(0,G.default)({},n,{label:"定位模块名称",hasFeedback:!0}),t("location",{initialValue:d.location,rules:[{required:!0,message:"请输入定位模块名称!",whitespace:!0},{message:"仅支持中英文，数字和下划线",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:function(e,t,a){Z.getStringByteLength(t)>32?a("定位模块名称不能超过16个汉字或32个字符"):a()}}]})(K.default.createElement(V.default,{maxLength:"32",disabled:e.isModify,style:{width:345}}))),K.default.createElement(oe,(0,G.default)({},n,{label:"控制器/网关",hasFeedback:!0}),t("IC_SN_IG_SN",{initialValue:d.IC_SN_IG_SN,rules:[{required:!0,message:"请选择控制器/网关!"}]})(K.default.createElement(W.default,{showSearch:!0,style:{width:345},placeholder:"控制器序列号/网关序列号",optionFilterProp:"children",disabled:e.isModify},o))),K.default.createElement(oe,(0,G.default)({},a,{label:"模块",hasFeedback:!0}),t("IM_SN",{initialValue:d.IM_SN,rules:[{required:!0,message:"请选择模块!"}]})(K.default.createElement(W.default,{showSearch:!0,style:{width:165},placeholder:"模块序列号",optionFilterProp:"children",disabled:e.isModify},i))),K.default.createElement(oe,(0,G.default)({},a,{label:"信号覆盖半径",hasFeedback:!0}),t("radius",{initialValue:d.radius,rules:[{required:!0,message:"请输入覆盖半径"},{message:"请输入0.1-1000的数字,精确到小数点后一位",pattern:/^0\.\d$|^[1-9]\d{0,2}(\.\d)?$|^1000$/}]})(K.default.createElement(F.default,{min:.1,max:1e3,step:.1})),K.default.createElement("span",{className:"ant-form-text"},"(米)")))};le.propTypes={form:K.default.PropTypes.object.isRequired};var ie=U.default.create()(le),se=function(e){function t(e){(0,_.default)(this,t);var a=(0,x.default)(this,(t.__proto__||(0,M.default)(t)).call(this,e));return a.onUploadChange=function(e){var t=e.fileList.length;if(a.setState({fileList:t?[e.fileList[t-1]]:[]}),"done"===e.file.status){w.default.success(e.file.name+" 文件上传成功");var n=e.file.response;0==n.retCode?(w.default.success(e.file.name+" 定位模组导入成功"),a.fetchTableData(),a.setState({importVisible:!1})):(w.default.error(e.file.name+" 定位模组导入失败："+n.result),a.fetchTableData(),a.setState({importVisible:!1}))}else"error"===e.file.status&&w.default.error(e.file.name+" 文件上传失败")},a.onInputLocation=function(e){var t=e.target.value;(/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/.test(t)||""===t)&&a.setState({locationSearchText:t})},a.onInputIC_SN=function(e){var t=e.target.value;(/^[a-zA-Z0-9\_]+$/.test(t)||""===t)&&a.setState({IC_SNSearchText:t})},a.onInputIG_SN=function(e){var t=e.target.value;(/^[a-zA-Z0-9\_]+$/.test(t)||""===t)&&a.setState({IG_SNSearchText:t})},a.onSearch=function(){var e=a.state,t=e.locationSearchText,n=e.IC_SNSearchText,o=e.IG_SNSearchText,r=new RegExp(t,"gi"),l=new RegExp(n,"gi"),i=new RegExp(o,"gi");a.setState({filterLocationVisible:!1,filterIC_SNVisible:!1,filterIG_SNVisible:!1,locationfiltered:!!t,IC_SNfiltered:!!n,IG_SNfiltered:!!o,data:a.props.moduleList.map(function(e){var t=e.location.match(r),a=e.IC_SN.match(l),n=e.IG_SN.match(i);return t&&a&&n?(0,G.default)({},e):null}).filter(function(e){return!!e})})},a.emitEmpty=function(e){"location"===e?(a.locationSearch.focus(),a.setState({locationSearchText:""})):"IC"===e?(a.IC_SNSearch.focus(),a.setState({IC_SNSearchText:""})):"IG"===e&&(a.IG_SNSearch.focus(),a.setState({IG_SNSearchText:""}))},a.showAddModal=function(){a.setState({deviceLoading:!0}),a.props.moduleListActions.showAddModule(),a.setState({isModify:!1,initialModuleInfo:{location:"",IC_SN_IG_SN:"",IM_SN:"",radius:""}}),a.props.scenarioActions.getIotNetworkDeviceListBySchool({scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId}).then(function(e){a.setState({deviceList:e.value,deviceLoading:!1})}).catch(function(e){w.default.error("获取学校绑定的网络设备失败: "+e.message)})},a.showModifyModal=function(e){a.props.moduleListActions.showAddModule(),a.setState({isModify:!0,initialModuleInfo:{location:e.location,IC_SN_IG_SN:e.IC_SN+"/"+e.IG_SN,IM_SN:e.IM_SN,radius:e.radius}})},a.handleOk=function(){a.form.validateFields(function(e,t){if(!e){var n=[];n=t.IC_SN_IG_SN.split("/");var o={scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId,location:t.location,IC_SN:n[0],IG_SN:n[1],IM_SN:t.IM_SN,radius:t.radius};a.state.isModify?(a.setState({modifyLoading:!0}),a.props.moduleActions.modifyModuleFromServer(o).then(function(e){w.default.success("修改定位模块成功!"),a.fetchTableData(),a.props.moduleListActions.hideAddModule(),a.setState({modifyLoading:!1})}).catch(function(e){w.default.error("修改定位模块失败: "+e.message),a.fetchTableData(),a.props.moduleListActions.hideAddModule(),a.setState({modifyLoading:!1})})):(a.setState({addLoading:!0}),a.props.moduleActions.addModuleToServer(o).then(function(e){w.default.success("添加定位模块成功!"),a.fetchTableData(),a.props.moduleListActions.hideAddModule(),a.setState({addLoading:!1})}).catch(function(e){a.setState({addLoading:!1}),w.default.error("添加定位模块失败: "+e.message),a.fetchTableData(),a.props.moduleListActions.hideAddModule()}))}})},a.onDelete=function(e){var t=[{locationName:e.location}];a.props.moduleActions.deleteModuleFromServer(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId,t).then(function(e){w.default.success("删除定位模块成功!"),a.setState({selectedRowKeys:[],selectedRows:[]}),a.fetchTableData()}).catch(function(e){w.default.error("删除定位模块失败: "+e.message),a.fetchTableData()})},a.handleBatchDelete=function(){a.setState({batchDelLoading:!0});var e=a.state.selectedRows,t=[];if(e.length>0){for(var n=e.length-1;n>=0;n--){var o=e[n];t.push({locationName:o.location})}a.props.moduleActions.deleteModuleFromServer(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId,t).then(function(e){a.setState({batchDelLoading:!1,selectedRowKeys:[],selectedRows:[]}),w.default.success("删除定位模块成功!"),a.fetchTableData()}).catch(function(e){a.setState({batchDelLoading:!1}),w.default.error("删除定位模块失败: "+e.message),a.fetchTableData()})}},a.showModal=function(){a.props.moduleListActions.showAddModule()},a.handleCancel=function(){a.props.moduleListActions.hideAddModule()},a.afterAddModalClose=function(){a.form&&a.form.resetFields()},a.showImportModal=function(){a.setState({importVisible:!0})},a.handleCancelImport=function(){a.setState({importVisible:!1})},a.fetchTableData=function(){a.props.moduleActions.fetchModuleListData(a.props.scenario.scenarioId,a.props.scenario.currentSchoolId).then(function(){var e=a.props.moduleList;a.setState({data:e,filterLocationVisible:!1,locationSearchText:"",locationfiltered:!1,filterIC_SNVisible:!1,IC_SNSearchText:"",IC_SNfiltered:!1,filterIG_SNVisible:!1,IG_SNSearchText:"",IG_SNfiltered:!1})}).catch(function(e){w.default.error("获取模块列表失败: "+e.message)})},a.state={isModify:!1,initialModuleInfo:{location:"",IC_SN_IG_SN:"",IM_SN:"",radius:""},deviceLoading:!1,modifyLoading:!1,addLoading:!1,batchDelLoading:!1,selectedRowKeys:[],selectedRows:[],importVisible:!1,filterLocationVisible:!1,locationSearchText:"",locationfiltered:!1,filterIC_SNVisible:!1,IC_SNSearchText:"",IC_SNfiltered:!1,filterIG_SNVisible:!1,IG_SNSearchText:"",IG_SNfiltered:!1,data:[],fileList:[],deviceList:[]},a}return(0,O.default)(t,e),(0,D.default)(t,[{key:"componentWillMount",value:function(){this.props.moduleActions.local_clearModuleList()}},{key:"componentDidMount",value:function(){""!==this.props.scenario.scenarioId&&""!==this.props.scenario.currentSchoolId&&this.fetchTableData()}},{key:"componentWillReceiveProps",value:function(e){var t=this;(this.props.scenario.scenarioId!==e.scenario.scenarioId||this.props.scenario.currentSchoolId!==e.scenario.currentSchoolId)&&e.scenario.scenarioId&&e.scenario.currentSchoolId&&this.props.moduleActions.fetchModuleListData(e.scenario.scenarioId,e.scenario.currentSchoolId).then(function(){var e=t.props.moduleList;t.setState({data:e,filterLocationVisible:!1,locationSearchText:"",locationfiltered:!1,filterIC_SNVisible:!1,IC_SNSearchText:"",IC_SNfiltered:!1,filterIG_SNVisible:!1,IG_SNSearchText:"",IG_SNfiltered:!1})}).catch(function(e){w.default.error("获取模块列表失败: "+e.message)})}},{key:"componentWillUnmount",value:function(){this.props.moduleListState.isVisible&&this.props.moduleListActions.hideAddModule()}},{key:"render",value:function(){var e=this,t=this.props.scenario,a=t.scenarioId,n=t.currentSchoolId,o=this.props.moduleActions,r=o.addModuleToServer,i=o.modifyModuleFromServer,d=(o.fetchModuleListData,this.state),c=d.isModify,p=d.selectedRowKeys,m=d.initialModuleInfo,v=d.fileList,y={selectedRowKeys:p,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},C=this.state.locationSearchText?K.default.createElement(b.default,{type:"close-circle",onClick:function(){return e.emitEmpty("location")}}):null,E=this.state.IC_SNSearchText?K.default.createElement(b.default,{type:"close-circle",onClick:function(){return e.emitEmpty("IC")}}):null,w=this.state.IG_SNSearchText?K.default.createElement(b.default,{type:"close-circle",onClick:function(){return e.emitEmpty("IG")}}):null,A=[{title:"模块名称",dataIndex:"location",key:"location",filterDropdown:K.default.createElement("div",{className:"custom-filter-dropdown"},K.default.createElement(V.default,{ref:function(t){return e.locationSearch=t},placeholder:"搜索模块名称",value:this.state.locationSearchText,onChange:this.onInputLocation,onPressEnter:this.onSearch,suffix:C,maxLength:"32"}),K.default.createElement(I.default,{type:"primary",onClick:this.onSearch},"搜索")),filterIcon:K.default.createElement(b.default,{type:"search",style:{color:this.state.locationfiltered?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterLocationVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterLocationVisible:t},function(){return e.locationSearch.focus()})}},{title:"控制器序列号",dataIndex:"IC_SN",filterDropdown:K.default.createElement("div",{className:"custom-filter-dropdown"},K.default.createElement(V.default,{ref:function(t){return e.IC_SNSearch=t},placeholder:"搜索控制器序列号",value:this.state.IC_SNSearchText,onChange:this.onInputIC_SN,onPressEnter:this.onSearch,suffix:E,maxLength:"32"}),K.default.createElement(I.default,{type:"primary",onClick:this.onSearch},"搜索")),filterIcon:K.default.createElement(b.default,{type:"search",style:{color:this.state.IC_SNfiltered?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterIC_SNVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterIC_SNVisible:t},function(){return e.IC_SNSearch.focus()})}},{title:"网关序列号",dataIndex:"IG_SN",filterDropdown:K.default.createElement("div",{className:"custom-filter-dropdown"},K.default.createElement(V.default,{ref:function(t){return e.IG_SNSearch=t},placeholder:"搜索网关序列号",value:this.state.IG_SNSearchText,onChange:this.onInputIG_SN,onPressEnter:this.onSearch,suffix:w,maxLength:"32"}),K.default.createElement(I.default,{type:"primary",onClick:this.onSearch},"搜索")),filterIcon:K.default.createElement(b.default,{type:"search",style:{color:this.state.IG_SNfiltered?"#1cc09f":"#aaa"}}),filterDropdownVisible:this.state.filterIG_SNVisible,onFilterDropdownVisibleChange:function(t){e.setState({filterIG_SNVisible:t},function(){return e.IG_SNSearch.focus()})}},{title:"模块序列号",dataIndex:"IM_SN"},{title:"覆盖半径(米)",dataIndex:"radius"},{title:"操作",key:"operation",render:function(t,a,n){return K.default.createElement("div",{style:{fontSize:14},className:"operation"},K.default.createElement("a",{title:"修改",style:{marginRight:8,color:"#b3b7dd"},onClick:function(){return e.showModifyModal(a)}},K.default.createElement("i",{className:"fa fa-edit fa-lg"})),K.default.createElement(S.default,{title:"确定删除?(会删除相关区域绑定的定位模块)",onConfirm:function(){return e.onDelete(a)}},K.default.createElement("a",{title:"删除",style:{marginRight:8,color:"#b3b7dd"}},K.default.createElement("i",{className:"fa fa-trash-o fa-lg"}))))}}],M=this.state.selectedRowKeys.length>0,L={name:"file",fileList:v,action:"/v3/fs/uploadLocalizerFile?scenarioId="+a+"&schoolId="+n,withCredentials:!0,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:this.onUploadChange};return K.default.createElement(l.default,{title:"定位模块管理",style:{minHeight:784},extra:K.default.createElement(q.Link,{to:"/iot/web/education/school/device-manage"},"返回")},this.props.moduleListState.isVisible?K.default.createElement(h.default,{title:c?"修改定位模块":"添加定位模块",visible:!0,onCancel:this.handleCancel,onOk:this.handleOk,afterClose:this.afterAddModalClose},K.default.createElement(g.default,{spinning:this.state.addLoading||this.state.modifyLoading||this.state.deviceLoading},K.default.createElement(ie,{ref:function(t){e.form=t},scenarioId:a,currentSchoolId:n,isModify:c,addModuleToServer:r,modifyModuleFromServer:i,initialModuleInfo:m,currentBindIGList:this.props.scenario.schoolList.data[n],deviceList:this.state.deviceList}))):null,this.state.importVisible?K.default.createElement(h.default,{title:"导入定位模块",visible:!0,onCancel:this.handleCancelImport,footer:null},K.default.createElement(f.default,{style:{margin:"20px 0px -20px 40px "}},K.default.createElement(f.default.Item,{dot:K.default.createElement(b.default,{type:"download",style:{fontSize:"16px"}})},"请先下载模板文件, 并按模版文件要求的格式填写",K.default.createElement("a",{href:"/v3/fs/downloadlocalizertemplate",target:"_blank",style:{color:"#FFF"}},K.default.createElement(I.default,{type:"primary",icon:"download",style:{marginLeft:10}},"下载模板"))),K.default.createElement(f.default.Item,{dot:K.default.createElement(b.default,{type:"edit",style:{fontSize:"16px"}})},"编辑······"),K.default.createElement(f.default.Item,{dot:K.default.createElement(b.default,{type:"upload",style:{fontSize:"16px"}})},K.default.createElement(u.default,L,"上传编辑好的模板文件",K.default.createElement(I.default,{type:"primary",icon:"upload",style:{marginLeft:10}},"选择文件..."))))):null,K.default.createElement(g.default,{spinning:this.props.moduleListLoading},K.default.createElement("div",{style:{width:"100%",height:30,margin:"5px 0px 15px 0px",fontWeight:800}},K.default.createElement(S.default,{title:"确定删除?(会删除相关区域绑定的定位模块)",onConfirm:this.handleBatchDelete},K.default.createElement(I.default,{type:"primary",icon:"delete",disabled:!M,loading:this.state.batchDelLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"删除")),K.default.createElement(I.default,{type:"primary",icon:"upload",style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14},onClick:this.showImportModal},"导入"),K.default.createElement(I.default,{type:"primary",icon:"plus",onClick:this.showAddModal,loading:this.state.addLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"添加")),K.default.createElement(s.default,{rowSelection:y,columns:A,dataSource:this.state.data,rowKey:function(e){return e.IC_SN+e.IG_SN+e.IM_SN},pagination:{total:this.state.data.length,showSizeChanger:!0,showQuickJumper:!0}})))}}]),t}(K.default.Component);t.default=(0,Y.connect)(function(e){return{moduleListLoading:e.common.module.loading,moduleList:e.common.module.moduleList,scenario:e.common.scenario,moduleListState:e.settings.moduleList}},function(e){return{moduleActions:(0,J.bindActionCreators)(te,e),moduleListActions:(0,J.bindActionCreators)(X,e),scenarioActions:(0,J.bindActionCreators)(ne,e)}})(se)},825:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(47),a(46)),i=n(l),s=(a(73),a(72)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=(a(50),a(49)),C=n(I),b=a(4),E=n(b),w=(a(41),a(48)),A=n(w),M=(a(65),a(64)),L=n(M),_=(a(149),a(106)),T=n(_),D=a(0),N=n(D),x=a(40),k=a(21),O=a(17),R=a(396),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(R),P=T.default.Group,G=L.default.Item,H=L.default.create()(function(e){var t=e.visible,a=e.hideAddSensor,n=e.onOk,o=e.form,r=o.getFieldDecorator,l={labelCol:{span:6},wrapperCol:{span:14}},i=[{label:"温度",value:"temperature"},{label:"湿度",value:"humidity"},{label:"含氧量",value:"oxygen"}];return N.default.createElement(C.default,{visible:t,title:"添加传感器",onCancel:a,onOk:n},N.default.createElement(L.default,null,N.default.createElement(G,(0,E.default)({},l,{label:"传感器名称",hasFeedback:!0}),r("sensorDescription",{rules:[{required:!0,message:"请输入传感器名称!"}]})(N.default.createElement(A.default,null))),N.default.createElement(G,(0,E.default)({},l,{label:"传感器MAC",hasFeedback:!0}),r("sensorMAC",{rules:[{required:!0,message:"请输入传感器MAC!"}]})(N.default.createElement(A.default,null))),N.default.createElement(G,(0,E.default)({},l,{label:"传感器类型",hasFeedback:!0}),r("sensorType",{rules:[{required:!0,message:"请输入传感器类型!"}]})(N.default.createElement(P,{options:i})))))}),V=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.handleOK=function(e){e.validateFieldsAndScroll(function(e,t){if(!e){for(var n=!1,o=!1,r=!1,l=t.sensorType.length,i=0;i<l;i++)"temperature"===t.sensorType[i]?n=!0:"humidity"===t.sensorType[i]?o=!0:"oxygen"===t.sensorType[i]&&(r=!0);var s={sensorDescription:t.sensorDescription,sensorMAC:t.sensorMAC,temperature:n,humidity:o,oxygen:r};a.props.sensorActions.addSensor(s),a.props.sensorListActions.hideAddSensor()}})},a.onDelete=function(e){a.props.sensorActions.removeSensor(e.sensorMAC)},a.showModal=function(){a.props.sensorListActions.showAddSensor()},a.columns=[{title:"传感器名称",dataIndex:"sensorDescription"},{title:"传感器MAC",dataIndex:"sensorMAC"},{title:"温度",dataIndex:"temperature",render:function(e,t,a){return t.temperature?N.default.createElement("em",{className:"fa fa-check-square-o"}):N.default.createElement("em",{className:"fa fa-square-o"})}},{title:"湿度",dataIndex:"humidity",render:function(e,t,a){return t.humidity?N.default.createElement("em",{className:"fa fa-check-square-o"}):N.default.createElement("em",{className:"fa fa-square-o"})}},{title:"含氧量",dataIndex:"oxygen",render:function(e,t,a){return t.oxygen?N.default.createElement("em",{className:"fa fa-check-square-o"}):N.default.createElement("em",{className:"fa fa-square-o"})}},{title:"操作",key:"operation",render:function(e,t,n){return N.default.createElement("div",{style:{fontSize:14},className:"operation"},N.default.createElement("a",{title:"修改",style:{marginRight:8,color:"#b3b7dd"}},N.default.createElement("i",{className:"fa fa-edit fa-lg"})),N.default.createElement(d.default,{title:"确定删除?",onConfirm:function(){return a.onDelete(t)}},N.default.createElement("a",{title:"删除",style:{marginRight:8,color:"#b3b7dd"}},N.default.createElement("i",{className:"fa fa-trash-o fa-lg"}))))}}],a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t={onChange:function(e,t){},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},a=this.columns;return N.default.createElement(r.default,{title:"传感器管理",style:{minHeight:784},extra:N.default.createElement(x.Link,{to:"/iot/web/education/school/device-manage"},"返回")},N.default.createElement(H,{ref:function(t){e.sensorForm=t},visible:this.props.sensorListState.isVisible,onOk:function(){e.handleOK(e.sensorForm)},hideAddSensor:this.props.sensorListActions.hideAddSensor}),N.default.createElement(i.default,{rowSelection:t,columns:a,dataSource:this.props.sensorList,rowKey:function(e){return e.sensorMAC},pagination:{total:this.props.sensorList.length,showSizeChanger:!0,showQuickJumper:!0}}))}}]),t}(N.default.Component);t.default=(0,k.connect)(function(e){return{sensorListState:e.settings.sensorList}},function(e){return{sensorListActions:(0,O.bindActionCreators)(F,e)}})(V)},826:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(29),a(28)),i=n(l),s=(a(47),a(46)),d=n(s),u=(a(37),a(35)),c=n(u),f=(a(50),a(49)),p=n(f),h=(a(73),a(72)),m=n(h),g=(a(23),a(22)),v=n(g),S=a(13),y=n(S),I=a(1),C=n(I),b=a(9),E=n(b),w=a(3),A=n(w),M=a(2),L=n(M),_=a(4),T=n(_),D=(a(41),a(48)),N=n(D),x=(a(65),a(64)),k=n(x),O=a(0),R=n(O),F=a(40),P=(a(21),a(17),k.default.Item),G=function(e){var t=function(t){t.preventDefault(),e.form.validateFieldsAndScroll(function(e,t){})},a=e.form.getFieldDecorator,n={labelCol:{span:6},wrapperCol:{span:14}};return R.default.createElement(k.default,{onSubmit:t},R.default.createElement(P,(0,T.default)({},n,{label:"设备名称",hasFeedback:!0}),a("gatewayName",{rules:[{required:!0,message:"请输入网关名称!"},{message:"仅支持中英文，数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/}]})(R.default.createElement(N.default,{type:"text",maxLength:"32",disabled:e.isModify}))),R.default.createElement(P,(0,T.default)({},n,{label:"设备ID",hasFeedback:!0}),a("gatewayId",{rules:[{required:!0,message:"请输入网关ID!"},{pattern:/^[a-zA-Z0-9]+$/,message:"只能包含字母和数字"}]})(R.default.createElement(N.default,{type:"text",maxLength:"32"}))))};G.propTypes={form:R.default.PropTypes.object.isRequired};var H=k.default.create()(G),V=function(e){function t(e){(0,C.default)(this,t);var a=(0,A.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e));return a.showAddModal=function(){a.setState({isModalVisible:!0})},a.handleOk=function(){a.form.validateFields(function(e,t){if(!e){var n={scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId,gatewayList:[{gatewayName:t.gatewayName,gatewayId:t.gatewayId}]};a.setState({addLoading:!0}),a.props.gatewayActions.addIotGatewayList(n).then(function(e){v.default.success("添加网关成功"),a.props.gatewayActions.getIotGatewayList({scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId}),a.setState({isModalVisible:!1,addLoading:!1})}).catch(function(e){a.setState({addLoading:!1}),v.default.error("添加网关失败: "+e.message)})}})},a.onDelete=function(e){var t={scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId,gatewayList:[{gatewayName:e.gatewayName,gatewayId:e.gatewayId}]};a.props.gatewayActions.deleteIotGatewayList(t).then(function(e){v.default.success("删除网关成功"),a.setState({selectedRowKeys:[],selectedRows:[]}),a.props.gatewayActions.getIotGatewayList({scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId})}).catch(function(e){v.default.error("删除网关失败: "+e.message)})},a.handleBatchDelete=function(){a.setState({batchDelLoading:!0});var e=a.state.selectedRows,t={scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId,gatewayList:[]};if(e.length>0){for(var n=0;n<e.length;n++){var o=e[n];t.gatewayList.push({gatewayId:o.gatewayId})}a.props.gatewayActions.deleteIotGatewayList(t).then(function(e){v.default.success("删除网关成功"),a.props.gatewayActions.getIotGatewayList({scenarioId:a.props.scenario.scenarioId,schoolId:a.props.scenario.currentSchoolId}),a.setState({batchDelLoading:!1,selectedRowKeys:[],selectedRows:[]})}).catch(function(e){a.setState({batchDelLoading:!1}),v.default.error("删除网关失败: "+e.message)})}},a.handleCancel=function(){a.setState({isModalVisible:!1})},a.afterAddModalClose=function(){a.form&&a.form.resetFields()},a.state={isModalVisible:!1,addLoading:!1,batchDelLoading:!1,selectedRowKeys:[],selectedRows:[]},a.columns=[{title:"设备名称",dataIndex:"gatewayName"},{title:"设备ID",dataIndex:"gatewayId"},{title:"操作",key:"operation",render:function(e,t,n){return R.default.createElement("div",{style:{fontSize:14},className:"operation"},R.default.createElement(m.default,{title:"确定删除?",onConfirm:function(){return a.onDelete(t)}},R.default.createElement("a",{title:"删除",style:{marginRight:8,color:"#b3b7dd"}},R.default.createElement("i",{className:"fa fa-trash-o fa-lg"}))))}}],a}return(0,L.default)(t,e),(0,E.default)(t,[{key:"componentWillMount",value:function(){this.props.gatewayActions.local_clearGatewayList()}},{key:"componentDidMount",value:function(){""!==this.props.scenario.scenarioId&&""!==this.props.scenario.currentSchoolId&&this.props.gatewayActions.getIotGatewayList({scenarioId:this.props.scenario.scenarioId,schoolId:this.props.scenario.currentSchoolId}).catch(function(e){v.default.error("获取网关列表失败: "+e.message)})}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenario.scenarioId!==e.scenario.scenarioId||this.props.scenario.currentSchoolId!==e.scenario.currentSchoolId)&&e.scenario.scenarioId&&e.scenario.currentSchoolId&&this.props.gatewayActions.getIotGatewayList({scenarioId:this.props.scenario.scenarioId,schoolId:this.props.scenario.currentSchoolId}).catch(function(e){v.default.error("获取网关列表失败: "+e.message)})}},{key:"render",value:function(){var e=this,t=this.props.scenario,a=t.scenarioId,n=t.currentSchoolId,o=this.state.selectedRowKeys,l={selectedRowKeys:o,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},onSelect:function(e,t,a){},onSelectAll:function(e,t,a){}},s=this.columns,u=this.state.selectedRowKeys.length>0;return R.default.createElement(r.default,{title:"智能设备管理",style:{minHeight:784},extra:R.default.createElement(F.Link,{to:"/iot/web/education/school/device-manage"},"返回")},R.default.createElement(p.default,{title:"添加智能设备",visible:this.state.isModalVisible,onCancel:this.handleCancel,onOk:this.handleOk,afterClose:this.afterAddModalClose},R.default.createElement(H,{ref:function(t){e.form=t},scenarioId:a,currentSchoolId:n})),R.default.createElement(i.default,{spinning:this.props.gatewayListLoading},R.default.createElement("div",{style:{width:"100%",height:30,margin:"5px 0px 15px 0px",fontWeight:800}},R.default.createElement(m.default,{title:"确定删除?",onConfirm:this.handleBatchDelete},R.default.createElement(c.default,{type:"primary",icon:"delete",disabled:!u,loading:this.state.batchDelLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"删除")),R.default.createElement(c.default,{type:"primary",icon:"plus",onClick:this.showAddModal,loading:this.state.addLoading,style:{marginRight:20,height:30,width:74,float:"right",fontWeight:600,fontSize:14}},"添加")),R.default.createElement(d.default,{rowSelection:l,columns:s,dataSource:this.props.gatewayList,rowKey:function(e){return e.gatewayId},pagination:{total:this.props.gatewayList.length,showSizeChanger:!0,showQuickJumper:!0}})))}}]),t}(R.default.Component);t.default=V},827:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case f:return(0,u.default)({},e,{isVisible:!0});case p:return(0,u.default)({},e,{isVisible:!1});case h:return(0,u.default)({},e,{confirmLoading:!0});case m:return(0,u.default)({},e,{confirmLoading:!1});case g:return(0,u.default)({},e,{imgInfo:t.payload});default:return e}}function o(){return{type:f}}function r(){return{type:p}}function l(){return{type:h}}function i(){return{type:m}}function s(e){return{type:g,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(4),u=function(e){return e&&e.__esModule?e:{default:e}}(d);t.default=n,t.showUpload=o,t.hideUpload=r,t.showUploadConfirm=l,t.hideUploadConfirm=i,t.saveImgInfo=s;var c={isVisible:!1,confirmLoading:!1,imgInfo:{}},f="MAPEDIT/MAPUPLOAD/SHOW",p="MAPEDIT/MAPUPLOAD/HIDE",h="MAPEDIT/MAPUPLOAD/SHOWCONFIRM",m="MAPEDIT/MAPUPLOAD/HIDECONFIRM",g="MAPEDIT/MAPUPLOAD/SETIMGINFO"},828:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,r,l=(a(50),a(49)),i=n(l),s=(a(175),a(174)),d=n(s),u=(a(37),a(35)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(23),a(22)),m=n(h),g=a(13),v=n(g),S=a(1),y=n(S),I=a(9),C=n(I),b=a(3),E=n(b),w=a(2),A=n(w),M=a(4),L=n(M),_=(a(129),a(128)),T=n(_),D=(a(65),a(64)),N=n(D),x=a(0),k=n(x),O=N.default.Item,R=N.default.create()(function(e){var t=e.form.getFieldDecorator,a=function(t,a,n){var o=e.form;o.getFieldValue("scale");"number"!=typeof a||a>65535||a<=0?n("输入值须为1-65535的数字"):n()},n={labelCol:{span:4},wrapperCol:{span:15}};return k.default.createElement(N.default,null,k.default.createElement(O,(0,L.default)({},n,{label:"比例尺"}),t("scale",{rules:[{required:!0,message:"请输入比例尺大小"},{validator:a}]})(k.default.createElement(T.default,{min:1,max:65535,step:1})),k.default.createElement("span",{className:"ant-form-text"}," : "),k.default.createElement("span",{className:"ant-form-text",style:{borderRadius:2,border:"1px solid #d9d9d9",backgroundColor:"#f7f7f7",height:"30px",lineHeight:"30px",padding:"0 5px",marginRight:5}}," 1 "),k.default.createElement("span",{className:"ant-form-text"}," px/m (像素/米)")))}),F=function(e){function t(){var e,a,n,l;(0,y.default)(this,t);for(var i=arguments.length,s=Array(i),d=0;d<i;d++)s[d]=arguments[d];return a=n=(0,E.default)(this,(e=t.__proto__||(0,v.default)(t)).call.apply(e,[this].concat(s))),n.state={fileList:[]},n.showModal=function(){n.props.showUpload()},n.handleOk=function(){if(n.state.fileList.length<=0)return void m.default.info("请先上传一张地图");n.form.validateFields(function(e,t){if(!e){var a={mapID:n.props.currentMapID,mapURL:n.state.fileList[0].response.path,mapWidth:o,mapHeight:r,scale:t.scale};n.props.saveImgInfo(a),n.props.setImg(a),n.props.setCurrentImgUrl(n.state.fileList[0].response.path),n.props.hideUpload()}})},n.handleCancel=function(){n.props.hideUpload()},n.getBase64=function(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)},n.beforeUpload=function(e,t){var a=e.name.lastIndexOf("."),o=e.name.substr(a+1),r="jpe"===o||"jfif"===o,l="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type;r&&m.default.error("只能上传jpg/png/bmp文件!"),l||m.default.error("只能上传jpg/png/bmp文件!");var i=e.size/1024/1024<2;return i||m.default.error("只能上传小于2MB的图片!"),l&&!r&&n.props.showUploadConfirm(),l&&i&&!r},n.handleChange=function(e){var t=e.fileList.length;if(n.setState({fileList:t?[e.fileList[t-1]]:[]}),"done"===e.file.status){var a=new Image;a.src=e.file.thumbUrl,a.onload=function(){o=a.width,r=a.height},n.props.hideUploadConfirm()}},l=a,(0,E.default)(n,l)}return(0,A.default)(t,e),(0,C.default)(t,[{key:"render",value:function(){var e=this;return k.default.createElement("div",null,k.default.createElement(i.default,{visible:this.props.mapUpload.isVisible,confirmLoading:this.props.mapUpload.confirmLoading,onOk:this.handleOk,onCancel:this.handleCancel,maskClosable:!1},k.default.createElement("div",null,k.default.createElement("div",{style:{width:"100%"}},k.default.createElement(d.default,{action:"/v3/ace/oasis/oasis-rest-map/restapp/uploadfile/imageUpload",listType:"picture",accept:"image/jpeg,image/png,image/bmp",className:"upload-list-inline",beforeUpload:this.beforeUpload,onChange:this.handleChange,fileList:this.state.fileList},k.default.createElement(c.default,null,k.default.createElement(p.default,{type:"upload"})," 选择图片"),"(仅支持jpg/png/bmp格式的图片,且大小不能超过2M.)")),k.default.createElement("br",{style:{clear:"both"}})),k.default.createElement(R,{ref:function(t){e.form=t},visible:!1})),k.default.createElement("div",{style:{height:"48px",width:"100%",fontSize:18,borderBottom:"1px, solid, red"}},k.default.createElement(c.default,{icon:"upload",size:"large",onClick:this.showModal,style:{float:"right",backgroundColor:"#b3b7dd",color:"#FFFFFF"},disabled:!this.props.isEditing},"上传地图图片")))}}]),t}(x.Component);t.default=F},829:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case m:return(0,f.default)({},e,{isEditing:!0});case g:return(0,f.default)({},e,{isEditing:!1});case h:return(0,f.default)({},e,{moduleStateBeforeEdit:t.payload});case y:return(0,f.default)({},e,{currentImgUrl:t.payload});case I:return(0,f.default)({},e,{currentMapID:t.payload});case v:return(0,f.default)({},e,{promptVisible:!0});case S:return(0,f.default)({},e,{promptVisible:!1});default:return e}}function o(){return{type:m}}function r(){return{type:g}}function l(e){return{type:h,payload:e}}function i(e){return{type:y,payload:e}}function s(e){return{type:I,payload:e}}function d(){return{type:v}}function u(){return{type:S}}Object.defineProperty(t,"__esModule",{value:!0});var c=a(4),f=function(e){return e&&e.__esModule?e:{default:e}}(c);t.default=n,t.enableEdit=o,t.disableEdit=r,t.saveModuleState=l,t.setCurrentImgUrl=i,t.setCurrentMapID=s,t.showPrompt=d,t.hidePrompt=u;var p={isEditing:!1,promptVisible:!1,moduleStateBeforeEdit:null,currentImgUrl:"",currentMapID:""},h="MAPEDIT/MAPEDIT/SAVEMODULESTATE",m="MAPEDIT/MAPEDIT/ENABLEEDIT",g="MAPEDIT/MAPEDIT/DISABLEEDIT",v="MAPEDIT/MAPEDIT/SHOWPROMPT",S="MAPEDIT/MAPEDIT/HIDEPROMPT",y="MAPEDIT/MAPEDIT/SETCURRENTIMGURL",I="MAPEDIT/MAPEDIT/SETCURRENTMAPID"},830:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(50),a(49)),i=n(l),s=(a(175),a(174)),d=n(s),u=(a(37),a(35)),c=n(u),f=(a(33),a(18)),p=n(f),h=(a(73),a(72)),m=n(h),g=a(205),v=n(g),S=(a(23),a(22)),y=n(S),I=a(13),C=n(I),b=a(1),E=n(b),w=a(9),A=n(w),M=a(3),L=n(M),_=a(2),T=n(_),D=(a(129),a(128)),N=n(D),x=a(4),k=n(x),O=(a(41),a(48)),R=n(O),F=(a(65),a(64)),P=n(F),G=a(0),H=n(G),V=a(21),B=a(17),W=a(398),z=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(W);a(1617);var U,j,K=P.default.Item,q=[],Y=function(e){var t=e.form.getFieldDecorator,a=function(t,a,n){var o=e.form;o.getFieldValue("scale");"number"!=typeof a||a>65535||a<=0?n("输入值须为1-65535的数字"):n()},n={labelCol:{span:6},wrapperCol:{span:14}},o=e.initialMapInfo;return H.default.createElement(P.default,null,H.default.createElement(K,(0,k.default)({},n,{label:"地图名称",hasFeedback:!0}),t("mapName",{initialValue:o.mapName,rules:[{required:!0,message:"请输入地图名称!",whitespace:!0},{message:"仅支持中英文、数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/}]})(H.default.createElement(R.default,{maxLength:"32"}))),H.default.createElement(K,(0,k.default)({},n,{label:"地图描述",hasFeedback:!0}),t("mapDescribe",{initialValue:o.mapDescribe,rules:[{message:"仅支持中英文、数字和中文标点， 起始和结束不能为空格, 最长不超过256个字符",pattern:/^[^ ][a-zA-Z0-9\u4e00-\u9fa5\（\）\《\》\——\；\，\。\“\”\<\>\！ ]+[^ ]$/}]})(H.default.createElement(R.default,{type:"textarea",maxLength:"256",onKeyUp:function(e){e.target.value=e.target.value.replace(/ {2,}/g," ")}}))),H.default.createElement(K,(0,k.default)({},n,{label:"比例尺"}),t("scale",{initialValue:o.scale,rules:[{required:!0,message:"请输入比例尺大小"},{validator:a}]})(H.default.createElement(N.default,{min:1,max:65535,step:1})),H.default.createElement("span",{className:"ant-form-text"}," : "),H.default.createElement("span",{className:"ant-form-text",style:{borderRadius:2,border:"1px solid #d9d9d9",backgroundColor:"#f7f7f7",height:"30px",lineHeight:"30px",padding:"0 5px",marginRight:5}}," 1 "),H.default.createElement("span",{className:"ant-form-text"}," px/m (像素/米)")))};Y.propTypes={form:H.default.PropTypes.object.isRequired};var J=P.default.create()(Y),$=function(e){function t(e){(0,E.default)(this,t);var a=(0,L.default)(this,(t.__proto__||(0,C.default)(t)).call(this,e));return a.showAddModal=function(){a.props.mapsTableActions.showAddFloor(),a.setState({fileList:[],isModify:!1,initialMapInfo:{mapName:"",mapDescribe:"",scale:""}})},a.showModifyModal=function(e){a.props.mapsTableActions.showAddFloor();var t="",n=a.props.mapList.data[e.mapID];n&&(t=n.mapURL,U=n.mapWidth,j=n.mapHeight),a.setState({fileList:[{uid:-1,status:"done",url:t,response:{path:t}}],isModify:!0,initialMapInfo:{mapName:e.mapName,mapDescribe:e.mapDescribe,scale:e.scale}})},a.handleOk=function(){if(a.state.fileList.length<=0)return void y.default.info("请先上传一张地图");a.form.validateFields(function(e,t){if(!e){var n={scenarioId:a.props.scenarioId,schoolId:a.props.schoolId,mapID:a.props.mapsEdit.currentMapID,mapName:t.mapName,mapDescribe:t.mapDescribe,mapURL:a.state.fileList[0].response.path,mapWidth:U,mapHeight:j,scale:t.scale};a.state.isModify?a.props.moduleActions.modifyMapFromServer(n).then(function(e){void 0!==a.state.fileList[0].response&&a.state.fileList[0].response.path!==a.props.mapsEdit.currentImgUrl&&a.props.moduleActions.deleteMapImgFromServer(a.props.mapsEdit.currentImgUrl),y.default.success("修改地图成功!");var t=[];t[0]=new v.default(function(e,t){a.props.moduleActions.fetchMapListData(a.props.scenarioId,a.props.schoolId).then(function(){e()})}),t[1]=new v.default(function(e,t){a.props.moduleActions.fetchModuleListData(a.props.scenarioId,a.props.schoolId).then(function(){e()})}),v.default.all(t).then(function(){a.props.moduleActions.updateBindModuleList();var e=a.props.mapList.data[a.props.mapsEdit.currentMapID];e&&a.props.mapsEditActions.setCurrentImgUrl(e.mapURL)}),a.props.mapsTableActions.hideAddFloor()}).catch(function(e){y.default.error("修改地图失败: "+e.message),a.props.mapsTableActions.hideAddFloor()}):(a.setState({addLoading:!0}),a.props.moduleActions.addMapToServer(n).then(function(){y.default.success("添加地图成功!"),a.props.moduleActions.fetchMapListData(a.props.scenarioId,a.props.schoolId).then(function(){if(a.props.moduleActions.updateBindModuleList(),1===q.length){var e=q[0];e&&(a.props.mapsEditActions.setCurrentMapID(e.mapID),a.props.mapsEditActions.setCurrentImgUrl(e.mapURL))}}).catch(function(e){}),a.props.moduleActions.fetchModuleListData(a.props.scenarioId,a.props.schoolId).then(function(){a.props.moduleActions.updateBindModuleList()}).catch(function(e){}),a.props.mapsTableActions.hideAddFloor(),a.setState({addLoading:!1})}).catch(function(e){y.default.error("添加地图失败: "+e.message),a.props.mapsTableActions.hideAddFloor(),a.setState({addLoading:!1})}))}})},a.onDelete=function(e){var t={scenarioId:a.props.scenarioId,schoolId:a.props.schoolId,mapID:e.mapID};a.props.moduleActions.deleteMapFromServer(t).then(function(){var t=a.props.mapList.data[e.mapID];t&&a.props.moduleActions.deleteMapImgFromServer(t.mapURL),y.default.success("删除地图成功!");var n=[];n[0]=new v.default(function(e,t){a.props.moduleActions.fetchMapListData(a.props.scenarioId,a.props.schoolId).then(function(){e()})}),n[1]=new v.default(function(e,t){a.props.moduleActions.fetchModuleListData(a.props.scenarioId,a.props.schoolId).then(function(){e()})}),v.default.all(n).then(function(){a.props.moduleActions.updateBindModuleList();var e=q[0];e?(a.props.mapsEditActions.setCurrentMapID(e.mapID),a.props.mapsEditActions.setCurrentImgUrl(e.mapURL)):(a.props.mapsEditActions.setCurrentMapID(""),a.props.mapsEditActions.setCurrentImgUrl(""))})}).catch(function(e){y.default.error("删除地图失败: "+e.message)})},a.showModal=function(){a.props.mapsTableActions.showAddFloor()},a.handleCancel=function(){a.state.fileList.length>=1&&void 0!==a.state.fileList[0].response&&a.state.fileList[0].response.path!==a.props.mapsEdit.currentImgUrl&&a.props.moduleActions.deleteMapImgFromServer(a.state.fileList[0].response.path),a.props.mapsTableActions.hideAddFloor()},a.afterAddModalClose=function(){a.form&&a.form.resetFields()},a.beforeUpload=function(e,t){var n=e.name.lastIndexOf("."),o=e.name.substr(n+1),r="jpe"===o||"jfif"===o,l="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type;r&&y.default.error("只能上传jpg/png/bmp文件!"),l||y.default.error("只能上传jpg/png/bmp文件!");var i=e.size/1024/1024<2;return i||y.default.error("只能上传小于2MB的图片!"),l&&!r&&a.setState({confirmLoading:!0}),l&&i&&!r},a.handleChange=function(e){var t=e.fileList.length;if(t>=2&&void 0!==e.fileList[0].response&&e.fileList[0].response.path!==a.props.mapsEdit.currentImgUrl&&a.props.moduleActions.deleteMapImgFromServer(e.fileList[0].response.path),a.props.mapsTable.isVisible||a.setState({fileList:[]}),a.setState({fileList:t?[e.fileList[t-1]]:[]}),"removed"===e.file.status&&void 0!==e.file.response&&e.file.response.path!==a.props.mapsEdit.currentImgUrl&&a.props.moduleActions.deleteMapImgFromServer(e.file.response.path),"done"===e.file.status){var n=new Image;n.src=e.file.thumbUrl,n.onload=function(){U=n.width,j=n.height},a.setState({confirmLoading:!1})}},a.selectLayer=function(e){if(!a.props.mapsEdit.isEditing){a.props.mapsEditActions.setCurrentMapID(e.mapID);var t=-1;if(q.some(function(a,n){return t=n,a.mapID===e.mapID})){var n=q[t],o=n.mapURL;a.props.mapsEditActions.setCurrentImgUrl(o)}}},a.setSelectedRowClass=function(e){return e.mapID===a.props.mapsEdit.currentMapID?"selected-layer":""},a.state={fileList:[],confirmLoading:!1,isModify:!1,initialMapInfo:{mapName:"",mapDescribe:"",scale:""},addLoading:!1},a.columns=[{title:"地图名称",dataIndex:"mapName",width:"25%",onCellClick:a.selectLayer},{title:"定位模块数",dataIndex:"bindModuleList.length",width:"10%",onCellClick:a.selectLayer},{title:"比例尺 (px/m)",dataIndex:"scale",width:"15%",onCellClick:a.selectLayer},{title:"地图描述",dataIndex:"mapDescribe",width:"35%",onCellClick:a.selectLayer,render:function(e,t,a){return t.mapDescribe||"--"}},{title:"操作",dataIndex:"operation",width:"15%",render:function(e,t){return H.default.createElement("div",{className:"operation"},H.default.createElement("a",{title:"修改",disabled:a.props.mapsEdit.isEditing,style:{marginRight:4,color:"#b3b7dd"},onClick:function(){return a.showModifyModal(t)}},H.default.createElement("i",{className:"fa fa-edit fa-lg"})),H.default.createElement(m.default,{title:"确定删除?",onConfirm:function(){return a.onDelete(t)}},H.default.createElement("a",{title:"删除",disabled:a.props.mapsEdit.isEditing,style:{marginLeft:4,color:"#b3b7dd"}},H.default.createElement("i",{className:"fa fa-trash-o fa-lg"}))))},onCellClick:a.selectLayer}],a}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.props.mapList){this.props.moduleActions.updateBindModuleList();var t=q[0];t&&(this.props.mapsEditActions.setCurrentMapID(t.mapID),this.props.mapsEditActions.setCurrentImgUrl(t.mapURL))}this.props.moduleActions.fetchMapListData(this.props.scenarioId,this.props.schoolId).then(function(){e.props.moduleActions.updateBindModuleList();var t=q[0];t&&(e.props.mapsEditActions.setCurrentMapID(t.mapID),e.props.mapsEditActions.setCurrentImgUrl(t.mapURL))}).catch(function(e){y.default.error("获取地图信息失败:"+e.message)})}},{key:"componentWillUnmount",value:function(){this.props.mapsTable.isVisible&&this.props.mapsTableActions.hideAddFloor()}},{key:"render",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.schoolId,o=this.props.moduleActions,l=o.addMapToServer,s=o.modifyMapFromServer,u=(o.fetchMapListData,o.fetchModuleListData,this.state.isModify),f=this.state.initialMapInfo,h=this.columns;q=[];for(var m=this.props.mapList.data,g=this.props.mapList.sort,v=0;v<g.length;v++){var S=g[v];m[S]&&q.push(m[S])}return H.default.createElement("div",{style:{paddingTop:20}},this.props.mapsTable.isVisible?H.default.createElement(i.default,{title:u?"修改地图信息":"添加地图",confirmLoading:this.state.confirmLoading,visible:!0,onCancel:this.handleCancel,onOk:this.handleOk,afterClose:this.afterAddModalClose},H.default.createElement(J,{ref:function(t){e.form=t},scenarioId:a,schoolId:n,isModify:u,addMapToServer:l,modifyMapFromServer:s,initialMapInfo:f}),H.default.createElement("div",{style:{marginLeft:122,marginRight:82}},H.default.createElement(d.default,{action:"/v3/ace/oasis/oasis-rest-map/restapp/uploadfile/imageUpload",listType:"picture",accept:"image/jpeg,image/png,image/bmp",className:"upload-list-inline",beforeUpload:this.beforeUpload,onChange:this.handleChange,fileList:this.state.fileList},H.default.createElement(c.default,null,H.default.createElement(p.default,{type:"upload"})," 选择图片"),H.default.createElement("br",null),"(仅支持jpg/jpeg/png/bmp格式的图片,且大小不能超过2M)"))):null,H.default.createElement("div",{style:{height:"40px",width:"100%",padding:0,borderBottom:"1px, solid, red"}},H.default.createElement("div",{style:{float:"left",width:100,fontSize:18,color:"#303a4e"}},"地图信息"),H.default.createElement(c.default,{id:"addfloor",type:"primary",size:"large",icon:"plus-circle-o",onClick:this.showAddModal,style:{float:"right"},loading:this.state.addLoading,disabled:this.props.mapsEdit.isEditing},"添加地图")),H.default.createElement(r.default,{size:"small",bordered:!0,dataSource:q,columns:h,rowKey:"mapID",loading:this.props.moduleState.mapLoading,pagination:{defaultPageSize:5,size:"large"},rowClassName:this.setSelectedRowClass}))}}]),t}(G.Component);t.default=(0,V.connect)(function(e){return{mapsTable:e.settings.mapsTable}},function(e){return{mapsTableActions:(0,B.bindActionCreators)(z,e)}})($)},831:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=(a(118),a(97)),i=n(l),s=(a(45),a(44)),d=n(s),u=(a(54),a(53)),c=n(u),f=(a(33),a(18)),p=n(f),h=a(4),m=n(h),g=a(10),v=n(g),S=(a(23),a(22)),y=n(S),I=a(13),C=n(I),b=a(1),E=n(b),w=a(9),A=n(w),M=a(3),L=n(M),_=a(2),T=n(_),D=a(0),N=n(D),x=a(1373),k=n(x);a(1618);var O=a(233),R=function(e){function t(){var e,a,n,o;(0,E.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,L.default)(this,(e=t.__proto__||(0,C.default)(t)).call.apply(e,[this].concat(l))),n.getUnboundModuleList=function(e){return e.filter(function(e){return!1===e.isBindMap})},n.onClickAddModule=function(e,t){if(!n.props.currentImgUrl)return void y.default.warning("请先上传地图再添加定位模块");if(void 0!==e&&void 0!==t&&n.props.isEditing){var a=n.props.mapList.data[n.props.currentMapID],o=parseInt(a.mapWidth),r=parseInt(a.mapHeight),l={IGIM_SN:e+t,bind_x:(o<600?o:600)*Math.random(),bind_y:(r<400?r:350)*Math.random(),mapID:n.props.currentMapID};n.props.bindModuleToMap(l),n.props.updateBindModuleList()}},n.renderThumb=function(e){var t=e.style,a=(0,v.default)(e,["style"]),n={backgroundColor:"rgba(0, 0, 0, 0.4)",borderRadius:"inherit",cursor:"pointer"};return N.default.createElement("div",(0,m.default)({style:(0,m.default)({},t,n)},a))},o=a,(0,L.default)(n,o)}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.scenarioId,n=t.schoolId;""!==a&&""!==n&&this.props.fetchModuleListData(a,n).then(function(){e.props.updateBindModuleList()}).catch(function(e){y.default.error("获取定位模块失败:"+e.message)})}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.schoolId!==e.schoolId)&&e.scenarioId&&e.schoolId&&e.fetchModuleListData(e.scenarioId,e.schoolId).catch(function(e){y.default.error("获取定位模块失败:"+e.message)}),e.moduleList||this.props.moduleList==e.moduleList||this.props.updateBindModuleList()}},{key:"render",value:function(){var e=this,t=this.getUnboundModuleList(this.props.moduleList).map(function(t){return N.default.createElement("li",{key:t.IG_SN+t.IM_SN},N.default.createElement(r.default,{bodyStyle:{padding:10,height:78},style:{backgroundColor:"transparent"},key:t.IG_SN+t.IM_SN},N.default.createElement(d.default,{gutter:0},N.default.createElement(c.default,{span:4},N.default.createElement(p.default,{type:"environment",style:{color:"#56cfb8",width:20,height:26,padding:0,fontSize:26,marginTop:5}})),N.default.createElement(c.default,{span:20},N.default.createElement("div",{style:{fontSize:17,marginTop:5,color:"#51adfe"}},"定位模块:",t.location))),N.default.createElement(d.default,{gutter:0},N.default.createElement(c.default,{span:4,push:20},N.default.createElement(i.default,{placement:"leftBottom",title:"添加"},N.default.createElement("a",{disabled:!e.props.isEditing,onClick:function(){return e.onClickAddModule(t.IG_SN,t.IM_SN)}},N.default.createElement(p.default,{type:"plus-circle-o",style:{color:e.props.isEditing?"#56cfb8":"#b3b7dd",width:20,height:26,padding:0,fontSize:22,marginTop:5}})))))))});return N.default.createElement("div",{style:{padding:0,height:408,backgroundColor:"white"}},N.default.createElement("div",{className:"noneSelectLabel",style:{paddingLeft:10,paddingTop:20,paddingBottom:10,fontSize:14,borderBottom:"1px solid #eef0f4",color:"#303a4e"}},"定位模块列表"),N.default.createElement("div",{style:{padding:0,height:356,backgroundColor:"white"}},N.default.createElement(O.Scrollbars,{renderThumbHorizontal:this.renderThumb,renderThumbVertical:this.renderThumb},N.default.createElement("ul",null,N.default.createElement(k.default,{transitionName:"common",transitionAppear:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},t)))))}}]),t}(D.Component);t.default=R},832:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=a(10),i=n(l),s=(a(23),a(22)),d=n(s),u=(a(29),a(28)),c=n(u),f=(a(50),a(49)),p=n(f),h=(a(37),a(35)),m=n(h),g=a(13),v=n(g),S=a(1),y=n(S),I=a(9),C=n(I),b=a(3),E=n(b),w=a(2),A=n(w),M=a(0),L=n(M),_=a(247),T=n(_),D=a(233),N=a(831),x=n(N),k=a(397),O=n(k),R=a(828),F=(n(R),function(e){function t(e){(0,y.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,v.default)(t)).call(this,e));return P.call(a),a.state={bindLoading:!1,unbindLoading:!1,addMapLoading:!1},a}return(0,A.default)(t,e),(0,C.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){if(this.refs.myImg.src){var e=document.getElementById("dragCanvas");e.style.width=this.refs.myImg.width+"px",e.style.height=this.refs.myImg.height+"px"}}},{key:"render",value:function(){for(var e=this.props.mapsEdit.isEditing,t=this.props.mapsEdit.promptVisible,a=this.props.mapsEdit.currentMapID,n=this.props.mapsEdit.currentImgUrl,o=[],r=""===a,l=this.getBoundModuleList(this.props.moduleList,a),i=0;i<l.length;i+=1){var s=l[i];o.push(L.default.createElement(O.default,{key:s.IG_SN+s.IM_SN,IG_SN:s.IG_SN,IM_SN:s.IM_SN,currentMapID:a,bind_x:s.bind_x,bind_y:s.bind_y,isEditing:e,location:s.location,updateModulePosition:this.props.moduleActions.updateModulePosition,unbindModule:this.props.moduleActions.unbindModule,updateBindModuleList:this.props.moduleActions.updateBindModuleList}))}return L.default.createElement(c.default,{spinning:this.props.moduleState.loading||this.state.bindLoading||this.state.unbindLoading||this.state.addMapLoading},L.default.createElement("div",{style:{padding:0,height:512}},L.default.createElement("div",{style:{height:"50px",width:"100%",paddingTop:10,borderBottom:"1px, solid, red"}},L.default.createElement("div",{style:{float:"left",width:100,fontSize:18,color:"#303a4e",display:e?"none":""}},"地图管理"),L.default.createElement(m.default,{id:"mapedit",type:"primary",icon:"edit",size:"large",onClick:this.showEdit,disabled:r,style:{float:"right",display:e?"none":""}},"编辑地图"),L.default.createElement(m.default,{type:"primary",icon:"check-circle-o",onClick:this.submitEdit,style:{float:"left",display:e?"":"none"}},"提交"),L.default.createElement(m.default,{icon:"close-circle-o",onClick:this.cancelEdit,type:"danger",style:{float:"left",marginLeft:10,display:e?"":"none"}},"取消"),L.default.createElement(p.default,{title:"提示",visible:t,footer:null,onCancel:this.handleCancel},L.default.createElement("p",null,"地图已修改，是否保存？"),L.default.createElement("div",{style:{height:30,width:"100%"}},L.default.createElement(m.default,{onClick:this.handleOk,type:"primary",style:{float:"right"}},"是"),L.default.createElement(m.default,{onClick:this.handleDiscard,type:"danger",style:{float:"right",marginRight:10}},"否"),L.default.createElement(m.default,{onClick:this.handleCancel,style:{float:"right",marginRight:10}},"取消")))),L.default.createElement("div",{style:{height:462,width:"100%",margin:"0 0 10px",paddingTop:27,paddingLeft:24,paddingRight:24,backgroundColor:"#aabac3"}},L.default.createElement("div",{style:{width:"100%",float:"left"}},L.default.createElement("div",{style:{marginRight:"240px"}},L.default.createElement(D.Scrollbars,{renderThumbHorizontal:this.renderThumb,renderThumbVertical:this.renderThumb,style:{height:408,position:"relative",backgroundColor:"white",zIndex:50,textAlign:"center",margin:"0 auto",boxShadow:"2px 2px 2px #888888"}},L.default.createElement("img",{style:{verticalAlign:"middle",position:"absolute",left:"0px",top:"0px"},ref:"myImg",src:this.props.mapsEdit.currentImgUrl,alt:""}),L.default.createElement("div",{id:"dragCanvas",style:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}},o)))),L.default.createElement("div",{style:{position:"relative",float:"right",width:228,marginLeft:"-228px",boxShadow:"2px 2px 2px #888888"}},L.default.createElement(x.default,{scenarioId:this.props.scenarioId,schoolId:this.props.schoolId,isEditing:e,currentMapID:a,currentImgUrl:n,moduleList:this.props.moduleList,mapList:this.props.mapList,fetchModuleListData:this.props.moduleActions.fetchModuleListData,bindModuleToMap:this.props.moduleActions.bindModuleToMap,updateBindModuleList:this.props.moduleActions.updateBindModuleList})))))}}]),t}(M.Component)),P=function(){var e=this;this.showEdit=function(){e.props.mapsEditActions.saveModuleState(e.props.moduleState),e.props.mapsEditActions.enableEdit(),d.default.info("进入编辑状态!")},this.submitEdit=function(){for(var t={scenarioId:e.props.scenarioId,schoolId:e.props.schoolId,mapID:e.props.mapsEdit.currentMapID,bindModule:[]},a=e.props.moduleList.length,n=0;n<a;n+=1)"bind"!==e.props.moduleList[n].action&&"update"!==e.props.moduleList[n].action||t.bindModule.push({location:e.props.moduleList[n].location,bind_x:e.props.moduleList[n].bind_x,bind_y:e.props.moduleList[n].bind_y});var o={scenarioId:e.props.scenarioId,schoolId:e.props.schoolId,mapID:e.props.mapsEdit.currentMapID,unBindModule:[]};for(n=0;n<a;n+=1)"unbind"===e.props.moduleList[n].action&&o.unBindModule.push({location:e.props.moduleList[n].location});t.bindModule.length>0&&(e.setState({bindLoading:!0}),e.props.moduleActions.submitBindModule(t).then(function(t){e.setState({bindLoading:!1})}).catch(function(t){e.setState({bindLoading:!1}),d.default.error("绑定模块失败: "+t.message)})),o.unBindModule.length>0&&(e.setState({unbindLoading:!0}),e.props.moduleActions.submitUnBindModule(o).then(function(t){e.setState({unbindLoading:!1})}).catch(function(t){e.setState({unbindLoading:!1}),d.default.error("解除绑定模块失败: "+t.message)})),T.default.isEmpty(e.props.mapUpload.imgInfo)||(e.setState({addMapLoading:!0}),e.props.moduleActions.addMapUrlToServer(e.props.scenarioId,e.props.schoolId,e.props.mapUpload.imgInfo).then(function(t){e.setState({addMapLoading:!1})}).catch(function(t){e.setState({addMapLoading:!1}),d.default.error("添加地图失败: "+t.message)})),e.props.moduleActions.resetModuleListAction(),e.props.mapsEditActions.disableEdit()},this.cancelEdit=function(){e.props.mapsEdit.moduleStateBeforeEdit!==e.props.moduleState?e.showModal():e.props.mapsEditActions.disableEdit()},this.showModal=function(){e.props.mapsEditActions.showPrompt()},this.handleOk=function(){e.submitEdit(),e.props.mapsEditActions.hidePrompt()},this.handleDiscard=function(){e.props.moduleActions.revertModulestate(e.props.mapsEdit.moduleStateBeforeEdit);for(var t in e.props.mapsEdit.moduleStateBeforeEdit.mapList.data)e.props.mapsEdit.moduleStateBeforeEdit.mapList.data.hasOwnProperty(t)&&t===e.props.mapsEdit.currentMapID&&e.props.mapsEditActions.setCurrentImgUrl(e.props.mapsEdit.moduleStateBeforeEdit.mapList.data[e.props.mapsEdit.currentMapID].mapURL);e.props.moduleActions.updateBindModuleList(),e.props.mapsEditActions.disableEdit(),e.props.mapsEditActions.hidePrompt()},this.handleCancel=function(){e.props.mapsEditActions.hidePrompt()},this.getBoundModuleList=function(e,t){return e.filter(function(e){return e.mapID===t&&!0===e.isBindMap})},this.renderThumb=function(e){var t=e.style,a=(0,i.default)(e,["style"]),n={backgroundColor:"rgba(0, 0, 0, 0.4)",borderRadius:"inherit",cursor:"pointer"};return L.default.createElement("div",(0,r.default)({style:(0,r.default)({},t,n)},a))}};t.default=F},833:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMap=t.MapsTable=void 0;var o=a(830),r=n(o),l=a(832),i=n(l);t.MapsTable=r.default,t.ModuleMap=i.default},834:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(50),a(49)),r=n(o),l=(a(364),a(736)),i=n(l),s=(a(41),a(48)),d=n(s),u=a(4),c=n(u),f=a(13),p=n(f),h=a(1),m=n(h),g=a(9),v=n(g),S=a(3),y=n(S),I=a(2),C=n(I),b=(a(85),a(74)),E=n(b),w=(a(65),a(64)),A=n(w),M=a(0),L=n(M),_=a(99),T=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(_),D=A.default.Item,N=E.default.Group,x=function(e){function t(e){(0,m.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.onChange=function(e){a.setState({radioValue:e.target.value})},a.onMethodChange=function(e){a.setState({radioMethodValue:e.target.value})},a.onAuthChange=function(e){a.setState({radioAuthValue:e.target.value})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.checkPassword=function(e,t,n){var o=a.props.form;t&&t!==o.getFieldValue("password")?n("输入密码不一致!"):n()},a.checkConfirm=function(e,t,n){var o=a.props.form;t&&a.state.confirmDirty&&o.validateFields(["confirm"],{force:!0}),n()},a.checkUserName=function(e,t,a){T.getStringByteLength(t)>32?a("应用名不能超过16个汉字或者32个字符"):a()},a.state={radioValue:"进校",radioMethodValue:"post",radioAuthValue:"无认证",confirmDirty:!1,userValue:void 0},a}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.props.appCardValue&&void 0!==this.props.serRowIndex){var e=this.props.appCardValue.subscribeTable[this.props.serRowIndex],t=void 0;t="无认证"===e.Authentication?void 0:{userName:e.userName,password:e.password,confirm:e.confirm},this.setState({radioValue:e.subScribeType,radioAuthValue:e.Authentication,userValue:t})}}},{key:"componentWillUpdate",value:function(e,t){if(void 0!==this.props.appCardValue&&void 0!==this.props.serRowIndex){this.state.userValue}}},{key:"componentDidUpdate",value:function(e,t){if(void 0!==this.props.appCardValue&&void 0!==this.props.serRowIndex){var a=this.props.appCardValue.subscribeTable[this.props.serRowIndex],n=void 0,o=this.props.form;"无认证"!==this.state.radioAuthValue&&"无认证"===t.radioAuthValue&&void 0!==this.state.userValue&&o.setFieldsValue((0,c.default)({},this.state.userValue)),n="无认证"===a.Authentication?void 0:{userName:a.userName,password:a.password,confirm:a.confirm},1===this.props.serEdtCli&&this.setState({radioValue:a.subScribeType,radioAuthValue:a.Authentication,confirmDirty:!1,userValue:n})}void 0===this.props.appCardValue&&void 0===this.props.serRowIndex&&1===this.props.serAddCli&&this.setState({radioValue:"进校",radioMethodValue:"post",radioAuthValue:"无认证",confirmDirty:!1,userValue:void 0})}},{key:"subScribeTypeForm",value:function(e,t){var a=void 0,n=void 0,o=void 0,r=void 0,l=!1,s=new RegExp("((http|ftp|https)://)(([a-zA-Z0-9._-]+.[a-zA-Z]{2,6})|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,4})*(/[a-zA-Z0-9&%_./-~-]*)?"),u=this.props.form,f=u.getFieldDecorator,p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},h={rules:[{required:!0,message:"请选择消息方法!"}]},m={rules:[{required:!0,message:"请输入消息url!",min:1,max:256},{message:"URL格式不正确！",pattern:s}]},g={rules:[{required:!0,message:"请选择服务类型!"}]},v={rules:[{required:!0,message:"请输入认证用户名!",min:1,max:32},{validator:this.checkUserName}]},S={rules:[{required:!0,message:"请输入认证密码!",min:1,max:32},{validator:this.checkConfirm}]},y={rules:[{required:!0,message:"请输入确认密码!",min:1,max:32},{validator:this.checkPassword}]},I={rules:[{required:!0,message:"请选择认证类型!"}]},C={rules:[{required:!0,message:"请输入订阅时间!"}]};return void 0!==this.props.appCardValue&&void 0!==this.props.serRowIndex&&(l=!0),"无认证"!==t&&(n=L.default.createElement(D,(0,c.default)({label:"认证用户名"},p,{hasFeedback:!0}),f("userName",v)(L.default.createElement(d.default,{maxLength:"32",placeholder:"1-32字符"}))),o=L.default.createElement(D,(0,c.default)({label:"认证密码"},p,{hasFeedback:!0}),f("password",S)(L.default.createElement(d.default,{maxLength:"32",type:"password",placeholder:"1-32字符"}))),r=L.default.createElement(D,(0,c.default)({label:"确认密码"},p,{hasFeedback:!0}),f("confirm",y)(L.default.createElement(d.default,{maxLength:"32",type:"password",placeholder:"1-32字符",onBlur:this.handleConfirmBlur})))),"健康"===e&&(a=L.default.createElement(D,(0,c.default)({label:"订阅时间"},p,{hasFeedback:!0}),f("publishTime",C)(L.default.createElement(i.default,{format:"HH:mm"})))),L.default.createElement(A.default,null,L.default.createElement(D,(0,c.default)({},p,{label:"消息类型"}),f("subScribeType",g)(L.default.createElement(N,{onChange:this.onChange},L.default.createElement(E.default,{value:"进校",disabled:l},"进校"),L.default.createElement(E.default,{value:"出校",disabled:l},"出校"),L.default.createElement(E.default,{value:"健康",disabled:l},"健康")))),L.default.createElement(D,(0,c.default)({label:"推送至URL"},p,{hasFeedback:!0}),f("messageApi",m)(L.default.createElement(d.default,{maxLength:"256",placeholder:"url地址"}))),L.default.createElement(D,(0,c.default)({label:"消息方法"},p,{hasFeedback:!0}),f("method",h)(L.default.createElement(N,{onChange:this.onMethodChange},L.default.createElement(E.default,{value:"post"},"POST"),L.default.createElement(E.default,{value:"get"},"GET"),L.default.createElement(E.default,{value:"put"},"PUT")))),L.default.createElement(D,(0,c.default)({label:"认证类型"},p,{hasFeedback:!0}),f("Authentication",I)(L.default.createElement(N,{onChange:this.onAuthChange},L.default.createElement(E.default,{value:"无认证"},"无认证"),L.default.createElement(E.default,{value:"摘要认证"},"摘要认证"),L.default.createElement(E.default,{value:"基本认证"},"基本认证")))),n,o,r,a)}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,o=void 0;return o=void 0!==this.props.appCardValue&&void 0!==this.props.serRowIndex?"修改消息订阅":"添加消息订阅",L.default.createElement(r.default,{visible:t,title:o,onCancel:a,onOk:n},this.subScribeTypeForm(this.state.radioValue,this.state.radioAuthValue))}}]),t}(L.default.Component),k=A.default.create()(x);t.default=k},835:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(47),a(46)),r=n(o),l=(a(45),a(44)),i=n(l),s=(a(37),a(35)),d=n(s),u=(a(54),a(53)),c=n(u),f=a(4),p=n(f),h=(a(73),a(72)),m=n(h),g=(a(33),a(18)),v=n(g),S=(a(23),a(22)),y=n(S),I=a(13),C=n(I),b=a(1),E=n(b),w=a(9),A=n(w),M=a(3),L=n(M),_=a(2),T=n(_),D=(a(50),a(49)),N=n(D),x=(a(699),a(698)),k=n(x),O=a(0),R=n(O),F=a(7),P=n(F);a(1619);var G=a(834),H=n(G),V=k.default.Panel,B=N.default.confirm,W=function(e){function t(e){(0,E.default)(this,t);var a=(0,L.default)(this,(t.__proto__||(0,C.default)(t)).call(this,e));return a.showConfirm=function(e){e.stopPropagation();var t=a.props,n=t.appCardValue,o=t.appCardFun,r=t.scenarioId,l=t.schoolId;B({title:"是否删除此应用?",onOk:function(){o.delAppCard(n.appName,r,l).then(function(e){y.default.success("删除应用成功")}).catch(function(e){y.default.error("删除应用失败: "+e.message)})},onCancel:function(){}})},a.addServerClick=function(e){e.stopPropagation();var t=a.props,n=t.appCardValue,o=t.appCardFun;a.setState({serAddCli:1}),o.showAddServerModal(n)},a.serverAddModalCancel=function(){var e=a.props,t=e.appCardValue,n=e.appCardFun;a.serverform.resetFields(),n.hideAddServerModal(t)},a.addServerMessage=function(){var e=a.props,t=e.appCardValue,n=e.appCardFun,o=e.scenarioId,r=e.schoolId,l=a.serverform;l.validateFields(function(e,a){if(!e){if(void 0!==a.publishTime){var i=new Date(a.publishTime);i.setSeconds(0),a.publishTime=i.getTime()}l.resetFields(),n.hideAddServerModal(t),n.addServerRow(o,r,t.appName,a).then(function(){y.default.success("添加消息订阅成功")}).catch(function(e){e.toString().indexOf("already exist")>=0?(y.default.error("添加消息订阅失败: 消息订阅已存在"),n.getSubAppList(o,r).then(function(){n.getSubListByAppName(o,r,t.appName).catch()}).catch()):(y.default.error("添加消息订阅失败: "+e.message),n.getSubAppList(o,r).then(function(){n.getSubListByAppName(o,r,t.appName).catch()}).catch())})}})},a.serverDelClick=function(e,t){var n=a.props,o=n.appCardValue,r=n.appCardFun,l=n.scenarioId,i=n.schoolId;a.setState({serTabRowIndex:0}),r.delSubDetail(l,i,o.appName,e.subScribeType).then(function(){y.default.success("删除消息订阅成功")}).catch(function(e){y.default.error("删除消息订阅失败: "+e.message),r.getSubAppList(l,i).then(function(){r.getSubListByAppName(l,i,o.appName).catch()}).catch()})},a.serverModifyClick=function(e,t){var n=a.props,o=n.appCardValue,r=n.appCardFun;a.setState({serTabRowIndex:t,serEdtCli:1}),r.showModifySerModal(o,t)},a.serverModifyModalCancel=function(){var e=a.props,t=e.appCardValue;e.appCardFun.hideModifySerModal(t,a.state.serTabRowIndex)},a.modifyServerMessage=function(){var e,t=a.props,n=t.appCardValue,o=t.appCardFun,r=t.scenarioId,l=t.schoolId,i=a.serverModifyform;i.validateFields(function(t,s){if(!t){if(void 0!==s.publishTime){var d=new Date(s.publishTime);d.setSeconds(0),s.publishTime=d.getTime()}i.resetFields(),o.hideModifySerModal(n,a.state.serTabRowIndex),e=n.subscribeTable[a.state.serTabRowIndex],s.messageApi==e.messageApi&&s.method==e.method&&s.Authentication==e.Authentication&&s.userName==e.userName&&s.password==e.password&&s.publishTime==e.publishTime||o.modifySubDetail(r,l,n.appName,s).then(function(e){y.default.success("修改消息订阅成功")}).catch(function(e){y.default.error("修改消息订阅失败: "+e.message),o.getSubAppList(r,l).then(function(){o.getSubListByAppName(r,l,n.appName).catch()}).catch()})}})},a.subscribeTableNotNull=function(){var e=a.props,t=e.appCardValue;e.appCardFun;if(0!==t.subscribeTable.length)return R.default.createElement(H.default,{ref:function(e){a.serverModifyform=e},visible:t.subscribeTable[a.state.serTabRowIndex].subscribeVis,onCancel:a.serverModifyModalCancel,onCreate:a.modifyServerMessage,appCardValue:t,serRowIndex:a.state.serTabRowIndex,serEdtCli:a.state.serEdtCli})},a.state={serTabRowIndex:0,serEdtCli:0,serAddCli:0},a.columns=[{title:"消息类型",dataIndex:"subScribeType",key:"subScribeType",width:100},{title:"消息URL",dataIndex:"messageApi",key:"messageApi",width:500},{title:"认证类型",dataIndex:"Authentication",key:"Authentication",width:100},{title:"操作",dataIndex:"operation",key:"operation",width:100,render:function(e,t,n){return R.default.createElement("div",null,R.default.createElement("a",{onClick:function(){return a.serverModifyClick(t,n)},title:"修改",style:{paddingLeft:"3px",paddingRight:"3px",fontSize:14,color:"#1ab394"}},R.default.createElement(v.default,{type:"edit"})),R.default.createElement(m.default,{title:"是否删除此订阅消息?",onConfirm:function(){return a.serverDelClick(t,n)},okText:"是",cancelText:"否"},R.default.createElement("a",{title:"删除",style:{paddingLeft:"3px",paddingRight:"3px",fontSize:14,color:"#1ab394"}},R.default.createElement(v.default,{type:"delete"}))))}}],a}return(0,T.default)(t,e),(0,A.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.appCardValue;if(1===this.state.serEdtCli&&this.setState({serEdtCli:2}),1===this.state.serAddCli&&this.setState({serAddCli:2}),0!==e.subscribeTable.length&&!0===e.subscribeTable[this.state.serTabRowIndex].subscribeVis){var t=(0,p.default)({},e.subscribeTable[this.state.serTabRowIndex]),a=this.serverModifyform;void 0!==t.subscribeVis&&delete t.subscribeVis,void 0!==t.publishTime&&(t.publishTime=(0,P.default)(new Date(t.publishTime))),a.setFieldsValue(t)}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.appCardValue,a=e.appCardFun,n=e.scenarioId,o=e.schoolId;a.getSubListByAppName(n,o,t.appName).catch()}},{key:"render",value:function(){var e=this,t=this.props.appCardValue,a=R.default.createElement("div",{style:{height:"60px"}},R.default.createElement(i.default,{align:"middle"},R.default.createElement(c.default,{span:17},R.default.createElement("p",{style:{color:"#fff",fontSize:"12px",fontWeight:500}},t.appName)),R.default.createElement(c.default,{span:5},R.default.createElement(d.default,{style:{color:"#fff"},icon:"plus",onClick:this.addServerClick,ghost:!0},"添加消息订阅")),R.default.createElement(c.default,{span:2},R.default.createElement("a",{onClick:this.showConfirm,title:"删除应用",style:{fontSize:"18px",color:"#fff"}},R.default.createElement(v.default,{type:"delete"})))));return R.default.createElement("div",null,R.default.createElement(H.default,{ref:function(t){e.serverform=t},visible:t.subscribeAddModVis,onCancel:this.serverAddModalCancel,onCreate:this.addServerMessage,serAddCli:this.state.serAddCli}),this.subscribeTableNotNull(),R.default.createElement("div",{className:"appList-collapse"},R.default.createElement(k.default,{style:{marginTop:"15px",marginBottom:"15px"}},R.default.createElement(V,{key:"1",style:{backgroundColor:"#1ab394"},header:a},R.default.createElement(r.default,{columns:this.columns,dataSource:t.subscribeTable,rowKey:"subScribeType",pagination:{total:t.subscribeTable.length}})))))}}]),t}(R.default.Component);t.default=W},836:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(50),a(49)),r=n(o),l=a(4),i=n(l),s=(a(41),a(48)),d=n(s),u=(a(65),a(64)),c=n(u),f=a(0),p=n(f),h=a(99),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),g=c.default.Item,v=c.default.create()(function(e){var t=e.visible,a=e.onCancel,n=e.onCreate,o=e.form,l=o.getFieldDecorator,s={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},u=function(e,t,a){m.getStringByteLength(t)>32?a("应用名不能超过16个汉字或者32个字符"):a()};return p.default.createElement(r.default,{visible:t,title:"添加接入应用信息",okText:"确定",onCancel:a,onOk:n},p.default.createElement(c.default,null,p.default.createElement(g,(0,i.default)({label:"应用名称"},s,{hasFeedback:!0}),l("appName",{rules:[{required:!0,message:"请输入应用名称!",min:1,max:32},{message:"仅支持中英文，数字和下划线, 最长不超过32个字符",pattern:/^[a-zA-Z0-9\u4e00-\u9fa5\_]+$/},{validator:u}]})(p.default.createElement(d.default,{maxLength:"32",placeholder:"1-32字符"})))))});t.default=v},837:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(45),a(44)),r=n(o),l=(a(37),a(35)),i=n(l),s=(a(23),a(22)),d=n(s),u=a(13),c=n(u),f=a(1),p=n(f),h=a(9),m=n(h),g=a(3),v=n(g),S=a(2),y=n(S),I=a(0),C=n(I),b=a(17),E=a(21),w=a(836),A=n(w),M=a(399),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),_=a(835),T=n(_),D=function(e){function t(){var e,a,n,o;(0,p.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,v.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(l))),n.showAddAPPModal=function(){n.props.NewApplicationActions.showCreateAPPModal()},n.handleCreateCard=function(){var e=n.form,t=n.props.NewApplicationState.appCard,a=!1;e.validateFields(function(o,r){if(!o){if(e.resetFields(),n.props.NewApplicationActions.hideCreateAPPModal(),t.map(function(e){e.appName===r.appName&&(a=!0)}),!0===a)return void d.default.error("应用名已存在");n.props.NewApplicationActions.addAppCard(r,n.props.scenarioId,n.props.currentSchoolId).then(function(e){d.default.success("添加应用成功")}).catch(function(e){"app already exist."===e.message?(d.default.error("应用已存在，添加失败"),n.props.NewApplicationActions.getSubAppList(n.props.scenarioId,n.props.currentSchoolId).catch()):(d.default.error("添加应用失败: "+e.message),n.props.NewApplicationActions.getSubAppList(n.props.scenarioId,n.props.currentSchoolId).catch())})}})},o=a,(0,v.default)(n,o)}return(0,y.default)(t,e),(0,m.default)(t,[{key:"componentWillUnmount",value:function(){this.props.NewApplicationActions.unInitApp()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.NewApplicationActions,a=(e.NewApplicationState,e.scenarioId),n=e.currentSchoolId;""!==a&&""!==n&&t.getSubAppList(a,n).catch()}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&e.NewApplicationActions.getSubAppList(e.scenarioId,e.currentSchoolId).catch()}},{key:"render",value:function(){var e=this,t=this.props,a=t.NewApplicationActions,n=t.NewApplicationState,o=t.scenarioId,l=t.currentSchoolId;return C.default.createElement("div",null,C.default.createElement(r.default,{align:"middle",style:{marginBottom:"15px"}},C.default.createElement(i.default,{style:{width:"100px",height:"32px",marginRight:"5px",borderRadius:"2px",float:"right"},type:"primary",icon:"plus",onClick:this.showAddAPPModal},"添加应用")),C.default.createElement(A.default,{ref:function(t){e.form=t},visible:n.appModalVisible,onCancel:a.hideCreateAPPModal,onCreate:this.handleCreateCard}),C.default.createElement("div",{id:"add-application"},n.appCard.map(function(e,t){return C.default.createElement(T.default,{scenarioId:o,schoolId:l,appCardValue:e,appCardFun:a,key:t})})))}}]),t}(C.default.Component);t.default=(0,E.connect)(function(e){return{NewApplicationState:e.settings.newApplication,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{NewApplicationActions:(0,b.bindActionCreators)(L,e)}})(D)},838:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Classroom=t.SchoolGate=t.NewApplication=t.CrowdedArea=t.ModuleMap=t.MapsTable=void 0;var n=a(821),o=a(833),r=a(837),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.MapsTable=o.MapsTable,t.ModuleMap=o.ModuleMap,t.CrowdedArea=n.CrowdedArea,t.NewApplication=l.default,t.SchoolGate=n.SchoolGate,t.Classroom=n.Classroom},839:function(e,t,a){"use strict";e.exports=a(840)},840:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(21),v=a(845),S=n(v),y=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.store;return m.default.createElement(g.Provider,{store:e},m.default.createElement(S.default,{dispatch:e.dispatch}))}}]),t}(h.Component);t.default=y,y.propTypes={store:m.default.PropTypes.object.isRequired}},841:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),r=a(132),l=n(r),i=a(176),s=n(i),d=a(262),u=n(d),c=a(150),f=n(c),p=(0,o.combineReducers)({module:l.default,camera:s.default,sensor:u.default,scenario:f.default});t.default=p},842:function(e,t,a){"use strict";e.exports=a(843)},843:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,r.createStore)(c.default,e,(0,r.applyMiddleware)(i.default,(0,d.default)()))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(17),l=a(1566),i=n(l),s=a(1564),d=n(s),u=a(844),c=n(u)},844:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),r=n(o),l=a(17),i=a(841),s=n(i),d=a(853),u=n(d),c=a(403),f=n(c),p=a(400),h=n(p),m=a(848),g=n(m),v=a(401),S=n(v),y=(0,l.combineReducers)({dashboard:g.default,schoolManage:u.default,common:s.default,settings:f.default,healthMonitor:h.default,personalHealth:S.default}),I=function(e,t){return"SCHOOL_LOGOUT"===t.type&&(e={common:(0,r.default)({},e.common,{module:void 0,camera:void 0,sensor:void 0}),dashboard:void 0,schoolManage:void 0,settings:void 0,healthMonitor:void 0,personalHealth:void 0}),y(e,t)};t.default=I},845:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),r=n(o),l=a(40),i=a(788),s=n(i),d=a(791),u=n(d),c=a(846),f=n(c),p=a(847),h=n(p),m=a(849),g=n(m),v=a(850),S=n(v),y=a(852),I=n(y),C=a(854),b=n(C),E=a(851),w=n(E),A=a(859),M=n(A),L=a(856),_=n(L),T=a(855),D=n(T),N=a(858),x=n(N),k=a(773),O=n(k),R=a(776),F=n(R),P=a(771),G=n(P),H=a(779),V=n(H),B=a(860),W=n(B),z=a(857),U=n(z),j=a(861),K=n(j),q=a(862),Y=n(q),J=function(e){return e.params.scenarioID&&(localStorage.setItem("scenarioId",e.params.scenarioID),localStorage.setItem("schoolId",""),l.browserHistory.replace("/iot/web/education/allschools")),r.default.createElement("div",null)},$=function(e){var t=function(){return{type:"SCHOOL_LOGOUT"}},a=function(a){e.dispatch(t())};return r.default.createElement(l.Router,{history:l.browserHistory},r.default.createElement(l.Route,{path:"/iot/web/education/nasid:scenarioID/devsn:devSN",component:J}),r.default.createElement(l.Route,{path:"/iot/web/education",component:s.default},r.default.createElement(l.IndexRedirect,{to:"allschools"}),r.default.createElement(l.Route,{path:"allschools",component:f.default})),r.default.createElement(l.Route,{path:"/iot/web/education/school",component:u.default,onLeave:a},r.default.createElement(l.IndexRedirect,{to:"dashboard"}),r.default.createElement(l.Route,{path:"dashboard",component:h.default}),r.default.createElement(l.Route,{path:"dashboard/attendance-detail",component:O.default}),r.default.createElement(l.Route,{path:"dashboard/heartAlert-detail",component:F.default}),r.default.createElement(l.Route,{path:"dashboard/alert-table",component:G.default}),r.default.createElement(l.Route,{path:"dashboard/inout-school",component:V.default}),r.default.createElement(l.Route,{path:"health-overview",component:g.default}),r.default.createElement(l.Route,{path:"health-overview/personal-health-detail/:studentID",component:S.default}),r.default.createElement(l.Route,{path:"class-manage",component:I.default}),r.default.createElement(l.Route,{path:"student-manage",component:b.default}),r.default.createElement(l.Route,{path:"classLiveManage",component:w.default}),r.default.createElement(l.Route,{path:"map-manage",component:M.default}),r.default.createElement(l.Route,{path:"area-setting",component:_.default}),r.default.createElement(l.Route,{path:"app-manage",component:D.default}),r.default.createElement(l.Route,{path:"device-manage",component:x.default}),r.default.createElement(l.Route,{path:"device-manage/module-list",component:W.default}),r.default.createElement(l.Route,{path:"device-manage/camera-list",component:U.default}),r.default.createElement(l.Route,{path:"device-manage/sensor-list",component:K.default}),r.default.createElement(l.Route,{path:"device-manage/gateway-list",component:Y.default})))};t.default=$},846:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(58),v=n(g),S=a(98),y=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return m.default.createElement(v.default,null,m.default.createElement(S.SchoolList,null))}}]),t}(m.default.Component);t.default=y},847:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(45),a(44)),l=o(r),i=(a(54),a(53)),s=o(i),d=(a(23),a(22)),u=o(d),c=a(13),f=o(c),p=a(1),h=o(p),m=a(9),g=o(m),v=a(3),S=o(v),y=a(2),I=o(y),C=a(0),b=o(C),E=a(17),w=a(21),A=a(58),M=o(A),L=a(98),_=a(373),T=n(_),D=a(376),N=n(D),x={InTheSchool:"0",Schoolleavers:"0",Studentleave:"0",NeverComeToSchool:"0",slowCount:"0",fastCount:"0"},k=function(e){function t(e){(0,h.default)(this,t);var a=(0,S.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.refreshAttendance=function(e,t){a.props.attendanceStatisticsActions.mamualFetchAttendanceStatisticsData(e,t).then(function(e){}).catch(function(e){u.default.error("获取出勤统计数据失败: "+e.message)})},a}return(0,I.default)(t,e),(0,g.default)(t,[{key:"componentWillReceiveProps",value:function(e){x.InTheSchool=e.attendanceStatisticsState.InTheSchool,x.Schoolleavers=e.attendanceStatisticsState.Schoolleavers,x.Studentleave=e.attendanceStatisticsState.Studentleave,x.NeverComeToSchool=e.attendanceStatisticsState.NeverComeToSchool,x.isPending=e.attendanceStatisticsState.isPending,x.slowCount=e.heartAlertState.slowCount,x.fastCount=e.heartAlertState.fastCount,x.IsPending=e.heartAlertState.IsPending}},{key:"componentDidMount",value:function(){var e=this;this.interval=0,this.props.attendanceStatisticsActions.mamualFetchAttendanceStatisticsData(this.props.scenarioId,this.props.currentSchoolId).catch(function(e){u.default.error("获取出勤统计数据失败: "+e.message)}),this.interval=setInterval(function(){e.props.attendanceStatisticsActions.fetchAttendanceStatisticsData(e.props.scenarioId,e.props.currentSchoolId).catch(function(e){})},1e4),this.props.heartAlertActions.fetchHeartAlert(this.props.scenarioId,this.props.currentSchoolId).catch(function(e){})}},{key:"componentWillUnmount",value:function(){0!==this.interval&&(clearInterval(this.interval),this.interval=0)}},{key:"render",value:function(){return b.default.createElement(M.default,null,b.default.createElement(l.default,{type:"flex",justify:"space-between",gutter:18},b.default.createElement(s.default,{xs:{span:24},sm:{span:24},lg:{span:12}},b.default.createElement(L.Attendance,{InTheSchool:x.InTheSchool,Schoolleavers:x.Schoolleavers,Studentleave:x.Studentleave,NeverComeToSchool:x.NeverComeToSchool,isPending:this.props.attendanceStatisticsState.isPending,refresh:this.refreshAttendance,ConfigOption:{scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}})),b.default.createElement(s.default,{xs:{span:24},sm:{span:24},lg:{span:12}},b.default.createElement(L.HistorySchoolRate,null))),b.default.createElement(l.default,{type:"flex",justify:"space-between",gutter:18,style:{marginTop:"16px"}},b.default.createElement(s.default,{xs:{span:24},sm:{span:12},lg:{span:7}},b.default.createElement(L.HeartRate,{heartRateFast:x.fastCount,heartRateSlow:x.slowCount,isPending:this.props.heartAlertState.IsPending,refresh:this.props.heartAlertActions,ConfigOption:{scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}})),b.default.createElement(s.default,{xs:{span:24},sm:{span:12},lg:{span:7}},b.default.createElement(L.Alert,null)),b.default.createElement(s.default,{xs:{span:24},sm:{span:24},lg:{span:10}},b.default.createElement(L.InoutSchool,null))),b.default.createElement(l.default,{type:"flex",justify:"space-between",style:{marginTop:"16px"}},b.default.createElement(s.default,{xs:{span:24},sm:{span:24},lg:{span:24}},b.default.createElement(L.FloorInfo,{scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}))))}}]),t}(b.default.Component);t.default=(0,w.connect)(function(e){return{attendanceStatisticsState:e.dashboard.attendanceStatistics,heartAlertState:e.dashboard.heartAlert,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{attendanceStatisticsActions:(0,E.bindActionCreators)(T,e),heartAlertActions:(0,E.bindActionCreators)(N,e)}})(k)},848:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),r=a(259),l=n(r),i=a(371),s=n(i),d=a(373),u=n(d),c=a(376),f=n(c),p=a(377),h=n(p),m=a(372),g=n(m),v=a(375),S=n(v),y=a(374),I=n(y),C=a(379),b=n(C),E=a(378),w=n(E);t.default=(0,o.combineReducers)({attendanceStatistics:u.default,attendanceDetail:g.default,heartAlert:f.default,heartAlertDetail:S.default,historySchoolRate:h.default,alertCount:l.default,alertStuDetail:s.default,floorInfo:I.default,inoutSchool:b.default,inoutDetail:w.default})},849:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(45),a(44)),r=n(o),l=(a(117),a(130)),i=n(l),s=(a(33),a(18)),d=n(s),u=(a(54),a(53)),c=n(u),f=(a(39),a(38)),p=n(f),h=(a(29),a(28)),m=n(h),g=(a(37),a(35)),v=n(g),S=(a(23),a(22)),y=n(S),I=(a(47),a(46)),C=n(I),b=a(13),E=n(b),w=a(1),A=n(w),M=a(9),L=n(M),_=a(3),T=n(_),D=a(2),N=n(D),x=(a(91),a(86)),k=n(x),O=a(0),R=n(O),F=a(17),P=a(21),G=a(58),H=n(G),V=a(98),B=a(131),W=a(400),z=k.default.Option,U=function(e){function t(){var e,a,n,o;(0,A.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,T.default)(this,(e=t.__proto__||(0,E.default)(t)).call.apply(e,[this].concat(l))),n.statureContent=function(){var e=[{title:"年龄(岁)",dataIndex:"age",key:"age",width:80},{title:"身高偏低(cm)",dataIndex:"heightLow",key:"heightLow",width:110},{title:"身高正常(cm)",dataIndex:"heightNormal",key:"heightNormal",width:110},{title:"身高偏高(cm)",dataIndex:"heightHigh",key:"heightHigh",width:110}],t=[{key:"1",age:1,heightLow:"<68.6",heightNormal:"68.6-76.5",heightHigh:"76.5-85"},{key:"2",age:2,heightLow:"<78.3",heightNormal:"78.3-88.5",heightHigh:"88.5-99.5"},{key:"3",age:3,heightLow:"<89.7",heightNormal:"89.7-96.8",heightHigh:"96.8-104.1"},{key:"4",age:4,heightLow:"<96.7",heightNormal:"96.7-104.1",heightHigh:"104.1-111.8"},{key:"5",age:5,heightLow:"<103.3",heightNormal:"103.3-111.3",heightHigh:"111.3-119.6"},{key:"6",age:6,heightLow:"<109.1",heightNormal:"109.1-117.7",heightHigh:"117.7-126.6"},{key:"7",age:7,heightLow:"<114.6",heightNormal:"114.6-124.0",heightHigh:"124.0-133.7"},{key:"8",age:8,heightLow:"<119.9",heightNormal:"119.9-130.0",heightHigh:"130.0-140.4"},{key:"9",age:9,heightLow:"<124.6",heightNormal:"124.6-135.4",heightHigh:"135.4-146.5"},{key:"10",age:10,heightLow:"<128.7",heightNormal:"128.7-140.2",heightHigh:"140.2-152.0"},{key:"11",age:11,heightLow:"<132.9",heightNormal:"132.9-145.3",heightHigh:"145.3-158.1"},{key:"12",age:12,heightLow:"<138.1",heightNormal:"138.1-151.9",heightHigh:"151.9-166.0"},{key:"13",age:13,heightLow:"<145.0",heightNormal:"145.0-159.5",heightHigh:"159.5-174.2"},{key:"14",age:14,heightLow:"<152.3",heightNormal:"152.3-165.9",heightHigh:"165.9-179.4"},{key:"15",age:15,heightLow:"<157.5",heightNormal:"157.5-169.8",heightHigh:"169.8-182.0"},{key:"16",age:16,heightLow:"<159.9",heightNormal:"159.9-171.6",heightHigh:"171.6-183.2"}],a=[{key:"1",age:1,heightLow:"<67.2",heightNormal:"67.2-75",heightHigh:"75-83.4"},{key:"2",age:2,heightLow:"<77.3",heightNormal:"77.3-87.2",heightHigh:"87.2-98"},{key:"3",age:3,heightLow:"<88.6",heightNormal:"88.6-95.6",heightHigh:"95.6-102.9"},{key:"4",age:4,heightLow:"<95.8",heightNormal:"95.8-103.1",heightHigh:"103.1-110.6"},{key:"5",age:5,heightLow:"<102.3",heightNormal:"102.3-110.2",heightHigh:"110.2-118.4"},{key:"6",age:6,heightLow:"<108.1",heightNormal:"108.1-116.6",heightHigh:"116.6-125.4"},{key:"7",age:7,heightLow:"<113.3",heightNormal:"113.3-122.5",heightHigh:"122.5-132.1"},{key:"8",age:8,heightLow:"<118.5",heightNormal:"118.5-128.5",heightHigh:"128.5-138.7"},{key:"9",age:9,heightLow:"<123.3",heightNormal:"123.3-134.1",heightHigh:"134.1-145.1"},{key:"10",age:10,heightLow:"<128.3",heightNormal:"128.3-140.1",heightHigh:"140.1-152.0"},{key:"11",age:11,heightLow:"<134.2",heightNormal:"134.2-146.6",heightHigh:"146.6-159.2"},{key:"12",age:12,heightLow:"<140.2",heightNormal:"140.2-152.4",heightHigh:"152.4-164.5"},{key:"13",age:13,heightLow:"<145.0",heightNormal:"145.0-156.3",heightHigh:"156.3-167.6"},{key:"14",age:14,heightLow:"<147.9",heightNormal:"147.9-158.6",heightHigh:"158.6-169.3"},{key:"15",age:15,heightLow:"<149.5",heightNormal:"149.5-159.8",heightHigh:"159.8-170.1"},{key:"16",age:16,heightLow:"<149.8",heightNormal:"149.8-160.1",heightHigh:"160.1-170.3"}];return R.default.createElement("div",null,R.default.createElement("p",{style:{fontSize:15,color:"#343e4e",marginBottom:10}},"体质指数(BMI) = 体重(kg) / 身高(m)"),R.default.createElement("p",{style:{fontSize:15,color:"#343e4e",marginBottom:3}},"男性身高标准表："),R.default.createElement(C.default,{dataSource:t,columns:e,pagination:!1,size:"small",scroll:{y:100}}),R.default.createElement("p",{style:{fontSize:15,color:"#343e4e",marginBottom:3,marginTop:3}},"女性身高标准表："),R.default.createElement(C.default,{dataSource:a,columns:e,pagination:!1,size:"small",scroll:{y:100}}))},o=a,(0,T.default)(n,o)}return(0,N.default)(t,e),(0,L.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.fetchData(this.props.scenarioId,this.props.currentSchoolId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.fetchData(e.scenarioId,e.currentSchoolId)}},{key:"componentWillUnmount",value:function(){this.props.healthMonitorActions.setGradeOptionAndClassOption(),this.props.healthMonitorActions.setSelectGrade(),this.props.healthMonitorActions.setSelectClassId(),this.props.healthMonitorActions.setGradeConfig()}},{key:"fetchData",value:function(e,t){var a=this;this.props.classTableActions.fetchClassTableData(e,t).then(function(){var e=[],t={};a.props.classTableData.map(function(a){var n=!0,o=a.grade;e.some(function(e){return e===o&&(n=!1),e===o}),n&&e.push(o),e.length&&(t[""+o]=void 0===t[""+o]?[]:t[""+o],t[""+o].push({baseGrade:a.baseGrade,years:a.years,classId:a.classId}))}),a.props.healthMonitorActions.setGradeOptionAndClassOption(e,t)}).catch(function(e){y.default.error("获班级数据失败: "+e.message)})}},{key:"render",value:function(){var e=this.props,t=e.gradeConfig,a=(e.classTableData,e.healthMonitorActions),n=a.setSelectGrade,o=a.setGradeConfig,l=a.setSelectClassId,s=t.gradeOption,u=t.classOption,f=t.selectGrade,h=t.selectClassId,g=t.config,S=[];return"all"!==f&&(S.push(R.default.createElement(z,{key:"all",value:""},"全部")),u[f].map(function(e){S.push(R.default.createElement(z,{key:e.classId+"班",value:e.classId},e.classId))})),R.default.createElement(H.default,null,R.default.createElement("div",{id:"container",style:{margin:"20px 0px 0px 20px"}},R.default.createElement(m.default,{spinning:this.props.loading,style:{width:410}},R.default.createElement("span",{style:{fontSize:14}},"年级/班级切换："),R.default.createElement(k.default,{defaultValue:"all",size:"large",style:{width:90,margin:"0px 5px"},getPopupContainer:function(){return document.getElementById("container")},onChange:function(e){n(e),l("")}},R.default.createElement(z,{value:"all"},"全校"),s.map(function(e){return R.default.createElement(z,{key:""+e,value:""+e},e)})),R.default.createElement(k.default,{value:h,size:"large",getPopupContainer:function(){return document.getElementById("container")},style:{width:90,margin:"0px 10px 0px 5px"},onChange:function(e){return l(e)}},S),R.default.createElement(v.default,{type:"primary",size:"large",style:{height:30,width:90},onClick:function(){if("all"===f)o();else{var e={};""===h?e={baseGrade:u[f][0].baseGrade,years:u[f][0].years}:u[f].some(function(t){return h===t.classId&&(e=t),h===t.classId}),o(e)}}},"确定"))),R.default.createElement(r.default,{type:"flex",justify:"space-between",gutter:18},R.default.createElement(c.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},R.default.createElement(p.default,{title:"概览",style:{minHeight:234,marginTop:30},bodyStyle:{padding:0}},R.default.createElement(V.OverViewPie,{config:g}))),R.default.createElement(c.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},R.default.createElement(p.default,{title:"身高/BMI 指数",extra:R.default.createElement(i.default,{content:this.statureContent(),placement:"leftTop",title:"详情"},R.default.createElement(d.default,{style:{fontSize:16,fontWeight:"bolder"},type:"info-circle-o"})),style:{height:234,marginTop:30},bodyStyle:{padding:0}},R.default.createElement(V.HWTable,null)))),R.default.createElement(r.default,{type:"flex",justify:"space-between",gutter:18},R.default.createElement(c.default,{xs:{span:24},sm:{span:24},lg:{span:10},style:{marginTop:18}},R.default.createElement(V.SetRanking,{config:g})),R.default.createElement(c.default,{xs:{span:24},sm:{span:24},lg:{span:14},style:{marginTop:18}},R.default.createElement(V.StepCountChart,{config:g}))),R.default.createElement(p.default,{title:"健康详情",className:"health-detail",style:{marginTop:18,minHeight:624}},R.default.createElement(V.HealthDetail,{config:g})))}}]),t}(R.default.Component);t.default=(0,P.connect)(function(e){return{gradeConfig:e.healthMonitor.gradeConfig,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,classTableData:e.schoolManage.classTable.classTableData,loading:e.schoolManage.classTable.loading}},function(e){return{classTableActions:(0,F.bindActionCreators)({fetchClassTableData:B.fetchClassTableData},e),healthMonitorActions:(0,F.bindActionCreators)({setSelectGrade:W.setSelectGrade,setGradeConfig:W.setGradeConfig,setGradeOptionAndClassOption:W.setGradeOptionAndClassOption,setSelectClassId:W.setSelectClassId},e)}})(U)},850:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(45),a(44)),r=n(o),l=(a(54),a(53)),i=n(l),s=(a(39),a(38)),d=n(s),u=(a(37),a(35)),c=n(u),f=a(13),p=n(f),h=a(1),m=n(h),g=a(9),v=n(g),S=a(3),y=n(S),I=a(2),C=n(I),b=a(0),E=n(b),w=a(17),A=a(21),M=a(40),L=a(58),_=n(L),T=a(98),D=a(401),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(D),x=function(e){function t(){return(0,m.default)(this,t),(0,y.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,C.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){""!==this.props.scenarioId&&""!==this.props.currentSchoolId&&this.props.personalHealthActions.fetchOneStudentHealthDetail(this.props.scenarioId,this.props.currentSchoolId,this.props.location.state.studentId)}},{key:"componentWillReceiveProps",value:function(e){(this.props.scenarioId!==e.scenarioId||this.props.currentSchoolId!==e.currentSchoolId)&&e.scenarioId&&e.currentSchoolId&&this.props.personalHealthActions.fetchOneStudentHealthDetail(e.scenarioId,e.currentSchoolId,this.props.location.state.studentId)}},{key:"render",value:function(){var e=this.props.location.state.studentId,t=this.props.healthDetail;return E.default.createElement(_.default,null,E.default.createElement(c.default,{type:"primary",icon:"arrow-left",style:{marginBottom:15},onClick:function(){return M.browserHistory.push("/iot/web/education/school/health-overview")}},"返回健康详情"),E.default.createElement(d.default,{title:"运动记录",style:{minHeight:272}},E.default.createElement(T.MotionData,{student:t.student,loading:t.loading})),E.default.createElement(r.default,{type:"flex",justify:"space-between",gutter:18},E.default.createElement(i.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},E.default.createElement(d.default,{title:"基础数据",style:{height:234}},E.default.createElement(T.BaseData,{student:t.student,loading:t.loading}))),E.default.createElement(i.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},E.default.createElement(d.default,{title:"实时心率",style:{minHeight:234}},E.default.createElement(T.RealTimeHeartRate,{student:t.student,loading:t.loading})))),E.default.createElement(r.default,{type:"flex",justify:"space-between",gutter:18},E.default.createElement(i.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},E.default.createElement(T.PersonalHeartRateChart,{studentId:e})),E.default.createElement(i.default,{xs:{span:24},sm:{span:24},lg:{span:12},style:{marginTop:18}},E.default.createElement(T.PersonalStepCountChart,{studentId:e}))))}}]),t}(E.default.Component);t.default=(0,A.connect)(function(e){return{healthDetail:e.personalHealth.personalHealthDetail,scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId}},function(e){return{personalHealthActions:(0,w.bindActionCreators)(N,e)}})(x)},851:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(29),a(28)),l=o(r),i=(a(39),a(38)),s=o(i),d=(a(50),a(49)),u=o(d),c=a(4),f=o(c),p=(a(117),a(130)),h=o(p),m=(a(23),a(22)),g=o(m),v=a(13),S=o(v),y=a(1),I=o(y),C=a(9),b=o(C),E=a(3),w=o(E),A=a(2),M=o(A),L=(a(45),a(44)),_=o(L),T=(a(54),a(53)),D=o(T),N=a(0),x=o(N),k=a(17),O=a(21),R=a(58),F=o(R),P=a(386),G=a(98),H=a(402),V=n(H),B=a(131),W=n(B),z=a(387),U=n(z),j=x.default.createElement("span",null,"计算方法"),K=x.default.createElement("div",{style:{width:"335px"}},x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(D.default,{span:2},x.default.createElement("span",{style:{display:"block",marginTop:"12px",width:"12px",height:"12px",backgroundColor:"#4ec1b2",borderRadius:"50%"}})),x.default.createElement(D.default,{span:22},x.default.createElement("span",{style:{height:"28px",color:"#555",display:"block",lineHeight:"35px"}},"平均课堂举手次数 = 总举手次数 / 班级数")))),x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(D.default,{span:2},x.default.createElement("span",{style:{display:"block",marginTop:"12px",width:"12px",height:"12px",backgroundColor:"#4ec1b2",borderRadius:"50%"}})),x.default.createElement(D.default,{span:22},x.default.createElement("span",{style:{height:"28px",color:"#555",display:"block",lineHeight:"35px"}},"平均课堂参与度 = 总举手人次 / 总人数")))),x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(D.default,{span:2},x.default.createElement("span",{style:{display:"block",marginTop:"12px",width:"12px",height:"12px",backgroundColor:"#4ec1b2",borderRadius:"50%"}})),x.default.createElement(D.default,{span:22},x.default.createElement("span",{style:{height:"28px",color:"#555",display:"block",lineHeight:"35px"}},"平均课堂活跃度 = 总举手次数 / 总人数")))),x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(D.default,{span:2},x.default.createElement("span",{className:"cir",style:{display:"block",marginTop:"12px",width:"12px",height:"12px",backgroundColor:"#4ec1b2",borderRadius:"50%"}})),x.default.createElement(D.default,{span:22},x.default.createElement("span",{className:"boxname",style:{height:"28px",color:"#555",display:"block",lineHeight:"35px"}},"班级课堂参与度 = 班级举手人次 / 班级总人数")))),x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(D.default,{span:2},x.default.createElement("span",{className:"cir",style:{display:"block",marginTop:"12px",width:"12px",height:"12px",backgroundColor:"#4ec1b2",borderRadius:"50%"}})),x.default.createElement(D.default,{span:22},x.default.createElement("span",{className:"boxname",style:{height:"28px",color:"#555",display:"block",lineHeight:"35px"}},"班级课堂活跃度 = 班级举手次数 / 班级总人数"))))),q=function(e){function t(){var e,a,n,o;(0,I.default)(this,t);for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];return a=n=(0,w.default)(this,(e=t.__proto__||(0,S.default)(t)).call.apply(e,[this].concat(l))),n.showModal=function(){n.props.ClassLiveManagementActions.showScreenModal(!0)},n.handleOk=function(){n.screenModalForm;n.props.ClassLiveManagementActions.showScreenModal(),n.props.ClassLiveManagementActions.confimBtnIsClicked(!0)},n.handleCancel=function(){n.props.ClassLiveManagementActions.showScreenModal()},o=a,(0,w.default)(n,o)}return(0,M.default)(t,e),(0,b.default)(t,[{key:"componentWillReceiveProps",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.props.ClassTableActions.fetchGradeConfig(this.props.scenarioId,this.props.currentSchoolId).then(function(){e.props.ClassTableActions.fetchClassTableData(e.props.scenarioId,e.props.currentSchoolId).then(function(t){var a=[],n={};0!=t.value.length&&t.value.map(function(t){var o=!0,r=void 0!==t.grade?t.grade:new Date(t.years).getFullYear()+e.props.gradeConf.length+"届";a.some(function(e){return e===r&&(o=!1),e===r}),o&&a.push(r),a.length&&(n[""+r]=void 0===n[""+r]?[]:n[""+r],n[""+r].push({baseGrade:t.baseGrade,years:t.years,classId:t.classId}))}),e.props.ClassLiveManagementActions.saveTheGrade({gradeOption:a,classOption:n})}).catch(function(e){g.default.error("获班级班级列表失败: "+e)})}).catch(function(e){g.default.error("获年级列表失败: "+e)})}},{key:"componentWillUnmount",value:function(){this.props.ClassLiveManagementActions.showScreenModal()}},{key:"render",value:function(){var e=this,t=this.props.ClassLiveManageState,a=t.showScreenModal;t.showDataTipModal;return x.default.createElement(F.default,null,x.default.createElement(_.default,null,x.default.createElement(D.default,{span:24},x.default.createElement(s.default,{title:"数据汇总",extra:x.default.createElement("div",null,x.default.createElement("a",{style:{margin:"0px 6px",color:"#80878c"},onClick:this.showModal},"筛选 "),"|",x.default.createElement(h.default,{placement:"bottomRight",title:j,content:K,trigger:"click"},x.default.createElement("a",{style:{margin:"0px 6px",color:"#80878c"}}," 数据统计说明")))},x.default.createElement(u.default,{title:"筛选",visible:a,onOk:this.handleOk,onCancel:this.handleCancel,okText:"确定",cancelText:"取消"},x.default.createElement(G.ScreenModal,(0,f.default)({ref:function(t){e.screenModalForm=t},gradeOption:this.props.ClassLiveManageState.gradeOption,classOption:this.props.ClassLiveManageState.classOption},this.props.ScreenModalState,this.props.ScreenModalActions))),x.default.createElement(_.default,null,x.default.createElement(G.AverageStatistics,(0,f.default)({},this.props.AverageStatistics,this.props.AverageStatisticsActions,this.props.ClassLiveManagementActions,{ScreenModalState:this.props.ScreenModalState,isConfimBtnClicked:this.props.ClassLiveManageState.isConfimBtnClicked,scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}))),x.default.createElement(_.default,{gutter:16,style:{marginTop:"16px"}},x.default.createElement(D.default,{xs:{span:24},sm:{span:24},lg:{span:12},span:12},x.default.createElement(l.default,{spinning:this.props.ClassActiveState.isPending},x.default.createElement(s.default,{title:"班级活跃度前五名",style:{textAlign:"center"}},x.default.createElement(G.ClassActive,(0,f.default)({},this.props.ClassActiveState,this.props.ClassActivityRankingActions,this.props.ClassLiveManagementActions,{ScreenModalState:this.props.ScreenModalState,isConfimBtnClicked:this.props.ClassLiveManageState.isConfimBtnClicked,scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}))))),x.default.createElement(D.default,{xs:{span:24},sm:{span:24},lg:{span:12},span:12},x.default.createElement(l.default,{spinning:this.props.StudentActiveState.isPending},x.default.createElement(s.default,{title:"学生活跃度前五名",style:{textAlign:"center"}},x.default.createElement(G.StudentActive,(0,f.default)({},this.props.StudentActiveState,this.props.StudentActivityRankingActions,this.props.ClassLiveManagementActions,{ScreenModalState:this.props.ScreenModalState,isConfimBtnClicked:this.props.ClassLiveManageState.isConfimBtnClicked,scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId}))))))))),x.default.createElement(_.default,{style:{marginTop:"16px"}},x.default.createElement(D.default,{span:24},x.default.createElement(G.ClassroomStatistics,(0,f.default)({},this.props.ClassroomStatisticsState,this.props.ClassroomStatisticsActions,{gradeOption:this.props.ClassLiveManageState.gradeOption,classOption:this.props.ClassLiveManageState.classOption,scenarioId:this.props.scenarioId,currentSchoolId:this.props.currentSchoolId})))))}}]),t}(x.default.Component);t.default=(0,O.connect)(function(e){return{scenarioId:e.common.scenario.scenarioId,currentSchoolId:e.common.scenario.currentSchoolId,AverageStatistics:e.schoolManage.ClassLiveManagement.ClassLive.AverageStatistics,ClassLiveManageState:e.schoolManage.ClassLiveManagement.ClassroomContainer,ScreenModalState:e.schoolManage.ClassLiveManagement.ScreenModal,gradeConf:e.schoolManage.classTable.gradeType.gradeConfig.gradeConf,ClassActiveState:e.schoolManage.ClassLiveManagement.ClassLive.ClassActivityRanking,StudentActiveState:e.schoolManage.ClassLiveManagement.ClassLive.StudentActivityRanking,ClassroomStatisticsState:e.schoolManage.ClassLiveManagement.ClassLive.ClassroomStatistics}},function(e){return{AverageStatisticsActions:(0,k.bindActionCreators)(P.AverageStatisticsActions,e),ClassLiveManagementActions:(0,k.bindActionCreators)(V,e),ClassTableActions:(0,k.bindActionCreators)(W,e),ScreenModalActions:(0,k.bindActionCreators)(U,e),ClassActivityRankingActions:(0,k.bindActionCreators)(P.ClassActivityRankingActions,e),StudentActivityRankingActions:(0,k.bindActionCreators)(P.StudentActivityRankingActions,e),ClassroomStatisticsActions:(0,k.bindActionCreators)(P.ClassroomStatisticsActions,e)}})(q)},852:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),r=n(o),l=a(58),i=n(l),s=a(98),d=function(){return r.default.createElement(i.default,null,r.default.createElement(s.ClassTable,null))};t.default=d},853:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),r=a(131),l=n(r),i=a(388),s=n(i),d=a(402),u=n(d);t.default=(0,o.combineReducers)({classTable:l.default,studentTable:s.default,ClassLiveManagement:u.default})},854:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),r=n(o),l=a(58),i=n(l),s=a(98),d=function(){return r.default.createElement(i.default,null,r.default.createElement(s.StudentTable,null))};t.default=d},855:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),r=n(o),l=a(1),i=n(l),s=a(9),d=n(s),u=a(3),c=n(u),f=a(2),p=n(f),h=a(0),m=n(h),g=a(58),v=n(g),S=a(98),y=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return m.default.createElement(v.default,null,m.default.createElement(S.NewApplication,null))}}]),t}(m.default.Component);t.default=y},856:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(13),l=o(r),i=a(1),s=o(i),d=a(9),u=o(d),c=a(3),f=o(c),p=a(2),h=o(p),m=a(0),g=o(m),v=a(58),S=o(v),y=a(21),I=a(17),C=a(98),b=a(132),E=n(b),w=a(176),A=n(w),M=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return g.default.createElement(S.default,null,g.default.createElement("div",null,g.default.createElement(C.CrowdedArea,this.props)),g.default.createElement("div",{style:{marginTop:24}},g.default.createElement(C.SchoolGate,this.props)),g.default.createElement("div",{style:{marginTop:24}},g.default.createElement(C.Classroom,{moduleList:this.props.moduleList})))}}]),t}(g.default.Component);t.default=(0,y.connect)(function(e){return{unbindCameraList:e.common.camera.unbindCameraList,cameraList:e.common.camera.cameraList,moduleList:e.common.module.moduleList}},function(e){return{moduleActions:(0,I.bindActionCreators)(E,e),cameraActions:(0,I.bindActionCreators)(A,e)}})(M)},857:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(199),a(198)),r=n(o),l=(a(33),a(18)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S),I=a(40),C=a(21),b=a(17),E=a(822),w=n(E),A=a(58),M=n(A),L=a(176),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(L),T=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return y.default.createElement(M.default,null,y.default.createElement(r.default,{separator:y.default.createElement(i.default,{type:"caret-right"}),style:{margin:"5px 0px 15px 0px"}},y.default.createElement(r.default.Item,null,"校园部署"),y.default.createElement(r.default.Item,null,y.default.createElement(I.Link,{to:"/iot/web/education/school/device-manage"},"设备接入")),y.default.createElement(r.default.Item,null,"摄像头管理")),y.default.createElement(w.default,this.props))}}]),t}(y.default.Component);t.default=(0,C.connect)(function(e){return{cameraList:e.common.camera.cameraList,scenario:e.common.scenario}},function(e){return{cameraActions:(0,b.bindActionCreators)(_,e)}})(T)},858:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(13),l=o(r),i=a(1),s=o(i),d=a(9),u=o(d),c=a(3),f=o(c),p=a(2),h=o(p),m=a(0),g=o(m),v=a(21),S=a(17),y=a(58),I=o(y),C=a(823),b=o(C),E=a(132),w=n(E),A=a(176),M=n(A),L=a(262),_=n(L),T=a(261),D=n(T),N=function(e){function t(){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.scenarioId,t=this.props.schoolId;this.props.cameraActions.fetchCameraListData(e,t).then(function(e){}).catch(function(e){}),this.props.moduleActions.fetchModuleListData(e,t).then(function(e){}).catch(function(e){}),this.props.gatewayActions.getIotGatewayList({scenarioId:e,schoolId:t}).then(function(e){}).catch(function(e){})}},{key:"render",value:function(){return g.default.createElement(I.default,null,g.default.createElement(b.default,this.props))}}]),t}(g.default.Component);t.default=(0,v.connect)(function(e){return{scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId,moduleList:e.common.module.moduleList,cameraList:e.common.camera.cameraList,sensorList:e.common.sensor.sensorList,gatewayList:e.settings.smartGatewayList.gatewayList}},function(e){return{moduleActions:(0,S.bindActionCreators)(w,e),cameraActions:(0,S.bindActionCreators)(M,e),sensorActions:(0,S.bindActionCreators)(_,e),gatewayActions:(0,S.bindActionCreators)(D,e)}})(N)},859:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(39),a(38)),r=n(o),l=a(0),i=n(l),s=a(58),d=n(s),u=a(21),c=a(17),f=a(40),p=a(1212);a(1572);var h=a(98),m=a(132),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(m),v=a(403);a(1620);var S=(0,f.withRouter)(i.default.createClass({displayName:"MapsManage",componentWillMount:function(){this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)},routerWillLeave:function(){if(this.props.mapsEdit.isEditing){if(this.props.mapsEdit.moduleStateBeforeEdit!=this.props.moduleState)return this.props.mapsEditActions.showPrompt(),!1;this.props.mapsEditActions.disableEdit()}},showGuide:function(){(0,p.introJs)().setOptions({prevLabel:"上一步",nextLabel:"下一步",skipLabel:"跳过",doneLabel:"结束",steps:[{element:"#addfloor",intro:"第一步:添加地图信息",position:"left"},{element:"#floorlist",intro:"第二步:点击选择需要编辑的地图",position:"top"},{element:"#mapedit",intro:"第三步:点击编辑按钮，进入编辑模式",position:"left"},{element:"#mapandlist",intro:"第四步:从定位模块列表中添加定位模快到地图中，并将模块图元拖动到适当位置，最后点击提交",position:"bottom"}]}).start()},render:function(){return i.default.createElement(d.default,null,i.default.createElement(r.default,{bodyStyle:{padding:0}},i.default.createElement("div",{id:"mapandlist",style:{marginTop:0,marginBottom:10,marginLeft:20,marginRight:20}},i.default.createElement(h.ModuleMap,this.props)),i.default.createElement("div",{className:"small-chat"},i.default.createElement("a",{className:"open-small-chat",onClick:this.showGuide},i.default.createElement("i",{className:"fa fa-question-circle fa-2x"}))),i.default.createElement("div",{id:"floorlist",style:{marginTop:10,marginBottom:10,marginLeft:20,marginRight:20}},i.default.createElement(h.MapsTable,this.props))))}}));t.default=(0,u.connect)(function(e){return{scenarioId:e.common.scenario.scenarioId,schoolId:e.common.scenario.currentSchoolId,moduleState:e.common.module,moduleList:e.common.module.moduleList,bindModuleList:e.common.module.bindModuleList,mapList:e.common.module.mapList,mapsEdit:e.settings.mapsEdit,mapUpload:e.settings.mapUpload}},function(e){return{moduleActions:(0,c.bindActionCreators)(g,e),mapsEditActions:(0,c.bindActionCreators)(v.mapsEditActions,e),mapUploadActions:(0,c.bindActionCreators)(v.mapUploadActions,e)}})(S)},860:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(a(199),a(198)),l=o(r),i=(a(33),a(18)),s=o(i),d=a(13),u=o(d),c=a(1),f=o(c),p=a(9),h=o(p),m=a(3),g=o(m),v=a(2),S=o(v),y=a(0),I=o(y),C=a(40),b=a(21),E=a(17),w=a(824),A=o(w),M=a(58),L=o(M),_=a(132),T=n(_),D=a(150),N=n(D),x=function(e){function t(){return(0,f.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,S.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){return I.default.createElement(L.default,null,I.default.createElement(l.default,{separator:I.default.createElement(s.default,{type:"caret-right"}),style:{margin:"5px 0px 15px 0px"}},I.default.createElement(l.default.Item,null,"校园部署"),I.default.createElement(l.default.Item,null,I.default.createElement(C.Link,{to:"/iot/web/education/school/device-manage"},"设备接入")),I.default.createElement(l.default.Item,null,"定位模块管理")),I.default.createElement(A.default,this.props))}}]),t}(I.default.Component);t.default=(0,b.connect)(function(e){return{moduleList:e.common.module.moduleList,scenario:e.common.scenario}},function(e){return{moduleActions:(0,E.bindActionCreators)(T,e),scenarioAction:(0,E.bindActionCreators)(N,e)}})(x)},861:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(199),a(198)),r=n(o),l=(a(33),a(18)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S),I=a(40),C=a(21),b=a(17),E=a(825),w=n(E),A=a(58),M=n(A),L=a(262),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(L),T=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return y.default.createElement(M.default,null,y.default.createElement(r.default,{separator:y.default.createElement(i.default,{type:"caret-right"}),style:{margin:"5px 0px 15px 0px"}},y.default.createElement(r.default.Item,null,"校园部署"),y.default.createElement(r.default.Item,null,y.default.createElement(I.Link,{to:"/iot/web/education/school/device-manage"},"设备接入")),y.default.createElement(r.default.Item,null,"传感器管理")),y.default.createElement(w.default,this.props))}}]),t}(y.default.Component);t.default=(0,C.connect)(function(e){return{sensorList:e.common.sensor.sensorList}},function(e){return{sensorActions:(0,b.bindActionCreators)(_,e)}})(T)},862:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(199),a(198)),r=n(o),l=(a(33),a(18)),i=n(l),s=a(13),d=n(s),u=a(1),c=n(u),f=a(9),p=n(f),h=a(3),m=n(h),g=a(2),v=n(g),S=a(0),y=n(S),I=a(40),C=a(21),b=a(17),E=a(826),w=n(E),A=a(58),M=n(A),L=a(261),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(L),T=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return y.default.createElement(M.default,null,y.default.createElement(r.default,{separator:y.default.createElement(i.default,{type:"caret-right"}),style:{margin:"5px 0px 15px 0px"}},y.default.createElement(r.default.Item,null,"校园部署"),y.default.createElement(r.default.Item,null,y.default.createElement(I.Link,{to:"/iot/web/education/school/device-manage"},"设备接入")),y.default.createElement(r.default.Item,null,"智能网关管理")),y.default.createElement(w.default,this.props))}}]),t}(y.default.Component);t.default=(0,C.connect)(function(e){return{scenario:e.common.scenario,gatewayList:e.settings.smartGatewayList.gatewayList,gatewayListLoading:e.settings.smartGatewayList.loading}},function(e){return{gatewayActions:(0,b.bindActionCreators)(_,e)}})(T)},98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalHeartRateChart=t.PersonalStepCountChart=t.RealTimeHeartRate=t.BaseData=t.MotionData=t.Classroom=t.NewApplication=t.ModuleMap=t.MapsTable=t.SchoolGate=t.CrowdedArea=t.ScreenModal=t.ClassroomStatistics=t.StudentActive=t.ClassActive=t.AverageStatistics=t.StudentTable=t.ClassTable=t.OverViewPie=t.HWTable=t.StepCountChart=t.HealthDetail=t.InoutSchool=t.Alert=t.FloorInfo=t.SetRanking=t.HistorySchoolRate=t.HeartRate=t.Attendance=t.SchoolList=void 0;var n=a(782),o=a(787),r=a(814),l=a(770),i=a(838),s=a(799);t.SchoolList=l.SchoolList,t.Attendance=n.Attendance,t.HeartRate=n.HeartRate,t.HistorySchoolRate=n.HistorySchoolRate,t.SetRanking=n.SetRanking,t.FloorInfo=n.FloorInfo,t.Alert=n.Alert,t.InoutSchool=n.InoutSchool,t.HealthDetail=o.HealthDetail,t.StepCountChart=o.StepCountChart,t.HWTable=o.HWTable,t.OverViewPie=o.OverViewPie,t.ClassTable=r.ClassTable,t.StudentTable=r.StudentTable,t.AverageStatistics=r.AverageStatistics,t.ClassActive=r.ClassActive,t.StudentActive=r.StudentActive,t.ClassroomStatistics=r.ClassroomStatistics,t.ScreenModal=r.ScreenModal,t.CrowdedArea=i.CrowdedArea,t.SchoolGate=i.SchoolGate,t.MapsTable=i.MapsTable,t.ModuleMap=i.ModuleMap,t.NewApplication=i.NewApplication,t.Classroom=i.Classroom,t.MotionData=s.MotionData,t.BaseData=s.BaseData,t.RealTimeHeartRate=s.RealTimeHeartRate,t.PersonalStepCountChart=s.PersonalStepCountChart,t.PersonalHeartRateChart=s.PersonalHeartRateChart},99:function(e,t,a){"use strict";function n(e,t){return 0==e&&(e=2004),0==t?31:2==t?e%400==0||e%4==0&&e%100!=0?29:28:4==t||6==t||9==t||11==t?30:31}function o(e){return e.replace(/[^\x00-\xff]/g,"ci").length}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxDateDay=n,t.getStringByteLength=o}},[1630]);
//# sourceMappingURL=app.2adce59838464ad5b3e7.bundle.js.map