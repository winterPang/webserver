!function(t){"use strict";function n(e){!(this instanceof n)&&t.error("请调用$.modal.create(options)创建对象!");var d=this,s=t.extend(!0,{},n.DEFAULTS,e),l=s.content(),a=t('<div class="modal-content"><div class="modal-header hidden"><button type="button" class="close hidden"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"></h4></div><div class="modal-body"></div><div class="modal-footer hidden"></div></div>');d.el=a,d.options=s,a.appendTo("body"),l.appendTo(a.find(".modal-body")),s.title&&a.find(".modal-title").text(s.title),s.showHeader=s.showHeader&&!!s.title,s.showClose&&a.find(".close")[o]("hidden").unbind("click").bind("click",function(){"hide"==s.closeAction?d.hide():d.destroy()}),s.showHeader&&a.find(".modal-header")[o]("hidden"),s.showFooter&&a.find(".modal-footer")[o]("hidden"),s.modalSize&&a[i]("modal-"+s.modalSize),s.buttonAlign&&a.find(".modal-footer").css("text-align",s.buttonAlign),s.buttons&&s.buttons.length&&t.each(s.buttons,function(){var n=this,e=t('<button class="btn btn-sm"></button>');n.text&&e.text(n.text),e[i](n.btnCls?"btn-"+n.btnCls:"btn-default"),s.buttonSize&&e[i]("btn-"+s.buttonSize),n.handler&&e.unbind("click").bind("click",function(){n.handler.call(d,d,l)}),e.appendTo(a.find(".modal-footer"))}),a.on("show.bs.modal",function(){s.beforeShow.call(d,d,l)}).on("shown.bs.modal",function(){s.onShow.call(d,d,l)}).on("hide.bs.modal",function(){s.beforeHide.call(d,d,l)}).on("hidden.bs.modal",function(){s.onHide.call(d,d,l)}),d.resize=function(){var n=t(window).height(),e=a.height(),o=(n-e)/2;!a.is(":hidden")&&a.css({top:o,opacity:1})},t(window).resize(d.resize)}var e=300;var o="removeClass",i="addClass";n.create=function(t){return new n(t)},n.alert=function(e,o,i){var d=t.extend(!0,{},n.ALERT_DEFAULTS,{title:o||"提示",content:function(){return t("<div>"+e+"</div>")},buttons:[{text:"确定",btnCls:"cus",handler:function(t,n){i&&i(t,n),t.destroy()}}]});n.create(d).show()},n.confirm=function(e,o,i,d){var s=t.extend(!0,{},n.ALERT_DEFAULTS,{title:o||"提示",content:function(){return t("<div>"+e+"</div>")},buttons:[{text:"确定",btnCls:"cus",handler:function(t,n){i&&i(t,n),t.destroy()}},{text:"取消",btnCls:"cus",handler:function(t,n){d&&d(t,n),t.destroy()}}]});n.create(s).show()},n.prompt=function(e,o,i,d,s){var l=t.extend(!0,{},n.ALERT_DEFAULTS,{title:e||"询问",content:function(){i=i||"text",d=d||"";var n="textarea"==i?'<textarea style="height: 100px;resize: vertical" class="form-control">'+d+"</textarea>":'<input type="'+i+'" value="'+d+'" class="form-control">';return t("<div>"+n+"</div>")},buttons:[{text:"确定",btnCls:"cus",handler:function(t,n){o&&o(n.find("textarea,input").val(),t,n),t.destroy()}},{text:"取消",btnCls:"cus",handler:function(t,n){s&&s(t,n),t.destroy()}}]});n.create(l).show()},n.modal=function(e,o,i,d,s){var l=s;void 0!=d&&null!=d&&"boolean"==typeof d&&(l=d),l=void 0==l||1==l;var a=t.extend(!0,{},n.ALERT_DEFAULTS,{title:e||"询问",content:o,buttons:[{text:"确定",btnCls:"cus",handler:function(t,n){i&&i(t,n),l&&t.destroy()}},{text:"取消",btnCls:"cus",handler:function(t,n){d&&d instanceof Function&&d(t,n),t.destroy()}}]});n.create(a).show()},n.fn=n.prototype,n.fn.show=function(){var n=this;n.el.show().trigger("show.bs.modal"),t(window).trigger("resize"),setTimeout(function(){n.el.trigger("shown.bs.modal")},e)},n.fn.disableOk=function(n){n=n||!0;var e=this.el.find("button").filter(function(n){return"确定"==t(n).html()});n?e.attr("disabled","disabled"):e.removeAttr("disabled")},n.fn.disableCancel=function(n){n=n||!0;var e=this.el.find("button").filter(function(n){return"确定"==t(n).html()});n?e.attr("disabled","disabled"):e.removeAttr("disabled")},n.fn.hide=function(n){var o=this,i=t(window).height(),d=this.el.find(".modal-content").height(),s=(i-d)/2;o.el.trigger("hide.bs.modal"),o.el.css({opacity:.3,top:-s}),setTimeout(function(){o.el.hide().trigger("hidden.bs.modal"),n&&n()},e)},n.fn.destroy=function(){var t=this;t.hide(function(){t.el.remove()})},n.fn.close=n.fn.destroy,n.DEFAULTS={animate:!0,title:"Modal",modalSize:"normal",showHeader:!0,showClose:!0,showFooter:!0,buttonAlign:"center",buttonSize:"",closeAction:"hide",buttons:[],content:function(){return t("<div></div>")},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){}},n.ALERT_DEFAULTS=t.extend(!0,{},n.DEFAULTS,{buttonAlign:"center",closeAction:"destroy"}),t.modal=n}(jQuery);