{"version":3,"sources":["frame/component/form/oasis-spinner.js"],"names":["numRegex","factory","restrict","replace","scope","osModel","osDisabled","osLabel","template","link","ele","attr","id","Math","random","toString","substr","max","Infinity","min","undefined","Error","osMin","Number","osMax","labelStyle","width","labelwidth","inputStyle","inputwidth","plus","minus","$watch","val","old","test","checkRange","directive"],"mappings":";;;;;;;;;;;AAIA,MAAIA,WAAW,UAAf;AAHA;;;AAKA,MAAIC,UAAU,SAAVA,OAAU,GAAM;AAClB,WAAO;AACLC,gBAAU,GADL;AAELC,eAAS,IAFJ;AAGLC,aAAO;AACLC,iBAAS,GADJ;AAELC,oBAAY,GAFP;AAGLC,iBAAS;AAHJ,OAHF;AAQLC,gBAAU;;;;;eARL;AAcLC,UAdK,gBAcAL,KAdA,EAcOM,GAdP,EAcYC,IAdZ,EAckB;AACrBP,cAAMQ,EAAN,GAAWC,KAAKC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,IAAuC,UAAlD;AACAZ,cAAMa,GAAN,GAAYC,QAAZ;AACAd,cAAMe,GAAN,GAAY,CAACD,QAAb;AACA,YAAIP,KAAKN,OAAL,KAAiBe,SAArB,EAAgC;AAC9B,gBAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AACD;;AAED,YAAIjB,MAAMC,OAAN,KAAkBe,SAAtB,EAAiC;AAC/BhB,gBAAMC,OAAN,GAAgB,CAAhB;AACD;;AAED,YAAIM,KAAKW,KAAL,KAAeF,SAAnB,EAA8B;AAC5BhB,gBAAMe,GAAN,GAAYI,OAAOZ,KAAKW,KAAZ,CAAZ;AACD;;AAED,YAAIX,KAAKa,KAAL,KAAeJ,SAAnB,EAA8B;AAC5BhB,gBAAMa,GAAN,GAAYM,OAAOZ,KAAKa,KAAZ,CAAZ;AACD;;AAEDpB,cAAMqB,UAAN,GAAmB;AACjBC,iBAAOf,KAAKgB,UAAL,GAAkBhB,KAAKgB,UAAL,GAAkB,IAApC,GAA2C;AADjC,SAAnB;;AAIAvB,cAAMwB,UAAN,GAAmB;AACjBF,iBAAOf,KAAKkB,UAAL,GAAkBlB,KAAKkB,UAAL,GAAkB,IAApC,GAA2C;AADjC,SAAnB;;AAIAzB,cAAM0B,IAAN,GAAa,YAAY;AACvB1B,gBAAMC,OAAN;AACD,SAFD;;AAIAD,cAAM2B,KAAN,GAAc,YAAY;AACxB3B,gBAAMC,OAAN;AACD,SAFD;;AAIAD,cAAM4B,MAAN,CAAa,SAAb,EAAwB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC1C,cAAI,CAAClC,SAASmC,IAAT,CAAcF,GAAd,CAAL,EAAyB;AACvB7B,kBAAMC,OAAN,GAAgB6B,OAAO,CAAvB;AACD;AACF,SAJD;;AAMA9B,cAAMgC,UAAN,GAAmB,YAAY;AAC7B,cAAIhC,MAAMC,OAAN,GAAgBD,MAAMa,GAA1B,EAA+B;AAC7Bb,kBAAMC,OAAN,GAAgBD,MAAMa,GAAtB;AACD;AACD,cAAIb,MAAMC,OAAN,GAAgBD,MAAMe,GAA1B,EAA+B;AAC7Bf,kBAAMC,OAAN,GAAgBD,MAAMe,GAAtB;AACD;AACF,SAPD;AAQD;AAhEI,KAAP;AAkED,GAnED;;AAqEA,uBAAIkB,SAAJ,CAAc,cAAd,EAA8B,CAACpC,OAAD,CAA9B","file":"frame/component/form/oasis-spinner.js","sourcesContent":["import app from 'angularAMD'\n// 导入样式\nimport 'css!frame/component/form/less/spinner'\n\nlet numRegex = /^[0-9]*$/;\n\nlet factory = () => {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      osModel: '=',\n      osDisabled: '=',\n      osLabel: '@'\n    },\n    template: '<div class=\"oasis-spinner\" ng-class=\"{disabled:osDisabled}\">\\\n        <label ng-bind=\"osLabel\" for=\"{{id}}\" ng-style=\"labelStyle\"></label>\\\n        <button class=\"btn btn-left\" ng-click=\"minus()\" ng-disabled=\"osModel<=min || osDisabled\">-</button>\\\n        <input ng-model=\"osModel\" class=\"form-control\" ng-blur=\"checkNum\" type=\"text\" ng-blur=\"checkRange()\" id=\"{{id}}\" ng-style=\"inputStyle\" ng-disabled=\"osDisabled\">\\\n        <button class=\"btn btn-right\" ng-click=\"plus()\" ng-disabled=\"osModel>=max || osDisabled\">+</button>\\\n        </div>',\n    link(scope, ele, attr) {\n      scope.id = Math.random().toString(16).substr(2) + '_spinner';\n      scope.max = Infinity;\n      scope.min = -Infinity;\n      if (attr.osModel === undefined) {\n        throw new Error('oasis-spinner应该有一个os-model属性');\n      }\n\n      if (scope.osModel === undefined) {\n        scope.osModel = 0;\n      }\n\n      if (attr.osMin !== undefined) {\n        scope.min = Number(attr.osMin);\n      }\n\n      if (attr.osMax !== undefined) {\n        scope.max = Number(attr.osMax);\n      }\n\n      scope.labelStyle = {\n        width: attr.labelwidth ? attr.labelwidth + 'px' : '80px'\n      };\n\n      scope.inputStyle = {\n        width: attr.inputwidth ? attr.inputwidth + 'px' : '80px'\n      };\n\n      scope.plus = function () {\n        scope.osModel++;\n      };\n\n      scope.minus = function () {\n        scope.osModel--;\n      };\n\n      scope.$watch('osModel', function (val, old) {\n        if (!numRegex.test(val)) {\n          scope.osModel = old || 0;\n        }\n      });\n\n      scope.checkRange = function () {\n        if (scope.osModel > scope.max) {\n          scope.osModel = scope.max;\n        }\n        if (scope.osModel < scope.min) {\n          scope.osModel = scope.min;\n        }\n      };\n    }\n  };\n}\n\napp.directive('oasisSpinner', [factory]);"],"sourceRoot":"/source/"}