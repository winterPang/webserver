{"version":3,"sources":["frame/component/form/oasis-switch.js"],"names":["factory","restrict","replace","scope","osModel","osDisabled","osLabel","template","link","ele","attr","isParentTrigger","id","Math","random","toString","substr","undefined","Error","onText","osOnText","offText","osOffText","onValue","osOnValue","offValue","osOffValue","labelStyle","width","labelwidth","boxStyle","osWidth","$watch","model","active","directive"],"mappings":";;;;;;;;;;;AAIA,MAAIA,UAAU,SAAVA,OAAU,GAAM;AAClB,WAAO;AACLC,gBAAU,GADL;AAELC,eAAS,IAFJ;AAGLC,aAAO;AACLC,iBAAS,GADJ;AAELC,oBAAY,GAFP;AAGLC,iBAAS;AAHJ,OAHF;AAQLC,gBAAU;;;;;;;;eARL;AAiBLC,UAjBK,gBAiBAL,KAjBA,EAiBOM,GAjBP,EAiBYC,IAjBZ,EAiBkB;AACrB,YAAIC,kBAAkB,IAAtB,CADqB,CACO;AAC5BR,cAAMS,EAAN,GAAWC,KAAKC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,IAAuC,SAAlD;AACA,YAAIN,KAAKN,OAAL,KAAiBa,SAArB,EAAgC;AAC9B,gBAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;AACD;AACAf,cAAMgB,MAAN,GAAeT,KAAKU,QAAL,IAAiB,IAAhC;AACAjB,cAAMkB,OAAN,GAAgBX,KAAKY,SAAL,IAAkB,KAAlC;AACAnB,cAAMoB,OAAN,GAAgBb,KAAKc,SAAL,KAAmBP,SAAnB,GAA+BP,KAAKc,SAApC,GAAgD,IAAhE;AACArB,cAAMsB,QAAN,GAAiBf,KAAKgB,UAAL,KAAoBT,SAApB,GAAgCP,KAAKgB,UAArC,GAAkD,KAAnE;;AAEAvB,cAAMwB,UAAN,GAAmB;AACjBC,iBAAOlB,KAAKmB,UAAL,GAAkBnB,KAAKmB,UAAL,GAAkB,IAApC,GAA2C;AADjC,SAAnB;;AAIA1B,cAAM2B,QAAN,GAAiB;AACfF,iBAAOlB,KAAKqB,OAAL,GAAerB,KAAKqB,OAAL,GAAe,IAA9B,GAAqC;AAD7B,SAAjB;;AAIA;AACA5B,cAAM6B,MAAN,CAAa,SAAb,EAAwB,UAAUC,KAAV,EAAiB;AACvC,cAAItB,eAAJ,EAAqB;AACnBR,kBAAM+B,MAAN,GAAeD,UAAU9B,MAAMsB,QAA/B;AACD;AACDd,4BAAkB,IAAlB;AACD,SALD;AAMA;AACAR,cAAM6B,MAAN,CAAa,QAAb,EAAuB,UAAUE,MAAV,EAAkB;AACvCvB,4BAAkB,KAAlB;AACAR,gBAAMC,OAAN,GAAgB8B,SAAS/B,MAAMsB,QAAf,GAA0BtB,MAAMoB,OAAhD;AACD,SAHD;AAKD;AAlDI,KAAP;AAoDD,GArDD;AAHA;;;AA0DA,uBAAIY,SAAJ,CAAc,aAAd,EAA6B,CAACnC,OAAD,CAA7B","file":"frame/component/form/oasis-switch.js","sourcesContent":["import app from 'angularAMD'\n// 导入样式\nimport 'css!frame/component/form/less/switch'\n\nlet factory = () => {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      osModel: '=',\n      osDisabled: '=',\n      osLabel: '@'\n    },\n    template: '<div class=\"oasis-switch\" ng-class=\"{disabled:osDisabled}\">\\\n        <label ng-bind=\"osLabel\" for=\"{{id}}\" ng-style=\"labelStyle\"></label>\\\n        <div class=\"switch-box\" ng-style=\"boxStyle\" ng-click=\"active=!active\">\\\n        <div class=\"switch-handler\" ng-class=\"{active:active}\">\\\n        <div>{{onText}}<div></div></div>\\\n        <div>{{offText}}<div></div></div>\\\n        </div>\\\n        </div>\\\n        </div>',\n    link(scope, ele, attr) {\n      let isParentTrigger = true; // 是否是外部组件传进来的值\n      scope.id = Math.random().toString(16).substr(2) + '_switch';\n      if (attr.osModel === undefined) {\n        throw new Error('oasis-switch应该有一个os-model属性');\n      }\n      // 参数配置\n      scope.onText = attr.osOnText || 'ON';\n      scope.offText = attr.osOffText || 'OFF';\n      scope.onValue = attr.osOnValue !== undefined ? attr.osOnValue : true;\n      scope.offValue = attr.osOffValue !== undefined ? attr.osOffValue : false;\n\n      scope.labelStyle = {\n        width: attr.labelwidth ? attr.labelwidth + 'px' : '80px'\n      };\n\n      scope.boxStyle = {\n        width: attr.osWidth ? attr.osWidth + 'px' : '80px'\n      };\n\n      // 外部传递值到里面\n      scope.$watch('osModel', function (model) {\n        if (isParentTrigger) {\n          scope.active = model === scope.offValue;\n        }\n        isParentTrigger = true;\n      });\n      // 里面传递值到外面\n      scope.$watch('active', function (active) {\n        isParentTrigger = false;\n        scope.osModel = active ? scope.offValue : scope.onValue;\n      });\n\n    }\n  };\n};\n\napp.directive('oasisSwitch', [factory]);"],"sourceRoot":"/source/"}