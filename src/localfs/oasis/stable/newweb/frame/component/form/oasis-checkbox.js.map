{"version":3,"sources":["frame/component/form/oasis-checkbox.js"],"names":["_linkFunc","$scope","$element","$attr","controller","$ele","$","find","$watch","v","n","value","removeClass","addClass","unbind","bind","$apply","osModel","index","findIndex","splice","push","directive","restrict","scope","osDisabled","template","replace","transclude","$attrs","$transclude","link"],"mappings":";;;;;;;;;;;AAGA,MAAIA,YAAY,SAAZA,SAAY,CAACC,MAAD,EAASC,QAAT,EAAmBC,KAAnB,EAA0BC,UAA1B,EAAyC;AACvD,QAAIC,OAAOC,EAAEJ,SAASK,IAAT,CAAc,OAAd,EAAuB,CAAvB,CAAF,CAAX;AACAN,WAAOO,MAAP,CAAc,SAAd,EAAyB,UAAUC,CAAV,EAAa;AACpC,UAAIA,EAAEF,IAAF,CAAO,UAACG,CAAD,EAAO;AACd,eAAOA,KAAKP,MAAMQ,KAAlB;AACD,OAFC,CAAJ,EAEM;AACJN,aAAKO,WAAL,CAAiB,WAAjB,EAA8BC,QAA9B,CAAuC,SAAvC;AACD,OAJD,MAIO;AACLR,aAAKO,WAAL,CAAiB,SAAjB,EAA4BC,QAA5B,CAAqC,WAArC;AACD;AACF,KARD,EAQG,IARH;AASAZ,WAAOO,MAAP,CAAc,YAAd,EAA4B,UAAUC,CAAV,EAAa;AACvC,UAAIA,CAAJ,EAAO;AACLJ,aAAKS,MAAL,CAAY,OAAZ;AACAT,aAAKQ,QAAL,CAAc,UAAd;AACD,OAHD,MAGO;AACLR,aAAKS,MAAL,CAAY,OAAZ,EAAqBC,IAArB,CAA0B,OAA1B,EAAmC,YAAY;AAC7Cd,iBAAOe,MAAP,CAAc,YAAY;AACxB,gBAAIf,OAAOgB,OAAP,CAAeV,IAAf,CAAoB,UAACG,CAAD,EAAO;AAC3B,qBAAOA,KAAKP,MAAMQ,KAAlB;AACD,aAFC,CAAJ,EAEM;AACJ,kBAAIO,QAAQjB,OAAOgB,OAAP,CAAeE,SAAf,CAAyB,UAACT,CAAD,EAAO;AAC1C,uBAAOA,KAAKP,MAAMQ,KAAlB;AACD,eAFW,CAAZ;AAGAV,qBAAOgB,OAAP,CAAeG,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACD,aAPD,MAOO;AACLjB,qBAAOgB,OAAP,CAAeI,IAAf,CAAoBlB,MAAMQ,KAA1B;AACD;AACD;AACD,WAZD;AAaD,SAdD;AAeAN,aAAKO,WAAL,CAAiB,UAAjB;AACD;AACF,KAtBD,EAsBG,IAtBH;AAuBD,GAlCD;;AAoCA,uBAAWU,SAAX,CAAqB,eAArB,EAAsC,CAAC,YAAM;AAC3C,WAAO;AACLC,gBAAU,GADL;AAELC,aAAO;AACLP,iBAAS,GADJ;AAELQ,oBAAY;AAFP,OAFF;AAMLC,gBAAU,kGANL;AAOLC,eAAS,IAPJ;AAQLC,kBAAY,IARP;AASLxB,kBAAY,oBAAUH,MAAV,EAAkBC,QAAlB,EAA4B2B,MAA5B,EAAoCC,WAApC,EAAiD,CAC5D,CAVI;AAWLC,YAAM,cAAU9B,MAAV,EAAkBC,QAAlB,EAA4BC,KAA5B,EAAmCC,UAAnC,EAA+C;AACnDJ,kBAAUC,MAAV,EAAkBC,QAAlB,EAA4BC,KAA5B,EAAmCC,UAAnC;AACD;AAbI,KAAP;AAeD,GAhBqC,CAAtC","file":"frame/component/form/oasis-checkbox.js","sourcesContent":["import angularAMD from 'angularAMD'\nimport 'css!./frame/component/form/less/form'\n\nlet _linkFunc = ($scope, $element, $attr, controller) => {\n  var $ele = $($element.find('label')[0]);\n  $scope.$watch('osModel', function (v) {\n    if (v.find((n) => {\n        return n == $attr.value\n      })) {\n      $ele.removeClass('unchecked').addClass('checked');\n    } else {\n      $ele.removeClass('checked').addClass('unchecked');\n    }\n  }, true);\n  $scope.$watch('osDisabled', function (v) {\n    if (v) {\n      $ele.unbind('click');\n      $ele.addClass('disabled');\n    } else {\n      $ele.unbind('click').bind('click', function () {\n        $scope.$apply(function () {\n          if ($scope.osModel.find((n) => {\n              return n == $attr.value\n            })) {\n            let index = $scope.osModel.findIndex((n) => {\n              return n == $attr.value\n            })\n            $scope.osModel.splice(index, 1);\n          } else {\n            $scope.osModel.push($attr.value);\n          }\n          //$scope.osModel = $attr.value;\n        });\n      });\n      $ele.removeClass('disabled');\n    }\n  }, true);\n}\n\nangularAMD.directive('oasisCheckbox', [() => {\n  return {\n    restrict: 'E',\n    scope: {\n      osModel: '=',\n      osDisabled: '='\n    },\n    template: '<div class=\"oasis-checkbox\"><label class=\"unchecked\"></label><label ng-transclude></label></div>',\n    replace: true,\n    transclude: true,\n    controller: function ($scope, $element, $attrs, $transclude) {\n    },\n    link: function ($scope, $element, $attr, controller) {\n      _linkFunc($scope, $element, $attr, controller);\n    }\n  }\n}])\n"],"sourceRoot":"/source/"}